<!doctype html><html lang=zh-CN data-theme=light><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="shell编程进阶 "><meta itemprop=description content="1208034077#qq.com"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="http://localhost:1313/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux"><meta property="og:type" content="article"><meta property="og:title" content="shell编程进阶 "><meta property="og:description" content="1208034077#qq.com"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="http://localhost:1313/post/linux14/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2024-12-23 20:06:00 +0800 CST"><meta property="article:modified_time" content="2024-12-23 20:06:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"linux14","permalink":"http://localhost:1313/post/linux14/","title":"shell编程进阶 ","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>shell编程进阶 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>82</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#循环执行介绍>循环执行介绍</a><ul><li><a href=#循环-for>循环 for</a><ul><li><a href=#格式1>格式1：</a></li><li><a href=#格式2>格式2</a></li><li><a href=#练习用-for-实现>练习：用 for 实现</a></li></ul></li><li><a href=#循环-while>循环 while</a><ul><li><a href=#练习用while实现>练习：用while实现</a></li></ul></li><li><a href=#while-特殊用法-while-read>while 特殊用法 while read</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>1208034077#qq.com</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>82</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>55</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=171030></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=388></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-23T20:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=http://localhost:1313/post/linux14/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="1208034077#qq.com"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="shell编程进阶 "><meta itemprop=description content="循环执行介绍 将某代码段重复运行多次，通常有进入循环的条件和退出循环的条件 重复运行次数 循环次数事先已知 循环次数事先未知 常见的循环的命令：for"></span><header class=post-header><h1 class=post-title itemprop="name headline">shell编程进阶</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-12-23 20:06:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-12-23 20:06:00 +0800 CST">2024-12-23
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/linux itemprop=url rel=index><span itemprop=name>linux</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><h2 id=循环执行介绍>循环执行介绍
<a class=header-anchor href=#%e5%be%aa%e7%8e%af%e6%89%a7%e8%a1%8c%e4%bb%8b%e7%bb%8d></a></h2><p>将某代码段重复运行多次，通常有进入循环的条件和退出循环的条件<br>重复运行次数</p><ul><li>循环次数事先已知</li><li>循环次数事先未知
常见的循环的命令：for, while, until
<img src=/imgs/img-lazy-loading.gif data-src=/images/url/linux/linux09/12.jpg alt></li></ul><h3 id=循环-for>循环 for
<a class=header-anchor href=#%e5%be%aa%e7%8e%af-for></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>
</span></span><span style=display:flex><span>#CentOS7的for帮助比CentOS8全面
</span></span><span style=display:flex><span>[root@centos7 ~]#help for
</span></span><span style=display:flex><span>for: for NAME [in WORDS ... ] ; do COMMANDS; done
</span></span><span style=display:flex><span>Execute commands for each member in a list.
</span></span><span style=display:flex><span>The `for&#39; loop executes a sequence of commands for each member in a
</span></span><span style=display:flex><span>list of items. If `in WORDS ...;&#39; is not present, then `in &#34;$@&#34;&#39; is
</span></span><span style=display:flex><span>assumed. For each element in WORDS, NAME is set to that element, and
</span></span><span style=display:flex><span>the COMMANDS are executed.
</span></span><span style=display:flex><span>Exit Status:
</span></span><span style=display:flex><span>Returns the status of the last command executed.
</span></span><span style=display:flex><span>for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done
</span></span><span style=display:flex><span>Arithmetic for loop.
</span></span><span style=display:flex><span>Equivalent to
</span></span><span style=display:flex><span>(( EXP1 ))
</span></span><span style=display:flex><span>while (( EXP2 )); do
</span></span><span style=display:flex><span>COMMANDS
</span></span><span style=display:flex><span>(( EXP3 ))
</span></span><span style=display:flex><span>done
</span></span><span style=display:flex><span>EXP1, EXP2, and EXP3 are arithmetic expressions. If any expression is
</span></span><span style=display:flex><span>omitted, it behaves as if it evaluates to 1.
</span></span><span style=display:flex><span>Exit Status:
</span></span><span style=display:flex><span>Returns the status of the last command executed.
</span></span></code></pre></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/50a1b408-4aaf-44db-8e5d-983e1f97ccad alt=image></p><h4 id=格式1>格式1：
<a class=header-anchor href=#%e6%a0%bc%e5%bc%8f1></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>for NAME [in WORDS ... ] ; do COMMANDS; done
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#方式1
</span></span><span style=display:flex><span>for 变量名 in 列表;do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#方式2
</span></span><span style=display:flex><span>for 变量名 in 列表
</span></span><span style=display:flex><span>do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p><strong>执行机制：</strong></p><ul><li>依次将列表中的元素赋值给“变量名”; 每次赋值后即执行一次循环体; 直到列表中的元素耗尽，循环
结束</li><li>如果省略 [in WORDS &mldr; ] ，此时使用位置参数变量 in &ldquo;$@&rdquo;
<strong>for 循环列表生成方式：</strong></li><li>直接给出列表</li><li>整数列表：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>{start..end}
</span></span><span style=display:flex><span>$(seq [start [step]] end)
</span></span></code></pre></div><ul><li>返回列表的命令:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$(COMMAND)
</span></span></code></pre></div><ul><li>使用glob，如：*.sh</li><li>变量引用，如：$@，$*，$#
范例：面试题，计算1+2+3+&mldr;+100 的结果</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#sum=0;for i in {1..100};do let sum+=i;done ;echo sum=$sum
</span></span><span style=display:flex><span>sum=5050
</span></span><span style=display:flex><span>[root@centos8 ~]#seq -s+ 100|bc5050
</span></span><span style=display:flex><span>5050
</span></span><span style=display:flex><span>[root@centos8 ~]#echo {1..100}|tr &#39; &#39; +|bc
</span></span><span style=display:flex><span>5050
</span></span><span style=display:flex><span>[root@centos8 ~]#seq 100|paste -sd +|bc
</span></span><span style=display:flex><span>5050
</span></span></code></pre></div><p>范例: 100以内的奇数之和</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#sum=0;for i in {1..100..2};do let sum+=i;done;echo sum=$sum
</span></span><span style=display:flex><span>sum=2500
</span></span><span style=display:flex><span>[root@centos8 ~]#seq -s+ 1 2 100| bc
</span></span><span style=display:flex><span>2500
</span></span><span style=display:flex><span>[root@centos8 ~]#echo {1..100..2}|tr &#39; &#39; + | bc
</span></span><span style=display:flex><span>2500
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/for_sum.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>sum<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in $* ; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>let sum<span style=color:#f92672>+=</span>i
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>echo sum<span style=color:#f92672>=</span>$sum
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/scripts/for_sum.sh 1 2 3 4 5 6</span>
</span></span><span style=display:flex><span>sum<span style=color:#f92672>=</span><span style=color:#ae81ff>21</span>
</span></span></code></pre></div><p>范例: 批量创建用户</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat createuser.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $# -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;Usage: createuser.sh USERNAME ...&#34;</span> ;exit <span style=color:#ae81ff>1</span> ; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> user ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    id $user &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo $user is exist <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> useradd $user ; echo $user
</span></span><span style=display:flex><span>is created; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: 批量创建用户和并设置随机密码</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat user_for.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..10<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>useradd user$i
</span></span><span style=display:flex><span>    PASS<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat /dev/urandom | tr -dc <span style=color:#e6db74>&#39;[:alnum:]&#39;</span> |head -c12<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    echo $PASS | passwd --stdin user$i &amp;&gt; /dev/null
</span></span><span style=display:flex><span>    echo user$i:$PASS &gt;&gt; /data/user.log
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;user</span>$i<span style=color:#e6db74> is created&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: 九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat 9x9_for.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> j in <span style=color:#e6db74>`</span>seq $i<span style=color:#e6db74>`</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        echo -e <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span><span style=color:#e6db74>${</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span>$<span style=color:#e6db74>[j*i]\t\c&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>    echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: 实现九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#vim 9x9.sh
</span></span><span style=display:flex><span>for j in {1..9};do
</span></span><span style=display:flex><span>    for i in `seq $j`;do
</span></span><span style=display:flex><span>        echo -e &#34;\E[1;$[RANDOM%7+31]m${i}x${j}=$[i*j]\E[0m\t\c&#34;
</span></span><span style=display:flex><span>    done
</span></span><span style=display:flex><span>    echo
</span></span><span style=display:flex><span>done
</span></span><span style=display:flex><span>echo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>for((i=1;i&lt;=9;i++));do
</span></span><span style=display:flex><span>    for((j=1;j&lt;=i;j++));do
</span></span><span style=display:flex><span>        printf &#34;\E[1;$[RANDOM%7+31]m${i}x${j}=$[i*j]\E[0m\t&#34;
</span></span><span style=display:flex><span>    done
</span></span><span style=display:flex><span>    printf &#34;\n&#34;
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p>范例: 倒状的九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu1804 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat 9x9_v2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> j in <span style=color:#66d9ef>$(</span>seq <span style=color:#e6db74>`</span>echo $<span style=color:#f92672>[</span>10-$i<span style=color:#f92672>]</span><span style=color:#e6db74>`</span><span style=color:#66d9ef>)</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        echo -ne <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>x`echo </span>$<span style=color:#e6db74>[10-i]`=</span><span style=color:#66d9ef>$((</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>-</span>i<span style=color:#f92672>)*</span>j<span style=color:#66d9ef>))</span><span style=color:#e6db74>\t&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>    echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu1804 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash 9x9_v2.sh</span>
</span></span><span style=display:flex><span>1x9<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> 2x9<span style=color:#f92672>=</span><span style=color:#ae81ff>18</span> 3x9<span style=color:#f92672>=</span><span style=color:#ae81ff>27</span> 4x9<span style=color:#f92672>=</span><span style=color:#ae81ff>36</span> 5x9<span style=color:#f92672>=</span><span style=color:#ae81ff>45</span> 6x9<span style=color:#f92672>=</span><span style=color:#ae81ff>54</span> 7x9<span style=color:#f92672>=</span><span style=color:#ae81ff>63</span> 8x9<span style=color:#f92672>=</span><span style=color:#ae81ff>72</span> 9x9<span style=color:#f92672>=</span><span style=color:#ae81ff>81</span>
</span></span><span style=display:flex><span>1x8<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span> 2x8<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span> 3x8<span style=color:#f92672>=</span><span style=color:#ae81ff>24</span> 4x8<span style=color:#f92672>=</span><span style=color:#ae81ff>32</span> 5x8<span style=color:#f92672>=</span><span style=color:#ae81ff>40</span> 6x8<span style=color:#f92672>=</span><span style=color:#ae81ff>48</span> 7x8<span style=color:#f92672>=</span><span style=color:#ae81ff>56</span> 8x8<span style=color:#f92672>=</span><span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>1x7<span style=color:#f92672>=</span><span style=color:#ae81ff>7</span> 2x7<span style=color:#f92672>=</span><span style=color:#ae81ff>14</span> 3x7<span style=color:#f92672>=</span><span style=color:#ae81ff>21</span> 4x7<span style=color:#f92672>=</span><span style=color:#ae81ff>28</span> 5x7<span style=color:#f92672>=</span><span style=color:#ae81ff>35</span> 6x7<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span> 7x7<span style=color:#f92672>=</span><span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>1x6<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> 2x6<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span> 3x6<span style=color:#f92672>=</span><span style=color:#ae81ff>18</span> 4x6<span style=color:#f92672>=</span><span style=color:#ae81ff>24</span> 5x6<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> 6x6<span style=color:#f92672>=</span><span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>1x5<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> 2x5<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span> 3x5<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span> 4x5<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span> 5x5<span style=color:#f92672>=</span><span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>1x4<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span> 2x4<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span> 3x4<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span> 4x4<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>1x3<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> 2x3<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> 3x3<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span>1x2<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> 2x2<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>1x1<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>生产案例：将指定目录下的文件所有文件的后缀改名为 bak 后缀</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/for_rename.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>DIR<span style=color:#f92672>=</span>/data/test
</span></span><span style=display:flex><span>cd $DIR <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo 无法进入 $DIR;exit 1; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> FILE in * ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    PRE<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $FILE|grep -Eo <span style=color:#e6db74>&#34;.*\.&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    mv $FILE <span style=color:#e6db74>${</span>PRE<span style=color:#e6db74>}</span>bak
</span></span><span style=display:flex><span><span style=color:#75715e># PRE=`echo $FILE|rev|cut -d. -f 2-|rev`</span>
</span></span><span style=display:flex><span><span style=color:#75715e># PRE=`echo $FILE | sed -nr &#39;s/(.*)\.([^.]+)$/\1/p&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># SUFFIX=`echo $FILE | sed -nr &#39;s/(.*)\.([^.]+)$/\2/p&#39;`</span>
</span></span><span style=display:flex><span><span style=color:#75715e># mv $FILE $PRE.bak</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例：M37期面试题，要求将目录YYYY-MM-DD/中所有文件，移动到YYYY-MM/DD/下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#1.创建YYYY-MM-DD格式的目录，当前日期一年前365天到目前共365个目录，里面有10个文件.log后缀的</span>
</span></span><span style=display:flex><span>文件
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat for_dir.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>PDIR<span style=color:#f92672>=</span>/data/test
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..365<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    DIR<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>date -d <span style=color:#e6db74>&#34;-</span>$i<span style=color:#e6db74> day&#34;</span> +%F<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    mkdir -pv $PDIR/$DIR
</span></span><span style=display:flex><span>    cd $PDIR/$DIR
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> j in <span style=color:#f92672>{</span>1..10<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        touch $RANDOM.log
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#2.将上面的目录移动到YYYY-MM/DD/下</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>DIR<span style=color:#f92672>=</span>/data/test
</span></span><span style=display:flex><span>cd $DIR <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo 无法进入 $DIR;exit 1; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> subdir in * ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    YYYY_MM<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $subdir |cut -d<span style=color:#e6db74>&#34;-&#34;</span> -f1,2<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    DD<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $subdir |cut -d<span style=color:#e6db74>&#34;-&#34;</span> -f3<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[</span> -d $YYYY_MM/$DD <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> mkdir -p $YYYY_MM/$DD &amp;&gt; /dev/null
</span></span><span style=display:flex><span>    mv $subdir/* $YYYY_MM/$DD
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>rm -rf $DIR/*-*-*
</span></span></code></pre></div><p>面试题：扫描一个网段：10.0.0.0/24，判断此网段中主机在线状态，将在线的主机的IP打印出来</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/for_scan_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>NET<span style=color:#f92672>=</span>10.0.0
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ID in <span style=color:#f92672>{</span>1..254<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ping -c1 -W1 $NET.$ID &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo $NET.$ID is up| tee -a
</span></span><span style=display:flex><span>host_list.log <span style=color:#f92672>||</span> echo $NET.$ID is down
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>&amp;
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>wait
</span></span></code></pre></div><h4 id=格式2>格式2
<a class=header-anchor href=#%e6%a0%bc%e5%bc%8f2></a></h4><p>双小括号方法，即((…))格式，也可以用于算术运算，双小括号方法也可以使bash Shell实现C语言风格
的变量操作
I=10;((I++))
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/13627bc0-7d9f-4ed0-8765-49ca58460348 alt=image></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>for ((控制变量初始化;条件判断表达式;控制变量的修正表达式))
</span></span><span style=display:flex><span>do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p>说明：</p><ul><li>控制变量初始化：仅在运行到循环代码段时执行一次</li><li>控制变量的修正表达式：每轮循环结束会先进行控制变量修正运算，而后再做条件判断
范例:
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/f8ed696b-ee98-4993-b249-277e59b92cf3 alt=image>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/2b602d2e-fd18-416f-a18c-bb4a18a3cb8e alt=image>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/21dfee32-9b56-4bc6-a474-9a66450db27f alt=image>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/dd6534c6-5245-4b83-8247-e9c4f528afcc alt=image>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/087d9090-0398-47dc-ae35-854cfe1c4b6f alt=image></li></ul><h4 id=练习用-for-实现>练习：用 for 实现
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0%e7%94%a8-for-%e5%ae%9e%e7%8e%b0></a></h4><p>1、判断/var/目录下所有文件的类型<br>2、添加10个用户user1-user10，密码为8位随机字符<br>3、/etc/rc.d/rc3.d目录下分别有多个以K开头和以S开头的文件；分别读取每个文件，以K开头的输出为<br>文件加stop，以S开头的输出为文件名加start，如K34filename stop S66filename start
4、编写脚本，提示输入正整数n的值，计算1+2+…+n的总和<br>5、计算100以内所有能被3整除的整数之和<br>6、编写脚本，提示请输入网络地址，如192.168.0.0，判断输入的网段中主机在线状态<br>7、打印九九乘法表<br>8、在/testdir目录下创建10个html文件,文件名格式为数字N（从1到10）加随机8个字母，如：
1AbCdeFgH.html<br>9、打印等腰三角形<br>10、猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个。第二天早上又将剩下的桃子
吃掉一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时，只
剩下一个桃子了。求第一天共摘了多少？</p><h3 id=循环-while>循环 while
<a class=header-anchor href=#%e5%be%aa%e7%8e%af-while></a></h3><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>while COMMANDS; do COMMANDS; done
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>while CONDITION; do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p>说明：<br>CONDITION：循环控制条件；进入循环之前，先做一次判断；每一次循环之后会再次做判断；条件
为“true”，则执行一次循环；直到条件测试状态为“false”终止循环，因此：CONDTION一般应该有循环
控制变量；而此变量的值会在循环体不断地被修正<br>进入条件：CONDITION为 true<br>退出条件：CONDITION为 false<br><strong>无限循环</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>while true; do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>while : ; do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/e04a6454-3d14-4616-b645-3e87871cbda8 alt=image>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/335be404-4ff3-4b6a-b785-b040a047032c alt=image></p><h4 id=练习用while实现>练习：用while实现
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0%e7%94%a8while%e5%ae%9e%e7%8e%b0></a></h4><p>1、编写脚本，求100以内所有正奇数之和<br>2、编写脚本，提示请输入网络地址，如:192.168.0.0，判断输入的网段中主机在线状态，并统计在线和
离线主机各多少<br>3、编写脚本，打印九九乘法表<br>4、编写脚本，利用变量RANDOM生成10个随机数字，输出这个10数字，并显示其中的最大值和最小值<br>5、编写脚本，实现打印国际象棋棋盘<br>6、后续六个字符串：efbaf275cd、4be9c40b8b、44b2395c46、f8c8873ce0、b902c16c8b、
ad865d2f63是通过对随机数变量RANDOM随机执行命令： echo $RANDOM|md5sum|cut -c1-10
后的结果，请破解这些字符串对应的RANDOM值</p><h3 id=while-特殊用法-while-read>while 特殊用法 while read
<a class=header-anchor href=#while-%e7%89%b9%e6%ae%8a%e7%94%a8%e6%b3%95-while-read></a></h3><p>while 循环的特殊用法，遍历文件或文本的每一行<br>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>while read line; do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done &lt; /PATH/FROM/SOMEFILE
</span></span></code></pre></div><p>说明：依次读取/PATH/FROM/SOMEFILE文件中的每一行，且将行赋值给变量line<br>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#echo magedu | read X ; echo $X
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | while read X ; do echo $X;done
</span></span><span style=display:flex><span>magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | { read X ; echo $X; }
</span></span><span style=display:flex><span>magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | ( read X ; echo $X )
</span></span><span style=display:flex><span>magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#echo mage wang zhang | ( read X Y Z; echo $X $Y $Z )
</span></span><span style=display:flex><span>mage wang zhang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo mage wang zhang | while read X Y Z; do echo $X $Y $Z;done
</span></span><span style=display:flex><span>mage wang zhang
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat while_read_diskcheck.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>WARNING<span style=color:#f92672>=</span><span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>MAIL<span style=color:#f92672>=</span>root@wangxiaochun.com
</span></span><span style=display:flex><span>df |sed -nr <span style=color:#e6db74>&#34;/^\/dev\/sd/s#^([^ ]+) .* ([0-9]+)%.*#\1 \2#p&#34;</span>|<span style=color:#66d9ef>while</span> read DEVICE
</span></span><span style=display:flex><span>USE;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $USE -gt $WARNING <span style=color:#f92672>]</span> ;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        echo <span style=color:#e6db74>&#34;</span>$DEVICE<span style=color:#e6db74> will be full,use:</span>$USE<span style=color:#e6db74>&#34;</span> | mail -s <span style=color:#e6db74>&#34;DISK WARNING&#34;</span> $MAIL
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat while_read_check_dos.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>MAX<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>lastb | sed -rn <span style=color:#e6db74>&#39;/ssh:/s@.* ([0-9.]{1,3}{3}[0-9]{1,3}) .*@\1@p&#39;</span>|sort |uniq -c
</span></span><span style=display:flex><span>|<span style=color:#66d9ef>while</span> read count ip ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $count -gt $MAX <span style=color:#f92672>]</span>;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        iptables -A INPUT -s $ip -j REJECT
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例：查看/sbin/nologin的shell类型的用户名和UID</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>cat while_read_passwd.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> read line ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$line<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ /sbin/nologin$ <span style=color:#f92672>]]</span> ;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>                echo $line | cut -d: -f1,3
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> &lt; /etc/passwd
</span></span></code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><div class="post-nav-prev post-nav-item"><a href=/post/linux13/ rel=prev title="网络基础 ">网络基础
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"http://localhost:1313/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.js defer></script></body></html>