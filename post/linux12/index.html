<!doctype html><html lang=zh-CN data-theme=light><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="软件管理 "><meta itemprop=description content="1208034077#qq.com"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="http://localhost:1313/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux"><meta property="og:type" content="article"><meta property="og:title" content="软件管理 "><meta property="og:description" content="1208034077#qq.com"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="http://localhost:1313/post/linux12/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2024-12-19 04:06:00 +0800 CST"><meta property="article:modified_time" content="2024-12-19 04:06:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"linux12","permalink":"http://localhost:1313/post/linux12/","title":"软件管理 ","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>软件管理 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>80</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#软件相关概念>软件相关概念</a><ul><li><a href=#abi>ABI</a></li><li><a href=#api>API</a></li><li><a href=#开发语言>开发语言</a></li><li><a href=#语言程序的实现过程>语言程序的实现过程</a></li><li><a href=#静态链接>静态链接</a></li><li><a href=#动态链接>动态链接</a></li><li><a href=#模块库文件>模块（库）文件</a></li></ul></li><li><a href=#软件包介绍>软件包介绍</a><ul><li><a href=#软件包中的文件分类>软件包中的文件分类</a></li><li><a href=#程序包管理器>程序包管理器</a></li><li><a href=#包命名>包命名</a></li><li><a href=#包的依赖>包的依赖</a></li><li><a href=#程序包管理器相关文件>程序包管理器相关文件</a></li><li><a href=#获取程序包的途径>获取程序包的途径</a><ul><li><a href=#系统发版的光盘或官方网站>系统发版的光盘或官方网站</a></li><li><a href=#第三方组织提供>第三方组织提供</a></li><li><a href=#软件项目官方站点>软件项目官方站点</a></li><li><a href=#搜索引擎>搜索引擎</a></li><li><a href=#自己制作>自己制作</a></li></ul></li><li><a href=#rpm-包管理器--安装>rpm 包管理器 安装</a></li><li><a href=#升级和降级>升级和降级</a></li><li><a href=#包查询>包查询</a></li><li><a href=#包卸载>包卸载</a></li><li><a href=#包校验>包校验</a></li><li><a href=#数据库维护>数据库维护</a></li></ul></li><li><a href=#yum和dnf>yum和dnf</a><ul><li><a href=#yum客户端配置>yum客户端配置</a></li><li><a href=#yum命令>yum命令</a><ul><li><a href=#显示仓库列表>显示仓库列表</a></li><li><a href=#显示程序包>显示程序包</a></li></ul></li><li><a href=#安装程序包>安装程序包</a><ul><li><a href=#安装-epel-源包>安装 EPEL 源包</a></li><li><a href=#安装-scl-源包>安装 SCL 源包</a></li><li><a href=#升级最新内核>升级最新内核</a></li><li><a href=#只下载相关的依赖包而不安装>只下载相关的依赖包,而不安装</a></li></ul></li><li><a href=#卸载程序包>卸载程序包</a></li><li><a href=#升级和降级-1>升级和降级</a></li><li><a href=#查询>查询</a></li><li><a href=#仓库缓存>仓库缓存</a></li><li><a href=#查看yum事务历史>查看yum事务历史</a></li><li><a href=#安装及升级本地程序包>安装及升级本地程序包</a></li><li><a href=#查看包的安全警报>查看包的安全警报</a></li><li><a href=#包组管理的相关命令>包组管理的相关命令</a></li><li><a href=#实现私用-yum-仓库>实现私用 yum 仓库</a></li><li><a href=#dnf-介绍>DNF 介绍</a></li><li><a href=#yum-troubleshooting>yum Troubleshooting</a></li></ul></li><li><a href=#源码编译>源码编译</a></li><li><a href=#编译源码的项目工具>编译源码的项目工具</a></li><li><a href=#c-语言源代码编译安装过程>C 语言源代码编译安装过程</a><ul><li><a href=#编译安装准备>编译安装准备</a></li><li><a href=#编译安装>编译安装</a></li><li><a href=#安装后的配置>安装后的配置</a></li><li><a href=#编译安装实战案例>编译安装实战案例</a><ul><li><a href=#官网下载并编译安装新版-tree>官网下载并编译安装新版 tree</a></li><li><a href=#编译安装-httpd-24>编译安装 httpd 2.4</a></li><li><a href=#heading></a></li></ul></li></ul></li><li><a href=#ubuntu-软件管理>Ubuntu 软件管理</a><ul><li><a href=#dpkg-包管理器>dpkg 包管理器</a></li><li><a href=#apt>apt</a></li><li><a href=#软件管理案例>软件管理案例</a><ul><li><a href=#案例1-查看文件来自于哪个包>案例1: 查看文件来自于哪个包</a></li><li><a href=#案例2-查看包相关信息>案例2: 查看包相关信息</a></li><li><a href=#案例3-查看仓库中的指定软件的所有版本>案例3: 查看仓库中的指定软件的所有版本</a></li><li><a href=#案例4-查看文件的依赖>案例4: 查看文件的依赖</a></li><li><a href=#案例5-安装桌面>案例5: 安装桌面</a></li><li><a href=#ubuntu-建议安装的常用包>ubuntu 建议安装的常用包</a></li><li><a href=#练习>练习</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>1208034077#qq.com</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>80</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>55</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=160131></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=365></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-19T04:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=http://localhost:1313/post/linux12/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="1208034077#qq.com"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="软件管理 "><meta itemprop=description content="软件相关概念 ABI ABI : Application Binary Interface Windows与Linux不兼容 ELF(Executable and Linkable Format) Linux PE（Portable Executable）Windows API API即App"></span><header class=post-header><h1 class=post-title itemprop="name headline">软件管理</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-12-19 04:06:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-12-19 04:06:00 +0800 CST">2024-12-19
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/linux itemprop=url rel=index><span itemprop=name>linux</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><h2 id=软件相关概念>软件相关概念
<a class=header-anchor href=#%e8%bd%af%e4%bb%b6%e7%9b%b8%e5%85%b3%e6%a6%82%e5%bf%b5></a></h2><h3 id=abi>ABI
<a class=header-anchor href=#abi></a></h3><p>ABI : Application Binary Interface<br>Windows与Linux不兼容<br>ELF(Executable and Linkable Format) Linux
PE（Portable Executable）Windows</p><h3 id=api>API
<a class=header-anchor href=#api></a></h3><p>API即Application Programming Interface，API可以在各种不同的操作系统上实现给应用程序提供完全
相同的接口，而它们本身在这些系统上的实现却可能迥异，主流的操作系统有两种，一种是Windows系
统，另一种是Linux系统。由于操作系统的不同，API又分为Windows API和Linux API。在Windows平
台开发出来的软件在Linux上无法运行，在Linux上开发的软件在Windows上又无法运行，这就导致了软
件移植困难，POSIX 标准的出现就是为了解决这个问题<br>POSIX：Portable Operating System Interface 可移植操作系统接口，定义了操作系统应该为应用程序
提供的接口标准，是IEEE为要在各种UNIX操作系统上运行的软件而定义的一系列API标准的总称。
Linux和windows都要实现基本的posix标准，程序就在源代码级别可移植了</p><h3 id=开发语言>开发语言
<a class=header-anchor href=#%e5%bc%80%e5%8f%91%e8%af%ad%e8%a8%80></a></h3><p>系统级开发
汇编语言
C
C++
应用级开发
java
Python
go
php
perl
delphi
basic
ruby
bash</p><h3 id=语言程序的实现过程>语言程序的实现过程
<a class=header-anchor href=#%e8%af%ad%e8%a8%80%e7%a8%8b%e5%ba%8f%e7%9a%84%e5%ae%9e%e7%8e%b0%e8%bf%87%e7%a8%8b></a></h3><p>C 程序源代码 &ndash;> 预处理 &ndash;> 编译 &ndash;> 汇编 &ndash;> 链接<br>C语言的程序编译主要经过四个过程：<br><img src=/imgs/img-lazy-loading.gif data-src=/images/url/linux/linux09/10.jpg alt></p><ul><li>预处理（Pre-Processing）
1）将所有的#define删除，并且展开所有的宏定义<br>2）处理所有的条件预编译指令，比如#if #ifdef #elif #else #endif等<br>3）处理#include 预编译指令，将被包含的文件插入到该预编译指令的位置。<br>4）删除所有注释 &ldquo;//&ldquo;和&rdquo;/* */&rdquo;.<br>5）添加行号和文件标识，以便编译时产生调试用的行号及编译错误警告行号。<br>6）保留所有的#pragma编译器指令，因为编译器需要使用它们</li><li>编译 （Compiling）
编译过程就是把预处理完的文件进行一系列的词法分析，语法分析，语义分析及优化后，最后生成
相应的汇编代码</li><li>汇编 （Assembling）
汇编器是将汇编代码转变成机器可以执行的命令，每一个汇编语句几乎都对应一条机器指令。汇编
相对于编译过程比较简单，根据汇编指令和机器指令的对照表一一翻译即可</li><li>链接 （Linking）
通过调用链接器ld来链接程序运行需要的一大堆目标文件，以及所依赖的其它库文件，最后生成可
执行文件<br>范例：gcc 编译过程</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#分步骤编译运行
</span></span><span style=display:flex><span>gcc -E hello.c -o hello.i 对hello.c文件进行预处理，生成了hello.i 文件
</span></span><span style=display:flex><span>gcc -S hello.i -o hello.s 对预处理文件进行编译，生成了汇编文件
</span></span><span style=display:flex><span>gcc -c hello.s -o hello.o 对汇编文件进行编译，生成了目标文件
</span></span><span style=display:flex><span>gcc hello.o -o hello       对目标文件进行链接，生成可执行文件
</span></span><span style=display:flex><span>#一步实现编译过程
</span></span><span style=display:flex><span>gcc hello.c -o hello       直接编译链接成可执行目标文件
</span></span></code></pre></div><h3 id=静态链接>静态链接
<a class=header-anchor href=#%e9%9d%99%e6%80%81%e9%93%be%e6%8e%a5></a></h3><ul><li>把程序对应的依赖库复制一份到包</li><li>生成模块文件libxxx.a</li><li>嵌入程序包</li><li>升级难，需重新编译</li><li>占用较多空间，迁移容易</li></ul><h3 id=动态链接>动态链接
<a class=header-anchor href=#%e5%8a%a8%e6%80%81%e9%93%be%e6%8e%a5></a></h3><ul><li>只把依赖加做一个动态链接</li><li>生成模块文件libxxx.so</li><li>连接指向</li><li>占用较少空间，升级方便</li></ul><h3 id=模块库文件>模块（库）文件
<a class=header-anchor href=#%e6%a8%a1%e5%9d%97%e5%ba%93%e6%96%87%e4%bb%b6></a></h3><p>查看二进制程序所依赖的库文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>ldd /PATH/TO/BINARY_FILE
</span></span></code></pre></div><p>管理及查看本机装载的库文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#加载配置文件中指定的库文件
</span></span><span style=display:flex><span>ldconfig
</span></span><span style=display:flex><span>#显示本机已经缓存的所有可用库文件名及文件路径映射关系
</span></span><span style=display:flex><span>/sbin/ldconfig –p
</span></span></code></pre></div><p>配置文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/ld.so.conf
</span></span><span style=display:flex><span>/etc/ld.so.conf.d/*.conf
</span></span></code></pre></div><p>缓存文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/ld.so.cache
</span></span></code></pre></div><p>范例：库文件破坏后，将导致依赖的程序无法正常运行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ldd /bin/ls</span>
</span></span><span style=display:flex><span>linux<span style=color:#f92672>-</span>vdso<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>1</span> (<span style=color:#ae81ff>0x00007ffc509fd000</span>)
</span></span><span style=display:flex><span>libselinux<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libselinux<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>1</span> (<span style=color:#ae81ff>0x00007fc6ef24a000</span>)
</span></span><span style=display:flex><span>libcap<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libcap<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> (<span style=color:#ae81ff>0x00007fc6ef044000</span>)
</span></span><span style=display:flex><span>libc<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libc<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span> (<span style=color:#ae81ff>0x00007fc6eec81000</span>)
</span></span><span style=display:flex><span>libpcre2<span style=color:#f92672>-</span><span style=color:#ae81ff>8.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>0</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libpcre2<span style=color:#f92672>-</span><span style=color:#ae81ff>8.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>0</span> (<span style=color:#ae81ff>0x00007fc6ee9fd000</span>)
</span></span><span style=display:flex><span>libdl<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libdl<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> (<span style=color:#ae81ff>0x00007fc6ee7f9000</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>ld<span style=color:#f92672>-</span>linux<span style=color:#f92672>-</span>x86<span style=color:#f92672>-</span><span style=color:#ae81ff>64.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> (<span style=color:#ae81ff>0x00007fc6ef698000</span>)
</span></span><span style=display:flex><span>libpthread<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>0</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libpthread<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>0</span> (<span style=color:#ae81ff>0x00007fc6ee5d9000</span>)
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ldd /bin/cat</span>
</span></span><span style=display:flex><span>linux<span style=color:#f92672>-</span>vdso<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>1</span> (<span style=color:#ae81ff>0x00007ffe335dd000</span>)
</span></span><span style=display:flex><span>libc<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span> <span style=color:#f92672>=&gt;</span> <span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>libc<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span> (<span style=color:#ae81ff>0x00007fa34749e000</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>lib64<span style=color:#f92672>/</span>ld<span style=color:#f92672>-</span>linux<span style=color:#f92672>-</span>x86<span style=color:#f92672>-</span><span style=color:#ae81ff>64.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>2</span> (<span style=color:#ae81ff>0x00007fa347a6b000</span>)
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#mv /lib64/libc.so.6 /tmp</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ls</span>
</span></span><span style=display:flex><span>ls: error <span style=color:#66d9ef>while</span> loading shared libraries: libc<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span>: cannot open shared object
</span></span><span style=display:flex><span>file: No such file <span style=color:#f92672>or</span> directory
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#cat</span>
</span></span><span style=display:flex><span>cat: error <span style=color:#66d9ef>while</span> loading shared libraries: libc<span style=color:#f92672>.</span>so<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span>: cannot open shared object
</span></span><span style=display:flex><span>file: No such file <span style=color:#f92672>or</span> directory
</span></span></code></pre></div><h2 id=软件包介绍>软件包介绍
<a class=header-anchor href=#%e8%bd%af%e4%bb%b6%e5%8c%85%e4%bb%8b%e7%bb%8d></a></h2><p>开源软件最初只提供了打包的源码文件，用户必须自已编译每个想在GNU/Linux上运行的软件。用户急
需系统能提供一种更加便利的方法来管理这些软件，当Debian诞生时，这样一个管理工具dpkg也就应
运而生，可用来管理deb后缀的"包"文件。从而著名的"package"概念第一次出现在GNU/Linux系统中，
稍后Red Hat才开发自己的rpm包管理系统<br>范例: 使用光盘</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#神奇的光盘挂载目录
</span></span><span style=display:flex><span>#CentOS
</span></span><span style=display:flex><span>[root@centos8 ~]#rpm -q autofs || yum -y install autofs
</span></span><span style=display:flex><span>[root@centos8 ~]#systemctl enable --now autofs
</span></span><span style=display:flex><span>#Ubuntu
</span></span><span style=display:flex><span>root@ubuntu2004:~# apt install autofs -y
</span></span><span style=display:flex><span>root@ubuntu2004:~# vim /etc/auto.master
</span></span><span style=display:flex><span>/misc /etc/auto.misc
</span></span><span style=display:flex><span>root@ubuntu2004:~# systemctl restart autofs
</span></span></code></pre></div><h3 id=软件包中的文件分类>软件包中的文件分类
<a class=header-anchor href=#%e8%bd%af%e4%bb%b6%e5%8c%85%e4%b8%ad%e7%9a%84%e6%96%87%e4%bb%b6%e5%88%86%e7%b1%bb></a></h3><ul><li>二进制文件</li><li>库文件</li><li>配置文件</li><li>帮助文件
范例：利用 cpio工具查看包文件列表</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm2cpio 包文件|cpio –itv 预览包内文件
</span></span><span style=display:flex><span>rpm2cpio 包文件|cpio –id &#34;*.conf&#34; 释放包内文件
</span></span></code></pre></div><h3 id=程序包管理器>程序包管理器
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8f%e5%8c%85%e7%ae%a1%e7%90%86%e5%99%a8></a></h3><p>软件包管理器功能：<br>将编译好的应用程序的各组成文件打包一个或几个程序包文件，利用包管理器可以方便快捷地实现程序
包的安装、卸载、查询、升级和校验等管理操作<br>主流的程序包管理器</p><ul><li>redhat：rpm文件, rpm 包管理器，rpm：Redhat Package Manager，RPM Package Manager</li><li>debian：deb文件, dpkg 包管理器</li></ul><h3 id=包命名>包命名
<a class=header-anchor href=#%e5%8c%85%e5%91%bd%e5%90%8d></a></h3><p>源代码打包文件命名：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>name-VERSION.tar.gz|bz2|xz
</span></span><span style=display:flex><span>VERSION: major.minor.release
</span></span></code></pre></div><p>范例:Linux 最新内核的C源码的行数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#tar xvf linux-5.7.2.tar.xz
</span></span><span style=display:flex><span>[root@centos8 ~]#cd linux-5.7.2/
</span></span><span style=display:flex><span>[root@centos8 linux-5.7.2]#for file in `find -name &#34;*.c&#34;`;do line=`cat $file|wc
</span></span><span style=display:flex><span>-l`;let sum+=line;done;echo $sum
</span></span><span style=display:flex><span>19517994
</span></span><span style=display:flex><span>[root@centos8 linux-5.7.2]#cat `find -name &#34;*.c&#34;` |wc -l
</span></span><span style=display:flex><span>19517994
</span></span><span style=display:flex><span>[root@centos8 linux-5.7.2]#find -name &#34;*.c&#34; | xargs cat |wc -l
</span></span><span style=display:flex><span>19517994
</span></span></code></pre></div><p>rpm包命名方式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>name-VERSION-release.arch.rpm
</span></span><span style=display:flex><span>VERSION: major.minor.release
</span></span><span style=display:flex><span>release：release.OS
</span></span></code></pre></div><p>常见的arch：</p><ul><li>x86: i386, i486, i586, i686</li><li>x86_64: x64, x86_64, amd64</li><li>powerpc: ppc</li><li>跟平台无关：noarch
范例：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bash-3.2-32.el5_9.1.i386.rpm
</span></span><span style=display:flex><span>bash-4.2.46-19.el7.x86_64.rpm
</span></span><span style=display:flex><span>bash-4.4.19-7.el8.x86_64.rpm
</span></span><span style=display:flex><span>bash-4.4.19-7.el8.aarch64.rpm
</span></span><span style=display:flex><span>bash-4.4.19-7.el8.ppc64le.rpm
</span></span><span style=display:flex><span>bc_1.07.1-2_amd64.deb
</span></span><span style=display:flex><span>bc_1.07.1-2_s390x.deb
</span></span></code></pre></div><p>范例：统计rpm的架构类型及相应的包数量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 Packages]#pwd
</span></span><span style=display:flex><span>/misc/cd/BaseOS/Packages
</span></span><span style=display:flex><span>[root@centos8 Packages]#ls *.rpm | grep -Eo &#39;[^.]+\.rpm$&#39;| grep -Eo
</span></span><span style=display:flex><span>&#39;^[^.]+&#39;|sort |uniq -c
</span></span><span style=display:flex><span>389 i686
</span></span><span style=display:flex><span>211 noarch
</span></span><span style=display:flex><span>1061 x86_64
</span></span><span style=display:flex><span>[root@centos8 Packages]#ls *.rpm |rev|cut -d. -f2|rev |sort |uniq -c
</span></span><span style=display:flex><span>389 i686
</span></span><span style=display:flex><span>211 noarch
</span></span><span style=display:flex><span>1061 x86_64
</span></span><span style=display:flex><span>[root@centos8 Packages]#ls *.rpm | grep -Eo &#39;[^.]+\.rpm$&#39;|cut -d. -f1|sort |uniq
</span></span><span style=display:flex><span>-c
</span></span><span style=display:flex><span>389 i686
</span></span><span style=display:flex><span>211 noarch
</span></span><span style=display:flex><span>1061 x86_64
</span></span></code></pre></div><h3 id=包的依赖>包的依赖
<a class=header-anchor href=#%e5%8c%85%e7%9a%84%e4%be%9d%e8%b5%96></a></h3><p>软件包之间可能存在依赖关系，甚至循环依赖，即：A包依赖B包，B包依赖C包，C包依赖A包<br>安装软件包时，会因为缺少依赖的包，而导致安装包失败。<br>解决依赖包管理工具：</p><ul><li>yum：rpm包管理器的前端工具</li><li>dnf：Fedora 18+ rpm包管理器前端管理工具，CentOS 8 版代替 yum</li><li>apt：deb包管理器前端工具</li><li>zypper：suse上的rpm前端管理工具</li></ul><h3 id=程序包管理器相关文件>程序包管理器相关文件
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8f%e5%8c%85%e7%ae%a1%e7%90%86%e5%99%a8%e7%9b%b8%e5%85%b3%e6%96%87%e4%bb%b6></a></h3><ol><li>包文件组成 (每个包独有)</li></ol><ul><li>包内的文件</li><li>元数据，如：包的名称，版本，依赖性，描述等</li><li>可能会有包安装或卸载时运行的脚本</li></ul><ol start=2><li>数据库(公共)：/var/lib/rpm</li></ol><ul><li>程序包名称及版本</li><li>依赖关系</li><li>功能说明</li><li>包安装后生成的各文件路径及校验码信息</li></ul><h3 id=获取程序包的途径>获取程序包的途径
<a class=header-anchor href=#%e8%8e%b7%e5%8f%96%e7%a8%8b%e5%ba%8f%e5%8c%85%e7%9a%84%e9%80%94%e5%be%84></a></h3><p>软件包需要事先将源码进行编译后打包形成，获取包的途径如下：</p><h4 id=系统发版的光盘或官方网站>系统发版的光盘或官方网站
<a class=header-anchor href=#%e7%b3%bb%e7%bb%9f%e5%8f%91%e7%89%88%e7%9a%84%e5%85%89%e7%9b%98%e6%88%96%e5%ae%98%e6%96%b9%e7%bd%91%e7%ab%99></a></h4><p>CentOS 镜像：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>https:<span style=color:#f92672>//</span>www<span style=color:#f92672>.</span>centos<span style=color:#f92672>.</span>org<span style=color:#f92672>/</span>download<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>http:<span style=color:#f92672>//</span>mirrors<span style=color:#f92672>.</span>aliyun<span style=color:#f92672>.</span>com
</span></span><span style=display:flex><span>https:<span style=color:#f92672>//</span>mirrors<span style=color:#f92672>.</span>huaweicloud<span style=color:#f92672>.</span>com<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>https:<span style=color:#f92672>//</span>mirror<span style=color:#f92672>.</span>tuna<span style=color:#f92672>.</span>tsinghua<span style=color:#f92672>.</span>edu<span style=color:#f92672>.</span>cn<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>http:<span style=color:#f92672>//</span>mirrors<span style=color:#f92672>.</span>sohu<span style=color:#f92672>.</span>com
</span></span><span style=display:flex><span>http:<span style=color:#f92672>//</span>mirrors<span style=color:#f92672>.</span><span style=color:#ae81ff>163.</span>com
</span></span></code></pre></div><p>Ubuntu 镜像：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>http://cdimage.ubuntu.com/releases/
</span></span><span style=display:flex><span>http://releases.ubuntu.com
</span></span></code></pre></div><h4 id=第三方组织提供>第三方组织提供
<a class=header-anchor href=#%e7%ac%ac%e4%b8%89%e6%96%b9%e7%bb%84%e7%bb%87%e6%8f%90%e4%be%9b></a></h4><ul><li>Fedora-EPEL：Extra Packages for Enterprise Linux<br><a href=https://fedoraproject.org/wiki/EPEL title=https://fedoraproject.org/wiki/EPEL rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://fedoraproject.org/wiki/EPEL
<i class="fa fa-external-link-alt"></i></a><br><a href=https://mirrors.aliyun.com/epel/ title=https://mirrors.aliyun.com/epel/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://mirrors.aliyun.com/epel/
<i class="fa fa-external-link-alt"></i></a><br><a href=https://mirrors.cloud.tencent.com/epel/ title=https://mirrors.cloud.tencent.com/epel/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://mirrors.cloud.tencent.com/epel/
<i class="fa fa-external-link-alt"></i></a></li><li>SCL： Software Collections，提供较高版本的第三方软件包<br><a href=https://wiki.centos.org/SpecialInterestGroup/SCLo title=https://wiki.centos.org/SpecialInterestGroup/SCLo rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://wiki.centos.org/SpecialInterestGroup/SCLo
<i class="fa fa-external-link-alt"></i></a><br>企业级 Linux 发行版本都被设计成持久可用的。它们的设计亦包括在发行版本使用期内维持 ABI／
API 兼容性，因此只要某个发行版本仍获支持，你在它发行首日所写的程序便可一直运作。现时
CentOS 的寿命是 10 年。然而，这意味著在发行版本使用期的尾段，它所包含的程序语言或数据库版
本（例如 php、python、perl 或 mysql、postgresql）对比新近的Linux 发行版本所提供的就
显得老旧。<br>不过有很多企业亦希望能以较新的程序创建软件。她们想同时拥有稳定性及较新的软件。她们要求这些
软件兼容其它系统软件，好让她们能选择遁序改进或较新的软件作开发之用。<br>软件集Software Collections（SCL）源出现了，以帮助解决 RHEL/CentOS 下的这种问题。SCL
的创建就是为了给 RHEL/CentOS 用户提供一种以方便、安全地安装和使用应用程序和运行时环境的多
个（而且可能是更新的）版本的方式，同时避免把系统搞乱。与之相对的是第三方源，它们可能会在已
安装的包之间引起冲突。比如：SCL 容许你执行 CentOS 提供的缺省 python（这样 yum 及其它
CentOS 工具便可用），又容许你同时安装较新版的 python 作创建及执行程序之用。<br>SoftwareCollections.org 是为 Red Hat Enterprise Linux，Fedora，CentOS 和
Scientific Linux 创建软件集合（SCL）的项目站点</li><li>Community Enterprise Linux Repository：http://www.elrepo.org，支持最新的内核和硬件相关
包</li></ul><h4 id=软件项目官方站点>软件项目官方站点
<a class=header-anchor href=#%e8%bd%af%e4%bb%b6%e9%a1%b9%e7%9b%ae%e5%ae%98%e6%96%b9%e7%ab%99%e7%82%b9></a></h4><p><a href=http://yum.mariadb.org/10.4/centos8-amd64/rpms/ title=http://yum.mariadb.org/10.4/centos8-amd64/rpms/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://yum.mariadb.org/10.4/centos8-amd64/rpms/
<i class="fa fa-external-link-alt"></i></a><br><a href=http://repo.mysql.com/yum/mysql-8.0-community/el/8/x86_64/ title=http://repo.mysql.com/yum/mysql-8.0-community/el/8/x86_64/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://repo.mysql.com/yum/mysql-8.0-community/el/8/x86_64/
<i class="fa fa-external-link-alt"></i></a></p><h4 id=搜索引擎>搜索引擎
<a class=header-anchor href=#%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e></a></h4><p><a href=http://pkgs.org title=http://pkgs.org rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://pkgs.org
<i class="fa fa-external-link-alt"></i></a><br><a href=http://rpmfind.net title=http://rpmfind.net rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://rpmfind.net
<i class="fa fa-external-link-alt"></i></a><br><a href=http://rpm.pbone.net title=http://rpm.pbone.net rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://rpm.pbone.net
<i class="fa fa-external-link-alt"></i></a><br><a href=https://sourceforge.net/ title=https://sourceforge.net/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://sourceforge.net/
<i class="fa fa-external-link-alt"></i></a><br>注意：第三方包建议要检查其合法性，来源合法性,程序包的完整性</p><h4 id=自己制作>自己制作
<a class=header-anchor href=#%e8%87%aa%e5%b7%b1%e5%88%b6%e4%bd%9c></a></h4><p>将源码文件，利用工具，如：rpmbuild，fpm 等工具制作成rpm包文件</p><h3 id=rpm-包管理器--安装>rpm 包管理器 安装
<a class=header-anchor href=#rpm-%e5%8c%85%e7%ae%a1%e7%90%86%e5%99%a8--%e5%ae%89%e8%a3%85></a></h3><p>CentOS 系统上使用rpm命令管理程序包<br>功能：<br>安装、卸载、升级、查询、校验、数据库维护</p><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm {-i|--install} [install-options] PACKAGE_FILE…
</span></span></code></pre></div><p>选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-v: verbose
</span></span><span style=display:flex><span>-vv:
</span></span><span style=display:flex><span>-h: 以#显示程序包管理执行进度
</span></span></code></pre></div><p>常用组合：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm -ivh PACKAGE_FILE ...
</span></span></code></pre></div><p>rpm包安装[install-options]<br>不能解决依赖关系问题，基本不用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>--test: 测试安装，但不真正执行安装，即dry run模式
</span></span><span style=display:flex><span>--nodeps：忽略依赖关系
</span></span><span style=display:flex><span>--replacepkgs | replacefiles
</span></span><span style=display:flex><span>--nosignature: 不检查来源合法性
</span></span><span style=display:flex><span>--nodigest：不检查包完整性
</span></span><span style=display:flex><span>--noscripts：不执行程序包脚本
</span></span><span style=display:flex><span>       %pre: 安装前脚本 --nopre
</span></span><span style=display:flex><span>      %post: 安装后脚本 --nopost
</span></span><span style=display:flex><span>     %preun: 卸载前脚本 --nopreun
</span></span><span style=display:flex><span>    %postun: 卸载后脚本 --nopostun
</span></span></code></pre></div><h3 id=升级和降级>升级和降级
<a class=header-anchor href=#%e5%8d%87%e7%ba%a7%e5%92%8c%e9%99%8d%e7%ba%a7></a></h3><p>rpm包升级</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm {-U|--upgrade} [install-options] PACKAGE_FILE...
</span></span><span style=display:flex><span>rpm {-F|--freshen} [install-options] PACKAGE_FILE...
</span></span></code></pre></div><p>对应选项:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>upgrade：安装有旧版程序包，则&#34;升级&#34;，如果不存在旧版程序包，则&#34;安装&#34;
</span></span><span style=display:flex><span>freshen：安装有旧版程序包，则&#34;升级&#34;， 如果不存在旧版程序包，则不执行升级操作
</span></span><span style=display:flex><span>--oldpackage：降级
</span></span><span style=display:flex><span>--force: 强制安装
</span></span></code></pre></div><p>常用组合</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm -Uvh PACKAGE_FILE ...
</span></span><span style=display:flex><span>rpm -Fvh PACKAGE_FILE ...
</span></span></code></pre></div><p>升级注意项：<br>(1) 不要对内核做升级操作；Linux支持多内核版本并存，因此直接安装新版本内核<br>(2) 如果原程序包的配置文件安装后曾被修改，升级时，新版本提供的同一个配置文件不会直接覆盖老<br>版本的配置文件，而把新版本文件重命名(FILENAME.rpmnew)后保留</p><h3 id=包查询>包查询
<a class=header-anchor href=#%e5%8c%85%e6%9f%a5%e8%af%a2></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm {-q|--query} [select-options] [query-options]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[select-options]
</span></span><span style=display:flex><span>-a：所有包  （查询）
</span></span><span style=display:flex><span>-f：查看指定的文件由哪个程序包安装生成（qf）
</span></span><span style=display:flex><span>-p rpmfile：针对尚未安装的程序包文件做查询操作
</span></span><span style=display:flex><span>[query-options]
</span></span><span style=display:flex><span>--changelog：查询rpm包的changelog
</span></span><span style=display:flex><span>-c：查询程序的配置文件
</span></span><span style=display:flex><span>-d：查询程序的文档
</span></span><span style=display:flex><span>-i：information  查看信息
</span></span><span style=display:flex><span>-l：查看指定的程序包安装后生成的所有文件
</span></span><span style=display:flex><span>--scripts：程序包自带的脚本  postinstall 安装后脚本postuninstall 卸载后脚本
</span></span><span style=display:flex><span>--last 最后安装的包
</span></span><span style=display:flex><span>--changelog 安装包的变更历史
</span></span><span style=display:flex><span>#和CAPABILITY相关
</span></span><span style=display:flex><span>--whatprovides CAPABILITY：查询指定的CAPABILITY由哪个包所提供
</span></span><span style=display:flex><span>--whatrequires CAPABILITY：查询指定的CAPABILITY被哪个包所依赖
</span></span><span style=display:flex><span>--provides：列出指定程序包所提供的CAPABILITY
</span></span><span style=display:flex><span>-R,--requires 查询指定的程序包所依赖的CAPABILITY
</span></span></code></pre></div><p>常用查询用法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-qa         查询所有已安装的软件包。
</span></span><span style=display:flex><span>-q PACKAGE 查询软件包数据库以获取有关软件包的信息
</span></span><span style=display:flex><span>-qi PACKAGE 查询并显示关于已安装软件包的详细信息
</span></span><span style=display:flex><span>-qc PACKAGE  查询（query）已安装的 RPM 软件包中包含的配置文件（configuration files）
</span></span><span style=display:flex><span>-ql PACKAGE   查询某个软件包安装了哪些文件。
</span></span><span style=display:flex><span>-qd PACKAGE   查询（query）已安装的 RPM 软件包中包含的文档文件（documentation files）
</span></span><span style=display:flex><span>-q --scripts PACKAGE
</span></span><span style=display:flex><span>-qf FILE      查询某个文件属于哪个软件包
</span></span><span style=display:flex><span>-qpi PACKAGE_FILE  查询（query）RPM 软件包（package）的详细信息（information），而不需要安装该软件包。这个命令可以帮助你查看一个 RPM 文件的内容，包括它的名称、版本、发行版、架构、描述、安装前的脚本、安装后的脚本、文件列表等信息。
</span></span><span style=display:flex><span>-qpl PACKAGE_FILE, ...  查询（query）RPM 软件包（package）中的文件列表（list），而不需要安装该软件包。这个命令可以帮助你查看一个 RPM 文件中包含的所有文件和目录，以及它们将被安装到系统上的位置。
</span></span></code></pre></div><p>范例: 查看最近安装的包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>rocky <span style=color:#f92672>~</span>]<span style=color:#75715e># rpm -qa --last|head</span>
</span></span><span style=display:flex><span>tar<span style=color:#f92672>-</span><span style=color:#ae81ff>1.34</span><span style=color:#f92672>-</span><span style=color:#ae81ff>7.</span>el9<span style=color:#f92672>.</span>x86_64                         Sun Dec <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>59</span>:<span style=color:#ae81ff>20</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>libcbor<span style=color:#f92672>-</span><span style=color:#ae81ff>0.7</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>6.</span>el8<span style=color:#f92672>.</span>x86_64                    Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>42</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>inih<span style=color:#f92672>-</span><span style=color:#ae81ff>58</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1.</span>el8<span style=color:#f92672>.</span>x86_64                          Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>42</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>ima<span style=color:#f92672>-</span>evm<span style=color:#f92672>-</span>utils<span style=color:#f92672>-</span><span style=color:#ae81ff>1.5</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2.</span>el9<span style=color:#f92672>.</span><span style=color:#ae81ff>0.1</span><span style=color:#f92672>.</span>x86_64            Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>42</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>pam<span style=color:#f92672>-</span><span style=color:#ae81ff>1.5</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1</span><span style=color:#f92672>-</span><span style=color:#ae81ff>22.</span>el9_5<span style=color:#f92672>.</span>x86_64                     Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>41</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>kernel<span style=color:#f92672>-</span>tools<span style=color:#f92672>-</span><span style=color:#ae81ff>5.14</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>503.15</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1.</span>el9_5<span style=color:#f92672>.</span>x86_64     Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>39</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>kernel<span style=color:#f92672>-</span><span style=color:#ae81ff>5.14</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>503.15</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1.</span>el9_5<span style=color:#f92672>.</span>x86_64           Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>39</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>epel<span style=color:#f92672>-</span>release<span style=color:#f92672>-</span><span style=color:#ae81ff>9</span><span style=color:#f92672>-</span><span style=color:#ae81ff>7.</span>el9<span style=color:#f92672>.</span>noarch                   Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>39</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>kernel<span style=color:#f92672>-</span>tools<span style=color:#f92672>-</span>libs<span style=color:#f92672>-</span><span style=color:#ae81ff>5.14</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>503.15</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1.</span>el9_5<span style=color:#f92672>.</span>x86_64 Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>38</span> <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>kernel<span style=color:#f92672>-</span>modules<span style=color:#f92672>-</span><span style=color:#ae81ff>5.14</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>503.15</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1.</span>el9_5<span style=color:#f92672>.</span>x86_64   Sat Dec <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>22</span> <span style=color:#ae81ff>2024</span>
</span></span></code></pre></div><h3 id=包卸载>包卸载
<a class=header-anchor href=#%e5%8c%85%e5%8d%b8%e8%bd%bd></a></h3><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm {-e|--erase} [--allmatches] [--nodeps] [--noscripts] [--notriggers] [--test]
</span></span><span style=display:flex><span>PACKAGE_NAME ...
</span></span></code></pre></div><p>注意：当包卸载时，对应的配置文件不会删除， 以FILENAME.rpmsave形式保留<br>范例：强行删除rpm包，并恢复</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos7 ~]#rpm -e rpm --nodeps
</span></span><span style=display:flex><span>#重启进入rescue模式
</span></span><span style=display:flex><span>#mkdir /mnt/cdrom
</span></span><span style=display:flex><span>#mount /dev/sr0 /mnt/cdrom
</span></span><span style=display:flex><span>#rpm -ivh /mnt/cdrom/Packages/rpm-4.11.3-40.el7.x86_64.rpm --root=/mnt/sysimage
</span></span><span style=display:flex><span>#reboot
</span></span></code></pre></div><h3 id=包校验>包校验
<a class=header-anchor href=#%e5%8c%85%e6%a0%a1%e9%aa%8c></a></h3><p>在安装包时，系统也会检查包的来源是否是合法的<br>检查包的完整性和签名</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm -K|--checksig rpmfile
</span></span></code></pre></div><p>在检查包的来源和完整性前，必须导入所需要公钥<br>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
</span></span><span style=display:flex><span>rpm -qa &#34;gpg-pubkey*&#34;
</span></span></code></pre></div><p>范例：CentOS 8</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#rpm -K /misc/cd/AppStream/Packages/httpd-2.4.37-
</span></span><span style=display:flex><span>16.module_el8.1.0+256+ae790463.x86_64.rpm
</span></span><span style=display:flex><span>/misc/cd/AppStream/Packages/httpd-2.4.37-
</span></span><span style=display:flex><span>16.module_el8.1.0+256+ae790463.x86_64.rpm: digests SIGNATURES NOT OK
</span></span><span style=display:flex><span>[root@centos8 ~]#cat /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
</span></span><span style=display:flex><span>-----BEGIN PGP PUBLIC KEY BLOCK-----
</span></span><span style=display:flex><span>xxxx
</span></span><span style=display:flex><span>-----END PGP PUBLIC KEY BLOCK-----
</span></span><span style=display:flex><span>[root@centos8 ~]#rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
</span></span><span style=display:flex><span>[root@centos8 rpm-gpg]#rpm -K /misc/cd/AppStream/Packages/httpd-2.4.37-
</span></span><span style=display:flex><span>16.module_el8.1.0+256+ae790463.x86_64.rpm
</span></span><span style=display:flex><span>/misc/cd/AppStream/Packages/httpd-2.4.37-
</span></span><span style=display:flex><span>16.module_el8.1.0+256+ae790463.x86_64.rpm: digests signatures OK
</span></span><span style=display:flex><span>[root@centos8 ~]#rpm -qa &#34;gpg-pubkey*&#34;
</span></span><span style=display:flex><span>gpg-pubkey-8483c65d-5ccc5b19
</span></span><span style=display:flex><span>[root@centos8 ~]#rpm -qi gpg-pubkey-8483c65d-5ccc5b19
</span></span><span style=display:flex><span>Name : gpg-pubkey
</span></span><span style=display:flex><span>Version : 8483c65d
</span></span><span style=display:flex><span>Release : 5ccc5b19
</span></span><span style=display:flex><span>Architecture: (none)
</span></span><span style=display:flex><span>Install Date: Wed 08 Apr 2020 10:06:20 AM CST
</span></span><span style=display:flex><span>Group : Public Keys
</span></span><span style=display:flex><span>Size : 0
</span></span><span style=display:flex><span>License : pubkey
</span></span><span style=display:flex><span>Signature : (none)
</span></span><span style=display:flex><span>Source RPM : (none)
</span></span><span style=display:flex><span>Build Date : Fri 03 May 2019 11:15:37 PM CST
</span></span><span style=display:flex><span>Build Host : localhost
</span></span><span style=display:flex><span>Relocations : (not relocatable)
</span></span><span style=display:flex><span>Packager : CentOS (CentOS Official Signing Key) &lt;security@centos.org&gt;
</span></span><span style=display:flex><span>Summary : gpg(CentOS (CentOS Official Signing Key) &lt;security@centos.org&gt;)
</span></span><span style=display:flex><span>Description :
</span></span><span style=display:flex><span>-----BEGIN PGP PUBLIC KEY BLOCK-----
</span></span><span style=display:flex><span>Version: rpm-4.14.2 (NSS-3)
</span></span><span style=display:flex><span>xxxx
</span></span><span style=display:flex><span>-----END PGP PUBLIC KEY BLOCK-----
</span></span></code></pre></div><p>范例：校验包文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#rpm -K /misc/cd/BaseOS/Packages/tree-1.7.0-15.el8.x86_64.rpm
</span></span><span style=display:flex><span>/misc/cd/BaseOS/Packages/tree-1.7.0-15.el8.x86_64.rpm: digests signatures OK
</span></span><span style=display:flex><span>[root@centos8 ~]#cp /misc/cd/BaseOS/Packages/tree-1.7.0-15.el8.x86_64.rpm /data
</span></span><span style=display:flex><span>[root@centos8 ~]#cd /data
</span></span><span style=display:flex><span>[root@centos8 data]#ll
</span></span><span style=display:flex><span>total 60
</span></span><span style=display:flex><span>-r--r--r-- 1 root root 60780 Apr 8 10:11 tree-1.7.0-15.el8.x86_64.rpm
</span></span><span style=display:flex><span>[root@centos8 data]#echo &gt;&gt;tree-1.7.0-15.el8.x86_64.rpm
</span></span><span style=display:flex><span>[root@centos8 data]#ll tree-1.7.0-15.el8.x86_64.rpm
</span></span><span style=display:flex><span>-r--r--r-- 1 root root 60781 Apr 8 10:11 tree-1.7.0-15.el8.x86_64.rpm
</span></span><span style=display:flex><span>[root@centos8 data]#cd
</span></span><span style=display:flex><span>[root@centos8 ~]#rpm -K /data/tree-1.7.0-15.el8.x86_64.rpm
</span></span><span style=display:flex><span>/data/tree-1.7.0-15.el8.x86_64.rpm: DIGESTS SIGNATURES NOT OK
</span></span></code></pre></div><p>软件在安装时，会将包里的每个文件的元数据，如：大小，权限，所有者，时间等记录至rpm相关的数
据库中，可以用来检查包中的文件是否和当初安装时有所变化</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm {-V|--verify} [select-options] [verify-options]
</span></span><span style=display:flex><span>#示例：
</span></span><span style=display:flex><span>[root@centos8 ~]#rpm -V centos-release
</span></span><span style=display:flex><span>S.5....T. c /etc/issue
</span></span><span style=display:flex><span>S file Size differs
</span></span><span style=display:flex><span>M Mode differs (includes permissions and file type)
</span></span><span style=display:flex><span>5 digest (formerly MD5 sum) differs
</span></span><span style=display:flex><span>D Device major/minor number mismatch
</span></span><span style=display:flex><span>L readLink(2) path mismatch
</span></span><span style=display:flex><span>U User ownership differs
</span></span><span style=display:flex><span>G Group ownership differs
</span></span><span style=display:flex><span>T mTime differs
</span></span><span style=display:flex><span>P capabilities differ
</span></span><span style=display:flex><span>. (点) 表示当前位置代表的字符含义一致
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>c 所在的位置表示文件类型
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>c 配置文件
</span></span><span style=display:flex><span>d 文件数据文件
</span></span><span style=display:flex><span>g 该文件不属于某个文件(少数情况)
</span></span><span style=display:flex><span>l 许可证文件(license file)
</span></span><span style=display:flex><span>r 自述文件(READ ME)
</span></span></code></pre></div><h3 id=数据库维护>数据库维护
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e7%bb%b4%e6%8a%a4></a></h3><p>rpm包安装时生成的信息，都放在rpm数据库中</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>rpm
</span></span></code></pre></div><p>可以重建数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>rpm {--initdb|--rebuilddb}
</span></span><span style=display:flex><span>initdb: 初始化，如果事先不存在数据库，则新建之，否则，不执行任何操作
</span></span><span style=display:flex><span>rebuilddb：重建已安装的包头的数据库索引目录
</span></span></code></pre></div><h2 id=yum和dnf>yum和dnf
<a class=header-anchor href=#yum%e5%92%8cdnf></a></h2><p>yum/dnf 工作原理<br>yum/dnf 是基于C/S 模式</p><ul><li>yum 服务器存放rpm包和相关包的元数据库</li><li>yum 客户端访问yum服务器进行安装或查询等
yum 实现过程<br>先在yum服务器上创建 yum repository（仓库），在仓库中事先存储了众多rpm包，以及包的相关的
元数据文件（放置于特定目录repodata下），当yum客户端利用yum/dnf工具进行安装时包时，会自动
下载repodata中的元数据，查询远数据是否存在相关的包及依赖关系，自动从仓库中找到相关包下载并
安装。</li></ul><h3 id=yum客户端配置>yum客户端配置
<a class=header-anchor href=#yum%e5%ae%a2%e6%88%b7%e7%ab%af%e9%85%8d%e7%bd%ae></a></h3><p><strong>yum客户端配置文件</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/yum.conf                   #为所有仓库提供公共配置
</span></span><span style=display:flex><span>/etc/yum.repos.d/*.repo：       #为每个仓库的提供配置文件
</span></span></code></pre></div><p><strong>帮助参考：</strong> man 5 yum.conf<br><strong>repo仓库配置文件指向的定义：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[repositoryID]
</span></span><span style=display:flex><span>name=Some name for this repository
</span></span><span style=display:flex><span>baseurl=url://path/to/repository/
</span></span><span style=display:flex><span>enabled={1|0}
</span></span><span style=display:flex><span>gpgcheck={1|0}
</span></span><span style=display:flex><span>gpgkey=URL
</span></span><span style=display:flex><span>enablegroups={1|0}
</span></span><span style=display:flex><span>failovermethod={roundrobin|priority}
</span></span><span style=display:flex><span>roundrobin：意为随机挑选，默认值
</span></span><span style=display:flex><span>priority:按顺序访问
</span></span><span style=display:flex><span>cost= 默认为1000
</span></span></code></pre></div><p><strong>yum服务器的baseurl形式：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>file:// 本地路径
</span></span><span style=display:flex><span>http://
</span></span><span style=display:flex><span>https://
</span></span><span style=display:flex><span>ftp://
</span></span></code></pre></div><p><strong>注意：yum仓库指向的路径一定必须是repodata目录所在目录</strong>
<strong>相关变量</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum的repo配置文件中可用的变量：
</span></span><span style=display:flex><span>$releasever: 当前OS的发行版的主版本号，如：8，7，6
</span></span><span style=display:flex><span>$arch: CPU架构，如：aarch64, i586, i686，x86_64等
</span></span><span style=display:flex><span>$basearch：系统基础平台；i386, x86_64
</span></span><span style=display:flex><span>$contentdir：表示目录，比如：centos-8，centos-7
</span></span><span style=display:flex><span>$YUM0-$YUM9:自定义变量
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>http://server/centos/$releasever/$basearch/
</span></span><span style=display:flex><span>http://server/centos/7/x86_64
</span></span><span style=display:flex><span>http://server/centos/6/i386
</span></span></code></pre></div><p>范例：CentOS 8 配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]# ll /etc/yum.conf
</span></span><span style=display:flex><span>lrwxrwxrwx. 1 root root 12 May 14 2019 /etc/yum.conf -&gt; dnf/dnf.conf
</span></span><span style=display:flex><span>[root@centos8 ~]#cat /etc/yum.conf
</span></span><span style=display:flex><span>[main]
</span></span><span style=display:flex><span>gpgcheck=1 #安装包前要做包的合法和完整性校验
</span></span><span style=display:flex><span>installonly_limit=3 #同时可以安装3个包，最小值为2，如设为0或1，为不限制
</span></span><span style=display:flex><span>clean_requirements_on_remove=True #删除包时，是否将不再使用的包删除
</span></span><span style=display:flex><span>best=True #升级时，自动选择安装最新版，即使缺少包的依赖
</span></span></code></pre></div><p>范例：CentOS 7 的配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e># ll /etc/yum.conf</span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span>rw<span style=color:#f92672>-</span>r<span style=color:#f92672>--</span>r<span style=color:#f92672>--.</span> <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>970</span> Aug <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>19</span>:<span style=color:#ae81ff>57</span> <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>yum<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e># cat /etc/yum.conf</span>
</span></span><span style=display:flex><span>[main]
</span></span><span style=display:flex><span>cachedir<span style=color:#f92672>=/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>cache<span style=color:#f92672>/</span>yum<span style=color:#f92672>/$</span>basearch<span style=color:#f92672>/$</span>releasever <span style=color:#75715e>#缓存路径</span>
</span></span><span style=display:flex><span>keepcache<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> <span style=color:#75715e>#如果为1,则下载rpm并缓存下来,不删除,默认安装rpm后会删除rpm包</span>
</span></span><span style=display:flex><span>debuglevel<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>logfile<span style=color:#f92672>=/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>yum<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span>exactarch<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>obsoletes<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>gpgcheck<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>plugins<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>installonly_limit<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>bugtracker_url<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span>bugs<span style=color:#f92672>.</span>centos<span style=color:#f92672>.</span>org<span style=color:#f92672>/</span>set_project<span style=color:#f92672>.</span>php<span style=color:#960050;background-color:#1e0010>?</span>
</span></span><span style=display:flex><span>project_id<span style=color:#f92672>=</span><span style=color:#ae81ff>23</span><span style=color:#f92672>&amp;</span>ref<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span>bugs<span style=color:#f92672>.</span>centos<span style=color:#f92672>.</span>org<span style=color:#f92672>/</span>bug_report_page<span style=color:#f92672>.</span>php<span style=color:#960050;background-color:#1e0010>?</span>category<span style=color:#f92672>=</span>yum
</span></span><span style=display:flex><span>distroverpkg<span style=color:#f92672>=</span>centos<span style=color:#f92672>-</span>release
</span></span><span style=display:flex><span><span style=color:#75715e># This is the default, if you make this bigger yum won&#39;t see if the metadata</span>
</span></span><span style=display:flex><span><span style=color:#75715e># is newer on the remote and so you&#39;ll &#34;gain&#34; the bandwidth of not having to</span>
</span></span><span style=display:flex><span><span style=color:#75715e># download the new metadata and &#34;pay&#34; for it by yum not having correct</span>
</span></span><span style=display:flex><span><span style=color:#75715e># information.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># It is esp. important, to have correct metadata, for distributions like</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Fedora which don&#39;t keep old packages around. If you don&#39;t like this checking</span>
</span></span><span style=display:flex><span><span style=color:#75715e># interupting your command line usage, it&#39;s much better to have something</span>
</span></span><span style=display:flex><span><span style=color:#75715e># manually check the metadata once an hour (yum-updatesd will do this).</span>
</span></span><span style=display:flex><span><span style=color:#75715e># metadata_expire=90m</span>
</span></span><span style=display:flex><span><span style=color:#75715e># PUT YOUR REPOS HERE OR IN separate files named file.repo</span>
</span></span><span style=display:flex><span><span style=color:#75715e># in /etc/yum.repos.d</span>
</span></span></code></pre></div><p><strong>baseurl 指向的路径</strong>
阿里云提供了写好的CentOS,Rocky和ubuntu的仓库文件下载链接<br><a href=http://mirrors.aliyun.com/repo/ title=http://mirrors.aliyun.com/repo/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://mirrors.aliyun.com/repo/
<i class="fa fa-external-link-alt"></i></a></p><p>Rocky 系统的yum源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#南京大学
</span></span><span style=display:flex><span>https://mirror.nju.edu.cn/rocky/$releasever/
</span></span><span style=display:flex><span>#上海交大
</span></span><span style=display:flex><span>https://mirrors.sjtug.sjtu.edu.cn/rocky/$releasever/
</span></span><span style=display:flex><span>#山东大学
</span></span><span style=display:flex><span>https://mirrors.sdu.edu.cn/rocky/$releasever/
</span></span></code></pre></div><p>CentOS系统的yum源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#阿里云
</span></span><span style=display:flex><span>https://mirrors.aliyun.com/centos/$releasever/
</span></span><span style=display:flex><span>#腾讯云
</span></span><span style=display:flex><span>https://mirrors.cloud.tencent.com/centos/$releasever/
</span></span><span style=display:flex><span>#华为云
</span></span><span style=display:flex><span>https://repo.huaweicloud.com/centos/$releasever/
</span></span><span style=display:flex><span>#清华大学
</span></span><span style=display:flex><span>https://mirrors.tuna.tsinghua.edu.cn/centos/$releasever/
</span></span></code></pre></div><p>EPEL的yum源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#阿里云
</span></span><span style=display:flex><span>https://mirrors.aliyun.com/epel/$releasever/x86_64
</span></span><span style=display:flex><span>#腾讯云
</span></span><span style=display:flex><span>https://mirrors.cloud.tencent.com/epel/$releasever/x86_64
</span></span><span style=display:flex><span>#华为云
</span></span><span style=display:flex><span>https://mirrors.huaweicloud.com/epel/$releasever/x86_64
</span></span><span style=display:flex><span>#清华大学
</span></span><span style=display:flex><span>https://mirrors.tuna.tsinghua.edu.cn/epel/$releasever/x86_64
</span></span></code></pre></div><p>阿里巴巴开源软件<br><a href=https://opsx.alibaba.com/ title=https://opsx.alibaba.com/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://opsx.alibaba.com/
<i class="fa fa-external-link-alt"></i></a></p><p>范例：为CentOS7用系统安装光盘作的本地yum仓库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#挂载光盘至某目录,如/mnt/cdrom
</span></span><span style=display:flex><span>mount /dev/cdrom /mnt/cdrom
</span></span><span style=display:flex><span>#创建配置文件
</span></span><span style=display:flex><span>[root@centos7 ~]#vim /etc/yum.repos.d/centos7.repo
</span></span><span style=display:flex><span>[CentOS7]
</span></span><span style=display:flex><span>name=CentOS 7
</span></span><span style=display:flex><span>baseurl=file:///mnt/cdrom
</span></span><span style=display:flex><span>gpgcheck=0
</span></span><span style=display:flex><span>enabled=1
</span></span></code></pre></div><p>范例：为CentOS 8 配置 yum 的系统和EPEL源仓库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#cat /etc/yum.repos.d/base.repo
</span></span><span style=display:flex><span>[BaseOS]
</span></span><span style=display:flex><span>name=BaseOS
</span></span><span style=display:flex><span>baseurl=file:///misc/cd/BaseOS
</span></span><span style=display:flex><span>gpgcheck=1
</span></span><span style=display:flex><span>gpgkey=/etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[AppStream]
</span></span><span style=display:flex><span>name=AppStream
</span></span><span style=display:flex><span>baseurl=file:///misc/cd/AppStream
</span></span><span style=display:flex><span>gpgcheck=0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[epel]
</span></span><span style=display:flex><span>name=EPEL
</span></span><span style=display:flex><span>baseurl=http://mirrors.aliyun.com/epel/$releasever/Everything/$basearch
</span></span><span style=display:flex><span>gpgcheck=0
</span></span><span style=display:flex><span>enabled=1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[extras]
</span></span><span style=display:flex><span>name=extras
</span></span><span style=display:flex><span>baseurl=https://mirrors.aliyun.com/centos/$releasever/extras/$basearch/os
</span></span><span style=display:flex><span>gpgcheck=0
</span></span></code></pre></div><p>注意：与之前的版本不同，CentOS 8 系统有两个yum 源：BaseOS和AppStream ，需要分别设置两个
仓库<br>范例：用脚本实现创建yum仓库配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos7 ~<span style=color:#f92672>]</span><span style=color:#75715e># cat yum.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>mkdir /etc/yum.repos.d/backup
</span></span><span style=display:flex><span>mv /etc/yum.repos.d/*.repo /etc/yum.repos.d/backup
</span></span><span style=display:flex><span>cat &gt; /etc/yum.repos.d/base.repo <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[base]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>name=base
</span></span></span><span style=display:flex><span><span style=color:#e6db74>baseurl=https://mirrors.aliyun.com/centos/\$releasever/os/\$basearch
</span></span></span><span style=display:flex><span><span style=color:#e6db74>gpgcheck=0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p><strong>yum-config-manager命令</strong>
可以生成yum仓库的配置文件及启用或禁用仓库，来自于yum-utils包<br>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#增加仓库
</span></span><span style=display:flex><span>yum-config-manager --add-repo URL或file
</span></span><span style=display:flex><span>#禁用仓库
</span></span><span style=display:flex><span>yum-config-manager --disable &#34;仓库名&#34;
</span></span><span style=display:flex><span>#启用仓库
</span></span><span style=display:flex><span>yum-config-manager --enable &#34;仓库名&#34;
</span></span></code></pre></div><h3 id=yum命令>yum命令
<a class=header-anchor href=#yum%e5%91%bd%e4%bb%a4></a></h3><p>yum命令的用法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>yum</span> [<span style=color:#a6e22e>options</span>] [<span style=color:#a6e22e>command</span>] [<span style=color:#f92672>package</span> <span style=color:#f92672>...</span>]
</span></span></code></pre></div><p>yum的命令行选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-y #自动回答为&#34;yes&#34;
</span></span><span style=display:flex><span>-q #静默模式
</span></span><span style=display:flex><span>--nogpgcheck #禁止进行gpg check
</span></span><span style=display:flex><span>--enablerepo=repoidglob #临时启用此处指定的repo，支持通配符，如：&#34;*&#34;
</span></span><span style=display:flex><span>--disablerepo=repoidglob #临时禁用此处指定的repo,和上面语句同时使用，放在后面的生效
</span></span></code></pre></div><h4 id=显示仓库列表>显示仓库列表
<a class=header-anchor href=#%e6%98%be%e7%a4%ba%e4%bb%93%e5%ba%93%e5%88%97%e8%a1%a8></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum repolist [all|enabled|disabled]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky ~]# yum repolist
</span></span><span style=display:flex><span>repo id                                          repo name
</span></span><span style=display:flex><span>appstream                                        Rocky Linux 9 - AppStream
</span></span><span style=display:flex><span>baseos                                           Rocky Linux 9 - BaseOS
</span></span><span style=display:flex><span>epel                                             Extra Packages for Enterprise Linux 9 - x86_64
</span></span><span style=display:flex><span>epel-cisco-openh264                              Extra Packages for Enterprise Linux 9 openh264 (From Cisco) - x86_64
</span></span><span style=display:flex><span>extras                                           Rocky Linux 9 - Extras
</span></span><span style=display:flex><span>[root@rocky ~]# yum repolist --disabled
</span></span><span style=display:flex><span>repo id                                           repo name
</span></span><span style=display:flex><span>appstream-debuginfo                               Rocky Linux 9 - AppStream - Debug
</span></span><span style=display:flex><span>appstream-source                                  Rocky Linux 9 - AppStream - Source
</span></span><span style=display:flex><span>baseos-debuginfo                                  Rocky Linux 9 - BaseOS - Debug
</span></span><span style=display:flex><span>baseos-source                                     Rocky Linux 9 - BaseOS - Source
</span></span><span style=display:flex><span>crb                                               Rocky Linux 9 - CRB
</span></span><span style=display:flex><span>crb-debuginfo                                     Rocky Linux 9 - CRB - Debug
</span></span><span style=display:flex><span>crb-source                                        Rocky Linux 9 - CRB - Source
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@rocky ~]# yum repolist all
</span></span><span style=display:flex><span>repo id                                      repo name                                                                                     status
</span></span><span style=display:flex><span>appstream                                    Rocky Linux 9 - AppStream                                                                     enabled
</span></span><span style=display:flex><span>appstream-debuginfo                          Rocky Linux 9 - AppStream - Debug                                                             disabled
</span></span><span style=display:flex><span>appstream-source                             Rocky Linux 9 - AppStream - Source                                                            disabled
</span></span><span style=display:flex><span>baseos                                       Rocky Linux 9 - BaseOS                                                                        enabled
</span></span><span style=display:flex><span>baseos-debuginfo                             Rocky Linux 9 - BaseOS - Debug                                                                disabled
</span></span><span style=display:flex><span>[root@rocky ~]# yum --enablerepo=ep* --disablerepo=A* repolist
</span></span><span style=display:flex><span>No repository match: A*
</span></span><span style=display:flex><span>repo id                                           repo name
</span></span><span style=display:flex><span>appstream                                         Rocky Linux 9 - AppStream
</span></span><span style=display:flex><span>baseos                                            Rocky Linux 9 - BaseOS
</span></span><span style=display:flex><span>epel                                              Extra Packages for Enterprise Linux 9 - x86_64
</span></span><span style=display:flex><span>epel-cisco-openh264                               Extra Packages for Enterprise Linux 9 openh264 (From Cisco) - x86_64
</span></span><span style=display:flex><span>epel-cisco-openh264-debuginfo                     Extra Packages for Enterprise Linux 9 openh264 (From Cisco) - x86_64 - Debug
</span></span></code></pre></div><p>范例: 显示仓库的详细信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum repolist -v</span>
</span></span><span style=display:flex><span>Loaded plugins: builddep, changelog, config<span style=color:#f92672>-</span>manager, copr, debug, debuginfo<span style=color:#f92672>-</span>
</span></span><span style=display:flex><span>install, download, generate_completion_cache, needs<span style=color:#f92672>-</span>restarting, playground,
</span></span><span style=display:flex><span>repoclosure, repodiff, repograph, repomanage, reposync
</span></span><span style=display:flex><span>YUM version: <span style=color:#ae81ff>4.2</span><span style=color:#f92672>.</span><span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span>cachedir: <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>cache<span style=color:#f92672>/</span>dnf
</span></span><span style=display:flex><span><span style=color:#f92672>.........</span>
</span></span></code></pre></div><h4 id=显示程序包>显示程序包
<a class=header-anchor href=#%e6%98%be%e7%a4%ba%e7%a8%8b%e5%ba%8f%e5%8c%85></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum list
</span></span><span style=display:flex><span>yum list [all | glob_exp1] [glob_exp2] [...]
</span></span><span style=display:flex><span>yum list {available|installed|updates} [glob_exp1] [...]
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 data]#dnf list mariadb-server
</span></span><span style=display:flex><span>Last metadata expiration check: 0:05:03 ago on Sun 08 Dec 2019 04:11:17 PM CST.
</span></span><span style=display:flex><span>Available Packages
</span></span><span style=display:flex><span>mariadb-server.x86_64 3:10.3.11-2.module_el8.0.0+35+6f2527ed
</span></span><span style=display:flex><span>AppStream
</span></span><span style=display:flex><span>[root@centos8 data]#dnf list mariadb-server --showduplicates
</span></span><span style=display:flex><span>Last metadata expiration check: 0:05:11 ago on Sun 08 Dec 2019 04:11:17 PM CST.
</span></span><span style=display:flex><span>Available Packages
</span></span><span style=display:flex><span>mariadb-server.x86_64 3:10.3.11-2.module_el8.0.0+35+6f2527ed
</span></span><span style=display:flex><span>AppStream
</span></span><span style=display:flex><span>[root@centos8 data]#dnf list mariadb-server --disablerepo=AppStream
</span></span><span style=display:flex><span>Last metadata expiration check: 0:05:23 ago on Sun 08 Dec 2019 04:11:17 PM CST.
</span></span><span style=display:flex><span>Available Packages
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.4.10-1.el8
</span></span><span style=display:flex><span>mariadb2
</span></span><span style=display:flex><span>[root@centos8 data]#dnf list mariadb-server --showduplicates --
</span></span><span style=display:flex><span>disablerepo=AppStream
</span></span><span style=display:flex><span>Last metadata expiration check: 0:05:41 ago on Sun 08 Dec 2019 04:11:17 PM CST.
</span></span><span style=display:flex><span>Available Packages
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.3.17-1.el8
</span></span><span style=display:flex><span>mariadb
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.3.18-1.el8
</span></span><span style=display:flex><span>mariadb
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.3.20-1.el8
</span></span><span style=display:flex><span>mariadb
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.4.7-1.el8
</span></span><span style=display:flex><span>mariadb2
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.4.8-1.el8
</span></span><span style=display:flex><span>mariadb2
</span></span><span style=display:flex><span>MariaDB-server.x86_64 10.4.10-1.el8
</span></span><span style=display:flex><span>mariadb2
</span></span><span style=display:flex><span>[root@centos8 ~]#yum --disablerepo=&#34;A*&#34; --disablerepo=&#34;B*&#34; --disablerepo=&#34;e*&#34;
</span></span><span style=display:flex><span>list available
</span></span></code></pre></div><p>只查看已经安装的包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum list installed|head
</span></span></code></pre></div><p>查看可安装的包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum list available |head
</span></span></code></pre></div><p>查看可以升级的包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum list updates
</span></span></code></pre></div><p>查看指定的包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum list exim
</span></span><span style=display:flex><span>#支持通配符
</span></span><span style=display:flex><span>yum list exim*
</span></span></code></pre></div><h3 id=安装程序包>安装程序包
<a class=header-anchor href=#%e5%ae%89%e8%a3%85%e7%a8%8b%e5%ba%8f%e5%8c%85></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>yum install package1 [package2] [<span style=color:#f92672>...</span>]
</span></span><span style=display:flex><span>yum reinstall package1 [package2] [<span style=color:#f92672>...</span>] <span style=color:#75715e>#重新安装</span>
</span></span><span style=display:flex><span><span style=color:#f92672>--</span>downloadonly <span style=color:#75715e>#只下载相关包默认至/var/cache/yum/x86_64/7/目录下,而不执行</span>
</span></span><span style=display:flex><span>install<span style=color:#f92672>/</span>upgrade<span style=color:#f92672>/</span>erase
</span></span><span style=display:flex><span><span style=color:#f92672>--</span>downloaddir<span style=color:#f92672>=&lt;</span>path<span style=color:#f92672>&gt;</span>, <span style=color:#f92672>--</span>destdir<span style=color:#f92672>=&lt;</span>path<span style=color:#f92672>&gt;</span> <span style=color:#75715e>#--downloaddir选项来指定下载的目录,如果不存在</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>自动创建</span>
</span></span></code></pre></div><h4 id=安装-epel-源包>安装 EPEL 源包
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-epel-%e6%ba%90%e5%8c%85></a></h4><p>范例：安装epel源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos7 ~]#yum -y install epel-release
</span></span><span style=display:flex><span>[root@centos7 ~]#yum -y install sl
</span></span><span style=display:flex><span>[root@centos7 ~]#rpm -ql sl
</span></span><span style=display:flex><span>/usr/bin/sl
</span></span><span style=display:flex><span>/usr/share/doc/sl-5.02
</span></span><span style=display:flex><span>/usr/share/doc/sl-5.02/LICENSE
</span></span><span style=display:flex><span>/usr/share/doc/sl-5.02/README.ja.md
</span></span><span style=display:flex><span>/usr/share/doc/sl-5.02/README.md
</span></span><span style=display:flex><span>/usr/share/man/ja/man1/sl.1.ja.gz
</span></span><span style=display:flex><span>/usr/share/man/man1/sl.1.gz
</span></span><span style=display:flex><span>#运行安装sl程序，可以看到下面火车，这标志着我们可以当老司机了
</span></span><span style=display:flex><span>[root@centos7 ~]#sl -a
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#dnf -y install cowsay
</span></span></code></pre></div><h4 id=安装-scl-源包>安装 SCL 源包
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-scl-%e6%ba%90%e5%8c%85></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#centos-release-scl 由extras仓库提供
</span></span><span style=display:flex><span>[root@centos7 ~]#yum install centos-release-scl -y
</span></span><span style=display:flex><span>[root@centos7 ~]#rpm -ql centos-release-scl
</span></span><span style=display:flex><span>/etc/pki/rpm-gpg
</span></span><span style=display:flex><span>/etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-SIG-SCLo
</span></span><span style=display:flex><span>/etc/yum.repos.d/CentOS-SCLo-scl.repo
</span></span><span style=display:flex><span>/usr/share/doc/centos-release-scl/GPL
</span></span><span style=display:flex><span>[root@centos7 ~]#yum install rh-php73-php-fpm -
</span></span></code></pre></div><h4 id=升级最新内核>升级最新内核
<a class=header-anchor href=#%e5%8d%87%e7%ba%a7%e6%9c%80%e6%96%b0%e5%86%85%e6%a0%b8></a></h4><p>范例：利用elrepo源在CentOS 7 安装新版内核
说明： The difference is that kernel-lt is based on a long term support branch and kernel-ml is
based on the mainline stable branch.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos7 ~]#yum install https://www.elrepo.org/elrepo-release-7.0-
</span></span><span style=display:flex><span>4.el7.elrepo.noarch.rpm
</span></span><span style=display:flex><span>[root@centos7 ~]#rpm -ql elrepo-release-7.0-4.el7.elrepo
</span></span><span style=display:flex><span>/etc/pki/elrepo
</span></span><span style=display:flex><span>/etc/pki/elrepo/SECURE-BOOT-KEY-elrepo.org.der
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#yum repolist
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#cat /etc/yum.repos.d/elrepo.repo
</span></span><span style=display:flex><span># Name: ELRepo.org Community Enterprise Linux Repository for el7
</span></span><span style=display:flex><span># URL: http://elrepo.org/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#yum --disablerepo=&#34;*&#34; --enablerepo=&#34;elrepo-kernel&#34; list
</span></span><span style=display:flex><span>available
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@magedu ~]#yum -y --enablerepo=&#34;elrepo-kernel&#34; install kernel-ml
</span></span><span style=display:flex><span>[root@centos7 ~]#ls /boot
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#ls /lib/modules
</span></span><span style=display:flex><span>3.10.0-957.el7.x86_64 5.4.6-1.el7.elrepo.x86_64
</span></span><span style=display:flex><span>[root@centos7 ~]#reboot
</span></span><span style=display:flex><span>[root@centos7 ~]#uname -r
</span></span><span style=display:flex><span>5.4.6-1.el7.elrepo.x86_64
</span></span></code></pre></div><h4 id=只下载相关的依赖包而不安装>只下载相关的依赖包,而不安装
<a class=header-anchor href=#%e5%8f%aa%e4%b8%8b%e8%bd%bd%e7%9b%b8%e5%85%b3%e7%9a%84%e4%be%9d%e8%b5%96%e5%8c%85%e8%80%8c%e4%b8%8d%e5%ae%89%e8%a3%85></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#/data/目录如果不存在,会自动创建</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum -y install --downloadonly --downloaddir=/data/httpd httpd</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ls /data/httpd/</span>
</span></span><span style=display:flex><span>apr<span style=color:#f92672>-</span><span style=color:#ae81ff>1.6</span><span style=color:#f92672>.</span><span style=color:#ae81ff>3</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9.</span>el8<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm httpd<span style=color:#f92672>-</span><span style=color:#ae81ff>2.4</span><span style=color:#f92672>.</span><span style=color:#ae81ff>37</span><span style=color:#f92672>-</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>16.</span>module_el8<span style=color:#f92672>.</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>256</span><span style=color:#f92672>+</span>ae790463<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm
</span></span><span style=display:flex><span>apr<span style=color:#f92672>-</span>util<span style=color:#f92672>-</span><span style=color:#ae81ff>1.6</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1</span><span style=color:#f92672>-</span><span style=color:#ae81ff>6.</span>el8<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm httpd<span style=color:#f92672>-</span>filesystem<span style=color:#f92672>-</span><span style=color:#ae81ff>2.4</span><span style=color:#f92672>.</span><span style=color:#ae81ff>37</span><span style=color:#f92672>-</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>16.</span>module_el8<span style=color:#f92672>.</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>256</span><span style=color:#f92672>+</span>ae790463<span style=color:#f92672>.</span>noarch<span style=color:#f92672>.</span>rpm
</span></span><span style=display:flex><span>apr<span style=color:#f92672>-</span>util<span style=color:#f92672>-</span>bdb<span style=color:#f92672>-</span><span style=color:#ae81ff>1.6</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1</span><span style=color:#f92672>-</span><span style=color:#ae81ff>6.</span>el8<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm httpd<span style=color:#f92672>-</span>tools<span style=color:#f92672>-</span><span style=color:#ae81ff>2.4</span><span style=color:#f92672>.</span><span style=color:#ae81ff>37</span><span style=color:#f92672>-</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>16.</span>module_el8<span style=color:#f92672>.</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>256</span><span style=color:#f92672>+</span>ae790463<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm
</span></span><span style=display:flex><span>apr<span style=color:#f92672>-</span>util<span style=color:#f92672>-</span>openssl<span style=color:#f92672>-</span><span style=color:#ae81ff>1.6</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1</span><span style=color:#f92672>-</span><span style=color:#ae81ff>6.</span>el8<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm mailcap<span style=color:#f92672>-</span><span style=color:#ae81ff>2.1</span><span style=color:#f92672>.</span><span style=color:#ae81ff>48</span><span style=color:#f92672>-</span><span style=color:#ae81ff>3.</span>el8<span style=color:#f92672>.</span>noarch<span style=color:#f92672>.</span>rpm
</span></span><span style=display:flex><span>centos<span style=color:#f92672>-</span>logos<span style=color:#f92672>-</span>httpd<span style=color:#f92672>-</span><span style=color:#ae81ff>80.5</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2.</span>el8<span style=color:#f92672>.</span>noarch<span style=color:#f92672>.</span>rpm mod_http2<span style=color:#f92672>-</span><span style=color:#ae81ff>1.11</span><span style=color:#f92672>.</span><span style=color:#ae81ff>3</span><span style=color:#f92672>-</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3.</span>module_el8<span style=color:#f92672>.</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>+</span><span style=color:#ae81ff>213</span><span style=color:#f92672>+</span>acce2796<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>rpm
</span></span></code></pre></div><p>注意: 下载包也可以通过启用配置文件实现</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e># cat /etc/yum.conf</span>
</span></span><span style=display:flex><span>[main]
</span></span><span style=display:flex><span>cachedir<span style=color:#f92672>=/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>cache<span style=color:#f92672>/</span>yum<span style=color:#f92672>/$</span>basearch<span style=color:#f92672>/$</span>releasever <span style=color:#75715e>#缓存路径</span>
</span></span><span style=display:flex><span>keepcache<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> <span style=color:#75715e>#如果为1,则下载rpm并缓存下来,不删除,默认安装rpm后会删除rpm包</span>
</span></span></code></pre></div><h3 id=卸载程序包>卸载程序包
<a class=header-anchor href=#%e5%8d%b8%e8%bd%bd%e7%a8%8b%e5%ba%8f%e5%8c%85></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum remove | erase package1 [package2] [...]
</span></span></code></pre></div><h3 id=升级和降级-1>升级和降级
<a class=header-anchor href=#%e5%8d%87%e7%ba%a7%e5%92%8c%e9%99%8d%e7%ba%a7-1></a></h3><p>检查可用升级：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum check-update
</span></span></code></pre></div><p>升级和降级</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum upgrade|update [package1] [package2] [...]
</span></span><span style=display:flex><span>yum upgrade-minimal #最小化升级
</span></span><span style=display:flex><span>yum downgrade package1 [package2] [...] (降级)
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos7 ~]# cat /etc/yum.repos.d/base.repo
</span></span><span style=display:flex><span>[root@centos7 ~]#yum --disablerepo=* --enablerep=updates list available
</span></span><span style=display:flex><span>[root@centos7 ~]#yum info samba
</span></span><span style=display:flex><span>[root@centos7 ~]#yum info samba --showduplicates
</span></span><span style=display:flex><span>[root@centos7 ~]#yum install samba --disablerepo=updates
</span></span><span style=display:flex><span>[root@centos7 ~]#yum update samba
</span></span><span style=display:flex><span>[root@centos7 ~]#yum update
</span></span></code></pre></div><h3 id=查询>查询
<a class=header-anchor href=#%e6%9f%a5%e8%af%a2></a></h3><p>查看程序包information：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum info [...]
</span></span></code></pre></div><p>查看指定的特性(可以是某文件)是由哪个程序包所提供：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum provides | whatprovides feature1 [feature2] [...]
</span></span></code></pre></div><p><strong>注意：文件要写全路径，而不只是文件名，否则可能无法查询到</strong>
范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]# ll /etc/vsftpd/vsftpd.conf
</span></span><span style=display:flex><span>ls: cannot access &#39;/etc/vsftpd/vsftpd.conf&#39;: No such file or directory
</span></span><span style=display:flex><span>#注意要写文件全路径才能查询到
</span></span><span style=display:flex><span>[root@centos8 ~]#yum provides vsftpd.conf
</span></span><span style=display:flex><span>Last metadata expiration check: 0:56:45 ago on Fri 10 Apr 2020 11:24:00 AM CST.
</span></span><span style=display:flex><span>Error: No Matches found
</span></span><span style=display:flex><span>[root@centos8 ~]# yum provides /etc/vsftpd/vsftpd.conf
</span></span><span style=display:flex><span>Last metadata expiration check: 0:33:13 ago on Fri 27 Dec 2019 03:47:34 PM CST.
</span></span><span style=display:flex><span>vsftpd-3.0.3-28.el8.x86_64 : Very Secure Ftp Daemon
</span></span><span style=display:flex><span>Repo : AppStream
</span></span><span style=display:flex><span>Matched from:
</span></span><span style=display:flex><span>Filename : /etc/vsftpd/vsftpd.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#使用通配符
</span></span><span style=display:flex><span>[root@centos8 ~]#yum provides */vsftpd.conf
</span></span><span style=display:flex><span>[root@centos8 ~]#yum provides */updatedb*
</span></span></code></pre></div><p>以指定的关键字搜索程序包名及summary信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum search string1 [string2] [...]
</span></span></code></pre></div><p>查看指定包所依赖的capabilities：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum deplist package1 [package2] [...]
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky ~]# dnf info bash
</span></span><span style=display:flex><span>Last metadata expiration check: 0:44:51 ago on Thu Dec 19 13:11:50 2024.
</span></span><span style=display:flex><span>Installed Packages
</span></span><span style=display:flex><span>Name         : bash
</span></span><span style=display:flex><span>Version      : 5.1.8
</span></span><span style=display:flex><span>Release      : 9.el9
</span></span><span style=display:flex><span>Architecture : x86_64
</span></span><span style=display:flex><span>Size         : 7.4 M
</span></span><span style=display:flex><span>Source       : bash-5.1.8-9.el9.src.rpm
</span></span><span style=display:flex><span>Repository   : @System
</span></span><span style=display:flex><span>From repo    : minimal
</span></span><span style=display:flex><span>Summary      : The GNU Bourne Again shell
</span></span><span style=display:flex><span>URL          : https://www.gnu.org/software/bash
</span></span><span style=display:flex><span>License      : GPLv3+
</span></span><span style=display:flex><span>Description  : The GNU Bourne Again shell (Bash) is a shell or command language
</span></span><span style=display:flex><span>             : interpreter that is compatible with the Bourne shell (sh). Bash
</span></span><span style=display:flex><span>             : incorporates useful features from the Korn shell (ksh) and the C shell
</span></span><span style=display:flex><span>             : (csh). Most sh scripts can be run by bash without modification.
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky ~]# dnf list bash*
</span></span><span style=display:flex><span>Last metadata expiration check: 0:45:18 ago on Thu Dec 19 13:11:50 2024.
</span></span><span style=display:flex><span>Installed Packages
</span></span><span style=display:flex><span>bash.x86_64                                                                5.1.8-9.el9                                                     @minimal
</span></span><span style=display:flex><span>Available Packages
</span></span><span style=display:flex><span>bash-argsparse.noarch                                                      1.8-1.el9                                                       epel
</span></span><span style=display:flex><span>bash-color-prompt.noarch                                                   0.4-1.el9                                                       epel
</span></span><span style=display:flex><span>bash-completion.noarch                                                     1:2.11-5.el9                                                    baseos
</span></span></code></pre></div><p>范例: rocky 9 查看未安装包的文件列表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>rocky <span style=color:#f92672>~</span>]<span style=color:#75715e># rpm -q memcached</span>
</span></span><span style=display:flex><span>package memcached is <span style=color:#f92672>not</span> installed
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>rocky <span style=color:#f92672>~</span>]<span style=color:#75715e># dnf repoquery -l memcached</span>
</span></span><span style=display:flex><span>Last metadata expiration check: <span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>47</span>:<span style=color:#ae81ff>40</span> ago on Thu Dec <span style=color:#ae81ff>19</span> <span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>50</span> <span style=color:#ae81ff>2024.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>sysconfig<span style=color:#f92672>/</span>memcached
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>bin<span style=color:#f92672>/</span>memcached
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>bin<span style=color:#f92672>/</span>memcached<span style=color:#f92672>-</span><span style=color:#66d9ef>tool</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/.</span>build<span style=color:#f92672>-</span>id
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/.</span>build<span style=color:#f92672>-</span>id<span style=color:#f92672>/</span><span style=color:#ae81ff>96</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/.</span>build<span style=color:#f92672>-</span>id<span style=color:#f92672>/</span><span style=color:#ae81ff>96</span><span style=color:#f92672>/</span><span style=color:#ae81ff>4</span>a9e960bf63303d159ce727a7eafac8cd1ffe7
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>systemd<span style=color:#f92672>/</span>system<span style=color:#f92672>/</span>memcached<span style=color:#f92672>.</span>service
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>sysusers<span style=color:#f92672>.</span>d<span style=color:#f92672>/</span>memcached<span style=color:#f92672>.</span>conf
</span></span></code></pre></div><p>范例: CentOS 7 查看未安装包的文件列表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span>[<span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>centos7</span> ~]<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>rpm</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>q</span> <span style=color:#a6e22e>memcached</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>memcached</span> <span style=color:#a6e22e>is</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>installed</span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>centos7</span> ~]<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>yum</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>y</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>yum</span><span style=color:#f92672>-</span><span style=color:#a6e22e>utils</span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>centos7</span> ~]<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>repoquery</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>ql</span> <span style=color:#a6e22e>memcached</span>  <span style=color:#a6e22e>repoquery</span> <span style=color:#a6e22e>命令的主要功能是从</span> <span style=color:#a6e22e>Yum</span> <span style=color:#a6e22e>仓库中查询</span> <span style=color:#a6e22e>RPM</span> <span style=color:#a6e22e>包的信息</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>包括依赖关系</span><span style=color:#960050;background-color:#1e0010>、</span><span style=color:#a6e22e>文件列表和描述等</span><span style=color:#960050;background-color:#1e0010>。</span><span style=color:#a6e22e>这个命令属于</span> <span style=color:#a6e22e>yum</span><span style=color:#f92672>-</span><span style=color:#a6e22e>utils</span> <span style=color:#a6e22e>包</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>是一个扩展工具</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>用于补充和增强</span> <span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>的功能</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>尤其是在查询软件包关系方面</span><span style=color:#960050;background-color:#1e0010>。</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>sysconfig</span><span style=color:#f92672>/</span><span style=color:#a6e22e>memcached</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>usr</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bin</span><span style=color:#f92672>/</span><span style=color:#a6e22e>memcached</span>
</span></span><span style=display:flex><span><span style=color:#f92672>......</span>
</span></span></code></pre></div><h3 id=仓库缓存>仓库缓存
<a class=header-anchor href=#%e4%bb%93%e5%ba%93%e7%bc%93%e5%ad%98></a></h3><p>清除目录/var/cache/yum/缓存</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum clean [ packages | metadata | expire-cache | rpmdb | plugins | all ]
</span></span></code></pre></div><p>构建缓存：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum makecache
</span></span></code></pre></div><p>范例：管理yum缓存</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e>#du -sh /var/cache/yum</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>93</span>M <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>cache<span style=color:#f92672>/</span>yum
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ls /var/cache/yum/x86_64/7/</span>
</span></span><span style=display:flex><span>base epel extras timedhosts timedhosts<span style=color:#f92672>.</span>txt
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>magedu <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum clean all</span>
</span></span><span style=display:flex><span>Loaded plugins: fastestmirror
</span></span><span style=display:flex><span>Cleaning repos: base epel extras
</span></span><span style=display:flex><span>Cleaning up list of fastest mirrors
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e>#du -sh /var/cache/yum</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4.0</span>K <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>cache<span style=color:#f92672>/</span>yum
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum makecache</span>
</span></span><span style=display:flex><span><span style=color:#f92672>......</span>
</span></span><span style=display:flex><span>Metadata Cache Created
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos7 <span style=color:#f92672>~</span>]<span style=color:#75715e>#du -sh /var/cache/yum</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>276</span>M <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>cache<span style=color:#f92672>/</span>yum
</span></span></code></pre></div><h3 id=查看yum事务历史>查看yum事务历史
<a class=header-anchor href=#%e6%9f%a5%e7%9c%8byum%e4%ba%8b%e5%8a%a1%e5%8e%86%e5%8f%b2></a></h3><p>yum 执行安装卸载命令会记录到相关日志中<br>日志 文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#CentOS 7以前版本日志</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>yum<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span><span style=color:#75715e>#CentOS 8 版本日志</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>dnf<span style=color:#f92672>.</span>rpm<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>dnf<span style=color:#f92672>.</span>log
</span></span></code></pre></div><p>日志命令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum history [info|list|packages-list|packages-info|summary|addon-
</span></span><span style=display:flex><span>info|redo|undo|rollback|new|sync|stats]
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#dnf history
</span></span><span style=display:flex><span>ID | Command line | Date and time | Action(s) | Altered
</span></span><span style=display:flex><span>-------------------------------------------------------------------------------
</span></span><span style=display:flex><span>22 | install yum-utils | 2019-12-22 13:44 | Install | 1
</span></span><span style=display:flex><span>21 | remove vsftpd | 2019-12-22 13:39 | Removed | 1
</span></span><span style=display:flex><span>20 | install vsftpd | 2019-12-22 13:39 | Install | 1
</span></span><span style=display:flex><span>19 | install python3 | 2019-12-22 12:26 | Install | 3
</span></span><span style=display:flex><span>18 | install perl | 2019-12-22 12:25 | Install | 156
</span></span><span style=display:flex><span>17 | install httpd -y | 2019-12-21 20:21 | Install | 10
</span></span><span style=display:flex><span>...省略...
</span></span><span style=display:flex><span>[root@centos8 ~]#dnf history info 22
</span></span><span style=display:flex><span>Transaction ID : 22
</span></span><span style=display:flex><span>Begin time : Sun 22 Dec 2019 01:44:08 PM CST
</span></span><span style=display:flex><span>Begin rpmdb : 607:35cd823ff347e56ceb688a9f72715eabb3c53d41
</span></span><span style=display:flex><span>End time : Sun 22 Dec 2019 01:44:08 PM CST (0 seconds)
</span></span><span style=display:flex><span>End rpmdb : 608:24139ec38fc131c182b75fdaad0626692045da94
</span></span><span style=display:flex><span>User : root &lt;root&gt;
</span></span><span style=display:flex><span>Return-Code : Success
</span></span><span style=display:flex><span>Releasever : 8
</span></span><span style=display:flex><span>Command Line : install yum-utils
</span></span><span style=display:flex><span>Packages Altered:
</span></span><span style=display:flex><span>Install dnf-utils-4.0.2.2-3.el8.noarch @BaseOS
</span></span><span style=display:flex><span>[root@centos8 ~]#dnf history undo 22 -y
</span></span><span style=display:flex><span>Removed:
</span></span><span style=display:flex><span>dnf-utils-4.0.2.2-3.el8.noarch
</span></span><span style=display:flex><span>Complete!
</span></span><span style=display:flex><span>[root@centos8 ~]#dnf history redo 22 -y
</span></span></code></pre></div><h3 id=安装及升级本地程序包>安装及升级本地程序包
<a class=header-anchor href=#%e5%ae%89%e8%a3%85%e5%8f%8a%e5%8d%87%e7%ba%a7%e6%9c%ac%e5%9c%b0%e7%a8%8b%e5%ba%8f%e5%8c%85></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum localinstall|install rpmfile1 [rpmfile2] [...]
</span></span><span style=display:flex><span>yum localupdate|update rpmfile1 [rpmfile2] [...]
</span></span></code></pre></div><h3 id=查看包的安全警报>查看包的安全警报
<a class=header-anchor href=#%e6%9f%a5%e7%9c%8b%e5%8c%85%e7%9a%84%e5%ae%89%e5%85%a8%e8%ad%a6%e6%8a%a5></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum updateinfo --summary|--list|--info
</span></span></code></pre></div><h3 id=包组管理的相关命令>包组管理的相关命令
<a class=header-anchor href=#%e5%8c%85%e7%bb%84%e7%ae%a1%e7%90%86%e7%9a%84%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>yum grouplist [hidden] [groupwildcard] [...]
</span></span><span style=display:flex><span>yum groupinstall group1 [group2] [...]
</span></span><span style=display:flex><span>yum groupupdate group1 [group2] [...]
</span></span><span style=display:flex><span>yum groupremove group1 [group2] [...]
</span></span><span style=display:flex><span>yum groupinfo group1 [...]
</span></span></code></pre></div><h3 id=实现私用-yum-仓库>实现私用 yum 仓库
<a class=header-anchor href=#%e5%ae%9e%e7%8e%b0%e7%a7%81%e7%94%a8-yum-%e4%bb%93%e5%ba%93></a></h3><p>下载所有yum仓库的相关包和meta 数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#CentOS 8 dnf 工具集成</span>
</span></span><span style=display:flex><span>dnf reposync <span style=color:#f92672>--</span>help <span style=color:#75715e>#查看帮助</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#默认只下载rpm包，不下载 meta数据，需要指定--download-metadata 才能下载 meta</span>
</span></span><span style=display:flex><span>dnf reposync <span style=color:#f92672>--</span>repoid<span style=color:#f92672>=</span>REPOID <span style=color:#f92672>--</span>download<span style=color:#f92672>-</span>metadata <span style=color:#f92672>-</span>p <span style=color:#f92672>/</span>path
</span></span><span style=display:flex><span><span style=color:#75715e>#CentOS 7 以前版本，reposync工具来自于yum-utils包</span>
</span></span><span style=display:flex><span>reposync <span style=color:#f92672>--</span>repoid<span style=color:#f92672>=</span>REPOID <span style=color:#f92672>--</span>download<span style=color:#f92672>-</span>metadata <span style=color:#f92672>-</span>p <span style=color:#f92672>/</span>path
</span></span></code></pre></div><p>创建私有yum仓库：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>createrepo [options] &lt;directory&gt;
</span></span></code></pre></div><p>范例：创建局域网的基于Base的私有yum源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#仓库服务器配置</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum -y install httpd</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#systemctl enable --now httpd</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#mkdir /var/www/html/centos/8 -pv</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#mount /dev/sr0 /mnt/</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#cp -a /mnt/* /var/www/html/centos/8</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#yum客户端配置</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#cat /etc/yum.repos.d/test.repo</span>
</span></span><span style=display:flex><span>[BaseOS]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>BaseOS
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>BaseOS
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>file:<span style=color:#f92672>///</span>etc<span style=color:#f92672>/</span>pki<span style=color:#f92672>/</span>rpm<span style=color:#f92672>-</span>gpg<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>centosofficial
</span></span><span style=display:flex><span>[AppStream]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>Appstream
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>AppStream<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>file:<span style=color:#f92672>///</span>etc<span style=color:#f92672>/</span>pki<span style=color:#f92672>/</span>rpm<span style=color:#f92672>-</span>gpg<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>centosofficial
</span></span></code></pre></div><p>范例：下载阿里云的extras源，制作私有yum源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum repolist</span>
</span></span><span style=display:flex><span>Last metadata expiration check: <span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>14</span> ago on Wed <span style=color:#ae81ff>08</span> Apr <span style=color:#ae81ff>2020</span> <span style=color:#ae81ff>05</span>:<span style=color:#ae81ff>42</span>:<span style=color:#ae81ff>07</span> PM CST<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>repo id repo name status
</span></span><span style=display:flex><span>AppStream AppStream <span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>755</span>
</span></span><span style=display:flex><span>BaseOS BaseOS <span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>659</span>
</span></span><span style=display:flex><span>epel EPEL <span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>206</span>
</span></span><span style=display:flex><span>extras
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#dnf reposync --repoid=extras --download-metadata -p</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>www<span style=color:#f92672>/</span>html<span style=color:#f92672>/</span>centos
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#ls /var/www/html/centos/</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span> extras
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#ls /var/www/html/centos/extras/</span>
</span></span><span style=display:flex><span>Packages repodata
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum repolist</span>
</span></span><span style=display:flex><span>Last metadata expiration check: <span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>02</span>:<span style=color:#ae81ff>31</span> ago on Wed <span style=color:#ae81ff>08</span> Apr <span style=color:#ae81ff>2020</span> <span style=color:#ae81ff>06</span>:<span style=color:#ae81ff>01</span>:<span style=color:#ae81ff>20</span> PM CST<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>repo id repo name
</span></span><span style=display:flex><span>status
</span></span><span style=display:flex><span>AppStream Appstream
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>755</span>
</span></span><span style=display:flex><span>BaseOS BaseOS
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>659</span>
</span></span><span style=display:flex><span>extras extras
</span></span><span style=display:flex><span><span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#cat /etc/yum.repos.d/test.repo</span>
</span></span><span style=display:flex><span>[BaseOS]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>BaseOS
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>BaseOS
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>file:<span style=color:#f92672>///</span>etc<span style=color:#f92672>/</span>pki<span style=color:#f92672>/</span>rpm<span style=color:#f92672>-</span>gpg<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>centosofficial
</span></span><span style=display:flex><span>[AppStream]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>Appstream
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>AppStream<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>file:<span style=color:#f92672>///</span>etc<span style=color:#f92672>/</span>pki<span style=color:#f92672>/</span>rpm<span style=color:#f92672>-</span>gpg<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>centosofficial
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[extras]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>extras
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span>extras<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum --disablerepo=* --enablerepo=extras list available</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum -y install epel-release</span>
</span></span></code></pre></div><p>范例：下载阿里云的EPEL源，制作私有yum源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#cat /etc/yum.repos.d/base.repo</span>
</span></span><span style=display:flex><span>[epel]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>EPEL
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>https:<span style=color:#f92672>//</span>mirrors<span style=color:#f92672>.</span>aliyun<span style=color:#f92672>.</span>com<span style=color:#f92672>/</span>epel<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>Everything<span style=color:#f92672>/</span>x86_64<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>gpgcheck<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#dnf repolist</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>.....</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#下载相关仓库包和元数据</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#dnf reposync --repoid=epel --download-metadata -p</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>www<span style=color:#f92672>/</span>html
</span></span><span style=display:flex><span><span style=color:#75715e>#--download-metadata 加此选项可以下载元数据</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#下载相关的key文件</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>server <span style=color:#f92672>~</span>]<span style=color:#75715e>#wget -P /var/www/html/epel/</span>
</span></span><span style=display:flex><span>https:<span style=color:#f92672>//</span>mirrors<span style=color:#f92672>.</span>aliyun<span style=color:#f92672>.</span>com<span style=color:#f92672>/</span>epel<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>EPEL<span style=color:#f92672>-</span><span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#下面两个步骤只有没meta数据才需要执行</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[root@centos8 ~]#dnf -y install createrepo httpd</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#[root@centos8 ~]#createrepo /var/www/html/epel/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ls /var/www/html/epel/</span>
</span></span><span style=display:flex><span>Packages repodata
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#systemctl start httpd</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#cat /etc/yum.repos.d/test.repo</span>
</span></span><span style=display:flex><span>[BaseOS]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>BaseOS
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>BaseOS
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>file:<span style=color:#f92672>///</span>etc<span style=color:#f92672>/</span>pki<span style=color:#f92672>/</span>rpm<span style=color:#f92672>-</span>gpg<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>centosofficial
</span></span><span style=display:flex><span>[AppStream]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>Appstream
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span><span style=color:#ae81ff>8</span><span style=color:#f92672>/</span>AppStream<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>file:<span style=color:#f92672>///</span>etc<span style=color:#f92672>/</span>pki<span style=color:#f92672>/</span>rpm<span style=color:#f92672>-</span>gpg<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>centosofficial
</span></span><span style=display:flex><span>[extras]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>extras
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>centos<span style=color:#f92672>/</span>extras<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>[epel]
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>epel
</span></span><span style=display:flex><span>baseurl<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>epel<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>gpgkey<span style=color:#f92672>=</span>http:<span style=color:#f92672>//</span><span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span><span style=color:#f92672>/</span>epel<span style=color:#f92672>/</span>RPM<span style=color:#f92672>-</span>GPG<span style=color:#f92672>-</span>KEY<span style=color:#f92672>-</span>EPEL<span style=color:#f92672>-</span><span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#yum repolist</span>
</span></span><span style=display:flex><span>extras <span style=color:#ae81ff>1.6</span> MB<span style=color:#f92672>/</span>s <span style=color:#f92672>|</span> <span style=color:#ae81ff>4.9</span> kB <span style=color:#ae81ff>00</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>epel <span style=color:#ae81ff>88</span> MB<span style=color:#f92672>/</span>s <span style=color:#f92672>|</span> <span style=color:#ae81ff>6.2</span> MB <span style=color:#ae81ff>00</span>:<span style=color:#ae81ff>00</span>
</span></span><span style=display:flex><span>repo id repo name status
</span></span><span style=display:flex><span>AppStream Appstream <span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>755</span>
</span></span><span style=display:flex><span>BaseOS BaseOS <span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>659</span>
</span></span><span style=display:flex><span>epel epel <span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>206</span>
</span></span><span style=display:flex><span>extras extras <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>repo<span style=color:#f92672>-</span>client <span style=color:#f92672>~</span>]<span style=color:#75715e>#dnf install openvpn</span>
</span></span></code></pre></div><h3 id=dnf-介绍>DNF 介绍
<a class=header-anchor href=#dnf-%e4%bb%8b%e7%bb%8d></a></h3><p>DNF，即DaNdiFied，是新一代的RPM软件包管理器。DNF 发行日期是2015年5月11日，DNF 包管理
器采用Python 编写，发行许可为GPL v2，首先出现在Fedora 18 发行版中。在 RHEL 8.0 版本正式取代
了 YUM，DNF包管理器克服了YUM包管理器的一些瓶颈，提升了包括用户体验，内存占用，依赖分
析，运行速度等<br>配置文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/dnf/dnf.conf
</span></span></code></pre></div><p>仓库文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/yum.repos.d/ *.repo
</span></span></code></pre></div><p>日志：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>dnf<span style=color:#f92672>.</span>rpm<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>dnf<span style=color:#f92672>.</span>log
</span></span></code></pre></div><p>DNF 使用帮助：man dnf<br>dnf 用法与yum一致</p><h3 id=yum-troubleshooting>yum Troubleshooting
<a class=header-anchor href=#yum-troubleshooting></a></h3><p>yum 和 dnf 失败最主要原因：</p><ul><li>yum的配置文件格式或路径错误
解决方法：检查/etc/yum.repos.d/*.repo文件格式</li><li>yum cache
解决方法：yum clean all</li><li>网络不通：
解决方法：网卡配置</li></ul><h2 id=源码编译>源码编译
<a class=header-anchor href=#%e6%ba%90%e7%a0%81%e7%bc%96%e8%af%91></a></h2><p>程序包编译安装：
源代码&ndash;>预处理&ndash;>编译&ndash;>汇编&ndash;>链接&ndash;>执行
多文件：文件中的代码之间，很可能存在跨文件依赖关系</p><p><img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/afe211b7-dab0-4e5f-9368-53d14787aeef alt=03>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/325aa873-36b5-49c3-a788-134889c894fc alt=04></p><h2 id=编译源码的项目工具>编译源码的项目工具
<a class=header-anchor href=#%e7%bc%96%e8%af%91%e6%ba%90%e7%a0%81%e7%9a%84%e9%a1%b9%e7%9b%ae%e5%b7%a5%e5%85%b7></a></h2><ul><li>C、C++的源码编译：使用 make 项目管理器
configure脚本 &ndash;> Makefile.in &ndash;> Makefile
相关开发工具：
autoconf: 生成configure脚本
automake：生成Makefile.in</li><li>java的源码编译: 使用 maven</li></ul><h2 id=c-语言源代码编译安装过程>C 语言源代码编译安装过程
<a class=header-anchor href=#c-%e8%af%ad%e8%a8%80%e6%ba%90%e4%bb%a3%e7%a0%81%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85%e8%bf%87%e7%a8%8b></a></h2><p>利用编译工具，通常只需要三个大的步骤</p><ul><li>./configure
(1) 通过选项传递参数，指定安装路径、启用特性等；执行时会参考用户的指定以及Makefile.in文
件生成Makefile
(2) 检查依赖到的外部环境，如依赖的软件包</li><li>make 根据Makefile文件，会检测依赖的环境，进行构建应用程序</li><li>make install 复制文件到相应路径
注意：安装前可以通过查看README，INSTALL获取帮助</li></ul><h3 id=编译安装准备>编译安装准备
<a class=header-anchor href=#%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85%e5%87%86%e5%a4%87></a></h3><ul><li>准备：安装相关的依赖包</li><li>开发工具：make, gcc (c/c++编译器GNU C Complier)</li><li>开发环境：开发库（glibc：标准库），头文件，可安装开发包组 Development Tools
软件相关依赖包<br>生产实践：基于最小化安装的系统建议安装下面相关包</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>yum install gcc make autoconf gcc<span style=color:#f92672>-</span>c<span style=color:#f92672>++</span> glibc glibc<span style=color:#f92672>-</span>devel pcre pcre<span style=color:#f92672>-</span>devel openssl
</span></span><span style=display:flex><span>openssl<span style=color:#f92672>-</span>devel systemd<span style=color:#f92672>-</span>devel zlib<span style=color:#f92672>-</span>devel vim lrzsz tree tmux lsof tcpdump wget
</span></span><span style=display:flex><span>net<span style=color:#f92672>-</span>tools iotop bc bzip2 zip unzip nfs<span style=color:#f92672>-</span>utils man<span style=color:#f92672>-</span>pages
</span></span></code></pre></div><h3 id=编译安装>编译安装
<a class=header-anchor href=#%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85></a></h3><p>第一步：运行 configure 脚本，生成 Makefile 文件<br>其选项主要功能：</p><ul><li>可以指定安装位置</li><li>指定启用的特性
获取其支持使用的选项<br>./configure &ndash;help
选项分类：</li><li>安装路径设定
&ndash;prefix=/PATH：指定默认安装位置,默认为/usr/local/<br>&ndash;sysconfdir=/PATH：配置文件安装位置<br>System types：支持交叉编译</li><li>软件特性和相关指定：
Optional Features: 可选特性<br>&ndash;disable-FEATURE<br>&ndash;enable-FEATURE[=ARG]<br>Optional Packages: 可选包<br>&ndash;with-PACKAGE[=ARG] 依赖包<br>&ndash;without-PACKAGE 禁用依赖关系<br>注意：通常被编译操作依赖的程序包，需要安装此程序包的"开发"组件，其包名一般类似于name-
devel-VERSION<br>第二步：make<br>第三步：make install</li></ul><h3 id=安装后的配置>安装后的配置
<a class=header-anchor href=#%e5%ae%89%e8%a3%85%e5%90%8e%e7%9a%84%e9%85%8d%e7%bd%ae></a></h3><ol><li>二进制程序目录导入至PATH环境变量中
编辑文件</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/profile.d/NAME.sh
</span></span></code></pre></div><ol start=2><li>相关用户及文件<br>有些开源软件编译完成后，还需要创建相关的用户及文件</li><li>导入帮助手册<br>编辑/etc/man.config|man_db.conf文件,添加一个MANPATH</li></ol><h3 id=编译安装实战案例>编译安装实战案例
<a class=header-anchor href=#%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85%e5%ae%9e%e6%88%98%e6%a1%88%e4%be%8b></a></h3><h4 id=官网下载并编译安装新版-tree>官网下载并编译安装新版 tree
<a class=header-anchor href=#%e5%ae%98%e7%bd%91%e4%b8%8b%e8%bd%bd%e5%b9%b6%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85%e6%96%b0%e7%89%88-tree></a></h4><p>范例：CentOS 7 编译安装 tree1.8</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#1 安装相关的依赖包
</span></span><span style=display:flex><span>[root@centos7 ~]#yum install gcc make
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#2 下载源码并解压
</span></span><span style=display:flex><span>[root@centos7 ~]#tar xvf tree-1.8.0.tgz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#3 进入解压缩的目录，README和INSTALL
</span></span><span style=display:flex><span>[root@centos7 ~]#cd tree-1.8.0/
</span></span><span style=display:flex><span>[root@centos7 tree-1.8.0]#cat README
</span></span><span style=display:flex><span>[root@centos7 tree-1.8.0]#cat INSTALL
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#4 修改源码的版本号
</span></span><span style=display:flex><span>[root@centos7 tree-1.8.0]#sed -i &#39;s#v1\.8\.0#v8.8.8#&#39; tree.c
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#5 编译准备
</span></span><span style=display:flex><span>[root@centos7 tree-1.8.0]#vim Makefile
</span></span><span style=display:flex><span>prefix = /apps/tree
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#6 编译
</span></span><span style=display:flex><span>[root@centos7 tree-1.8.0]#make
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#7 安装
</span></span><span style=display:flex><span>[root@centos7 tree-1.8.0]#make install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#8 修改PATH变量
</span></span><span style=display:flex><span>#默认无法直接运行tree
</span></span><span style=display:flex><span>[root@centos7 ~]#tree
</span></span><span style=display:flex><span>-bash: tree: command not found
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#echo &#39;PATH=/apps/tree/bin:$PATH&#39; &gt; /etc/profile.d/tree.sh
</span></span><span style=display:flex><span>. /etc/profile.d/tree.sh
</span></span><span style=display:flex><span>#或者利用软链接实现
</span></span><span style=display:flex><span>[root@centos7 ~]#ln -s /apps/tree/bin/tree /usr/local/bin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#9 验证结果
</span></span><span style=display:flex><span>[root@centos7 ~]#tree --version
</span></span><span style=display:flex><span>tree v8.8.8 (c) 1996 - 2018 by Steve Baker, Thomas Moore, Francesc Rocher,
</span></span><span style=display:flex><span>Florian Sesser, Kyosuke Tokoro
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#10 添加man帮助
</span></span><span style=display:flex><span>#默认无法查看man
</span></span><span style=display:flex><span>[root@centos7 ~]#man tree
</span></span><span style=display:flex><span>No manual entry for tree
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#vim /etc/man_db.conf
</span></span><span style=display:flex><span>MANDATORY_MANPATH /apps/tree/man
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@centos7 ~]#man tree
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#11 运行tree查看生成的文件列表
</span></span><span style=display:flex><span>[root@centos7 ~]#tree /apps/tree
</span></span><span style=display:flex><span>/apps/tree
</span></span><span style=display:flex><span>├── bin
</span></span><span style=display:flex><span>│ └── tree
</span></span><span style=display:flex><span>└── man
</span></span><span style=display:flex><span>└── man1
</span></span><span style=display:flex><span>└── tree.1
</span></span><span style=display:flex><span>3 directories, 2 files
</span></span></code></pre></div><h4 id=编译安装-httpd-24>编译安装 httpd 2.4
<a class=header-anchor href=#%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85-httpd-24></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#安装前准备：关闭防火墙和SELinux</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#1 安装相关包</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#dnf install gcc make autoconf apr-devel apr-util-devel pcre-</span>
</span></span><span style=display:flex><span>devel openssl<span style=color:#f92672>-</span>devel redhat<span style=color:#f92672>-</span>rpm<span style=color:#f92672>-</span>config
</span></span><span style=display:flex><span><span style=color:#75715e>#2 下载并解压缩包</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#wget https://mirror.bit.edu.cn/apache//httpd/httpd-</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2.4</span><span style=color:#f92672>.</span><span style=color:#ae81ff>46.</span>tar<span style=color:#f92672>.</span>bz2
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#tar xvf httpd-2.4.46.tar.bz2 -C /usr/local/src</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#3 配置</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#cd /usr/local/src/httpd-2.4.43/</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 httpd<span style=color:#f92672>-</span><span style=color:#ae81ff>2.4</span><span style=color:#f92672>.</span><span style=color:#ae81ff>46</span>]<span style=color:#75715e>#./configure --prefix=/apps/httpd --</span>
</span></span><span style=display:flex><span>sysconfdir<span style=color:#f92672>=/</span>etc<span style=color:#f92672>/</span>httpd <span style=color:#f92672>--</span>enable<span style=color:#f92672>-</span>ssl
</span></span><span style=display:flex><span><span style=color:#75715e>#4 编译并安装</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 httpd<span style=color:#f92672>-</span><span style=color:#ae81ff>2.4</span><span style=color:#f92672>.</span><span style=color:#ae81ff>46</span>]<span style=color:#75715e>#make -j 4 &amp;&amp; make install</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#5 配置环境</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#39;PATH=/apps/httpd/bin:$PATH&#39; &gt; /etc/profile.d/httpd.sh</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#. /etc/profile.d/httpd.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#6 运行</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#apachectl start</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#7 指定用apache用户运行</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#useradd -r -s /sbin/nologin -d /var/www -c Apache -u 48 apache</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#vim /etc/httpd/httpd.conf</span>
</span></span><span style=display:flex><span>user apache
</span></span><span style=display:flex><span>group apache
</span></span><span style=display:flex><span><span style=color:#75715e>#8 配置生效和验证</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#apachectl restart</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#9 查看进程</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ps aux</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#10 用浏览器打开以下地址，可以看下面页面</span>
</span></span></code></pre></div><h4 id=heading><a class=header-anchor href=#heading></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2021-10-09</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName: install_httpd.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description: The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2021 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>CPUS<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>grep -c processor /proc/cpuinfo<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>HTTPD_VERSION<span style=color:#f92672>=</span>2.4.52
</span></span><span style=display:flex><span>INSTALL_DIR<span style=color:#f92672>=</span>/apps/httpd
</span></span><span style=display:flex><span>COLOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;echo -e \E[32;1m&#34;</span>
</span></span><span style=display:flex><span>END<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\E[0m&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>systemctl disable --now firewalld
</span></span><span style=display:flex><span>yum -y install gcc make apr-devel apr-util-devel openssl-devel pcre-devel
</span></span><span style=display:flex><span>redhat-rpm-config bzip2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd /usr/local/src
</span></span><span style=display:flex><span>rpm -q wget <span style=color:#f92672>||</span> yum -y install wget
</span></span><span style=display:flex><span>wget https://dlcdn.apache.org//httpd/httpd-<span style=color:#e6db74>${</span>HTTPD_VERSION<span style=color:#e6db74>}</span>.tar.bz2 <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> $COLOR
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;下载失败，退出&#34;</span> $END;exit ; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tar xf httpd-<span style=color:#e6db74>${</span>HTTPD_VERSION<span style=color:#e6db74>}</span>.tar.bz2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd httpd-<span style=color:#e6db74>${</span>HTTPD_VERSION<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>./configure --prefix<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>INSTALL_DIR<span style=color:#e6db74>}</span> --enable-ssl --disable-status
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>make -j $CPUS <span style=color:#f92672>&amp;&amp;</span> make install
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ln -s /apps/httpd/bin/apachectl /usr/local/bin/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apachectl start <span style=color:#f92672>&amp;&amp;</span> $COLOR<span style=color:#e6db74>&#34;安装成功!&#34;</span>$END
</span></span><span style=display:flex><span>$COLOR<span style=color:#e6db74>&#34;请访问:http://`hostname -I`&#34;</span>$END
</span></span></code></pre></div><h2 id=ubuntu-软件管理>Ubuntu 软件管理
<a class=header-anchor href=#ubuntu-%e8%bd%af%e4%bb%b6%e7%ae%a1%e7%90%86></a></h2><p>Debian软件包通常为预编译的二进制格式的扩展名".deb"，类似rpm文件，因此安装快速，无需编译软
件。包文件包括特定功能或软件所必需的文件、元数据和指令</p><ul><li>dpkg：package manager for Debian，类似于rpm， dpkg是基于Debian的系统的包管理器。可
以安装，删除和构建软件包，但无法自动下载和安装软件包或其依赖项</li><li>apt：Advanced Packaging Tool，功能强大的软件管理工具，甚至可升级整个Ubuntu的系统，基
于客户/服务器架构，类似于yum</li></ul><p>APT工作原理</p><p>在服务器上先复制所有DEB包，然后用APT的分析工具genbasedir根据每个DEB 包的包头（Header）
信息对所有的DEB包进行分析，并将该分析结果记录在文件夹base内的一个DEB 索引清单文件中，一
旦APT 服务器内的DEB有所变动，要使用genbasedir产生新的DEB索引清单。客户端在进行安装或升级
时先要查询DEB索引清单，从而获知所有具有依赖关系的软件包，并一同下载到客户端以便安装。当客
户端需要安装、升级或删除某个软件包时，客户端计算机取得DEB索引清单压缩文件后，会将其解压置
放于 /var/cache/apt/，而客户端使用apt-get install或apt-get upgrade命令的时候，就会将这个文件夹
内的数据和客户端计算机内的DEB数据库比对，知道哪些DEB已安装、未安装或是可以升级的</p><h3 id=dpkg-包管理器>dpkg 包管理器
<a class=header-anchor href=#dpkg-%e5%8c%85%e7%ae%a1%e7%90%86%e5%99%a8></a></h3><p>帮助参看：man dpkg
dpkg 常见用法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#安装包，不支持包的依赖
</span></span><span style=display:flex><span>dpkg -i package.deb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#删除包，不建议，不自动卸载依赖于它的包
</span></span><span style=display:flex><span>dpkg -r package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#删除包（包括配置文件）
</span></span><span style=display:flex><span>dpkg -P package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#列出当前已安装的包，类似rpm -qa
</span></span><span style=display:flex><span>dpkg -l
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#显示该包的简要说明
</span></span><span style=display:flex><span>dpkg -l package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#列出该包的状态，包括详细信息，类似rpm –qi
</span></span><span style=display:flex><span>dpkg -s package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#列出该包中所包含的文件，类似rpm –ql
</span></span><span style=display:flex><span>dpkg -L package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#搜索包含pattern的包，类似rpm –qf
</span></span><span style=display:flex><span>dpkg -S &lt;pattern&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#配置包，-a 使用，配置所有没有配置的软件包
</span></span><span style=display:flex><span>dpkg --configure package
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#列出 deb 包的内容，类似rpm –qpl
</span></span><span style=display:flex><span>dpkg -c package.deb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#解开 deb 包的内容
</span></span><span style=display:flex><span>dpkg --unpack package.deb
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#列出系统上安装的所有软件包
</span></span><span style=display:flex><span>dpkg -l
</span></span><span style=display:flex><span>#列出软件包安装的文件
</span></span><span style=display:flex><span>dpkg -L bash
</span></span><span style=display:flex><span>#查看/bin/bash来自于哪个软件包
</span></span><span style=display:flex><span>dpkg -S /bin/bash
</span></span><span style=display:flex><span>#安装本地的 .deb 文件
</span></span><span style=display:flex><span>dpkg -i /mnt/cdrom/pool/main/z/zip/zip_3.0-11build1_amd64.deb
</span></span><span style=display:flex><span>#卸载软件包
</span></span><span style=display:flex><span>dpkg -r zip
</span></span></code></pre></div><p>注意：一般建议不要使用dpkg卸载软件包。因为删除包时，其它依赖它的包不会卸载，并且可能无法再
正常运行</p><h3 id=apt>apt
<a class=header-anchor href=#apt></a></h3><p>Debian 使用apt 工具集来管理包系统，apt-get 是其中一个常用的命令行工具，另外一款较为流行的命
令行与 GUI 兼顾的工具是 aptitude ，之前最常用的 Linux 包管理命令都被分散在了 apt-get、apt-
cache 和 apt-config 这三条命令中<br>在 2014 年apt 命令发布第一个稳定版，Ubuntu 16.04 引入新特性之一便是 apt 命令，apt 命令解决了
命令过于分散的问题，它包括 apt-get 命令出现以来使用最广泛的功能选项，以及 apt-cache 和 apt-
config 命令中很少用到的功能。在使用 apt 命令时，用户不必再由 apt-get 转到 apt-cache 或 apt-
config，提供管理软件包所需的必要选项<br>apt 相当于 apt-get、apt-cache 和 apt-config 中最常用命令选项的集合<br>apt 具有更精减但足够的命令选项，而且参数选项的组织方式更为有效。此外，启用的几个特性也非常
有帮助。例如：可以在使用 apt 命令安装或删除程序时看到进度条,apt 还会在更新存储库数据库时提示
用户可升级的软件包个数<br>apt 与 apt-get 有一些类似的命令选项，但它并不能完全向下兼容 apt-get 命令,也即可用 apt 替换部分
apt-get 系列命令，但不是全部<br>apt 命令用法<br>查看帮助：apt help
<strong>apt与apt-get命令对比</strong></p><table><thead><tr><th>apt命令</th><th>被取代的命令</th><th>命令的功能</th></tr></thead><tbody><tr><td>apt install</td><td>apt-get install</td><td>安装软件包</td></tr><tr><td>apt remove</td><td>apt-get remove</td><td>移除软件包</td></tr><tr><td>apt purge</td><td>apt-get purge</td><td>移除软件包及配置文件</td></tr><tr><td>apt update</td><td>apt-get update</td><td>刷新存储库索引</td></tr><tr><td>apt upgrade</td><td>apt-get upgrade</td><td>升级所有可升级的软件包</td></tr><tr><td>apt autoremove</td><td>apt-get autoremove</td><td>自动删除不需要的包</td></tr><tr><td>apt full-upgrade</td><td>apt-get dist-upgrade</td><td>在升级软件包时自动处理依赖关系</td></tr><tr><td>apt search</td><td>apt-cache search</td><td>搜索应用程序</td></tr><tr><td>apt show</td><td>apt-cache show</td><td>显示安装细节</td></tr><tr><td>apt 特有的命令</td><td></td><td></td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt list 列出包含条件的包（已安装，可升级等）
</span></span><span style=display:flex><span>apt edit-sources 编辑源列表
</span></span></code></pre></div><p>APT包索引配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/apt/sources.list
</span></span><span style=display:flex><span>/etc/apt/sources.list.d
</span></span></code></pre></div><p>可以修改上面文件为国内的安装源，提高速度</p><p>参考链接
<a href="https://developer.aliyun.com/mirror/ubuntu?spm=a2c6h.13651102.0.0.53322f70fghx56" title="https://developer.aliyun.com/mirror/ubuntu?spm=a2c6h.13651102.0.0.53322f70fghx56" rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://developer.aliyun.com/mirror/ubuntu?spm=a2c6h.13651102.0.0.53322f70fghx56
<i class="fa fa-external-link-alt"></i>
</a>范例: 修改阿里云的APT源为清华源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>root@ubuntu2004:~# sed -i &#39;s/mirrors.aliyun.com/mirrors.tuna.tsinghua.edu.cn/&#39;
</span></span><span style=display:flex><span>/etc/apt/sources.list
</span></span></code></pre></div><p>范例: 修改APT源为清华源
<a href=https://mirrors.tuna.tsinghua.edu.cn/ title=https://mirrors.tuna.tsinghua.edu.cn/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://mirrors.tuna.tsinghua.edu.cn/
<i class="fa fa-external-link-alt"></i></a></p><p><img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/c85f3227-956d-4ac5-8474-70eb719df1c9 alt=image>
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/4d230226-6eee-439e-b01b-8c7d1807a95e alt=image>
apt命令操作（如安装和删除软件包）日志文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>dpkg<span style=color:#f92672>.</span>log
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#安装包：</span>
</span></span><span style=display:flex><span>apt install tree zip
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#安装deb包,注意:包文件前必须加路径</span>
</span></span><span style=display:flex><span>apt install <span style=color:#f92672>./</span>mongodb<span style=color:#f92672>-</span>database<span style=color:#f92672>-</span>tools<span style=color:#f92672>-</span>ubuntu1804<span style=color:#f92672>-</span>x86_64<span style=color:#f92672>-</span><span style=color:#ae81ff>100.5</span><span style=color:#f92672>.</span><span style=color:#ae81ff>1.</span>deb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#安装图形桌面</span>
</span></span><span style=display:flex><span>apt install ubuntu<span style=color:#f92672>-</span>desktop
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#删除包：</span>
</span></span><span style=display:flex><span>apt remove tree zip
</span></span><span style=display:flex><span><span style=color:#75715e>#说明：apt remove中添加--purge选项会删除包配置文件，谨慎使用</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#更新包索引，相当于yum clean all;yum makecache</span>
</span></span><span style=display:flex><span>apt update
</span></span><span style=display:flex><span><span style=color:#75715e>#升级包：要升级系统，请首先更新软件包索引，再升级</span>
</span></span><span style=display:flex><span>apt upgrade
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#apt列出仓库软件包，等于yum list</span>
</span></span><span style=display:flex><span>apt list
</span></span><span style=display:flex><span><span style=color:#75715e>#搜索安装包</span>
</span></span><span style=display:flex><span>apt search nginx
</span></span><span style=display:flex><span><span style=color:#75715e>#查看某个安装包的详细信息</span>
</span></span><span style=display:flex><span>apt show apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#在线安装软件包</span>
</span></span><span style=display:flex><span>apt install apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#卸载单个软件包但是保留配置⽂件</span>
</span></span><span style=display:flex><span>apt remove apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#删除安装包并解决依赖关系</span>
</span></span><span style=display:flex><span>apt autoremove apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#更新本地软件包列表索引，修改了apt仓库后必须执⾏</span>
</span></span><span style=display:flex><span>apt update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#卸载单个软件包删除配置⽂件</span>
</span></span><span style=display:flex><span>apt purge apache2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#升级所有已安装且可升级到新版本的软件包</span>
</span></span><span style=display:flex><span>apt upgrade
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#升级整个系统，必要时可以移除旧软件包。</span>
</span></span><span style=display:flex><span>apt full<span style=color:#f92672>-</span>upgrade
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#编辑source源⽂件</span>
</span></span><span style=display:flex><span>apt edit<span style=color:#f92672>-</span>sources
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#查看仓库中软件包有哪些版本可以安装</span>
</span></span><span style=display:flex><span>apt<span style=color:#f92672>-</span>cache madison nginx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#安装软件包的时候指定安装具体的版本</span>
</span></span><span style=display:flex><span>apt install nginx<span style=color:#f92672>=</span><span style=color:#ae81ff>1.14</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>0</span>ubuntu1<span style=color:#f92672>.</span><span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#查看文件来自于哪个包,类似redhat中的yum provides &lt;filename&gt;</span>
</span></span><span style=display:flex><span>apt<span style=color:#f92672>-</span>file search <span style=color:#e6db74>&#39;string&#39;</span> <span style=color:#75715e>#默认是包含此字符串的文件</span>
</span></span><span style=display:flex><span>apt<span style=color:#f92672>-</span>file search <span style=color:#f92672>-</span>x <span style=color:#e6db74>&#39;正则表达式&#39;</span>
</span></span><span style=display:flex><span>apt<span style=color:#f92672>-</span>file search <span style=color:#f92672>-</span>F <span style=color:#f92672>/</span>path<span style=color:#f92672>/</span>file
</span></span></code></pre></div><h3 id=软件管理案例>软件管理案例
<a class=header-anchor href=#%e8%bd%af%e4%bb%b6%e7%ae%a1%e7%90%86%e6%a1%88%e4%be%8b></a></h3><h4 id=案例1-查看文件来自于哪个包>案例1: 查看文件来自于哪个包
<a class=header-anchor href=#%e6%a1%88%e4%be%8b1-%e6%9f%a5%e7%9c%8b%e6%96%87%e4%bb%b6%e6%9d%a5%e8%87%aa%e4%ba%8e%e5%93%aa%e4%b8%aa%e5%8c%85></a></h4><p>范例: 查找存在的文件来自于哪个包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#dpkg -S filename ：在当前安装的包里查找文件
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#dpkg -S /bin/ls
</span></span><span style=display:flex><span>coreutils: /bin/ls
</span></span></code></pre></div><p>范例: 查找不存在的文件存在于哪个包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>ubuntu1804 <span style=color:#f92672>~</span>]<span style=color:#75715e>#apt -y install apt-file</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>ubuntu1804 <span style=color:#f92672>~</span>]<span style=color:#75715e>#apt update</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>ubuntu1804 <span style=color:#f92672>~</span>]<span style=color:#75715e>#apt-file search -x &#39;/sl$&#39;</span>
</span></span><span style=display:flex><span>espeak<span style=color:#f92672>-</span>data: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>x86_64<span style=color:#f92672>-</span>linux<span style=color:#f92672>-</span>gnu<span style=color:#f92672>/</span>espeak<span style=color:#f92672>-</span>data<span style=color:#f92672>/</span>voices<span style=color:#f92672>/</span>test<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>espeak<span style=color:#f92672>-</span>ng<span style=color:#f92672>-</span>data: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>x86_64<span style=color:#f92672>-</span>linux<span style=color:#f92672>-</span>gnu<span style=color:#f92672>/</span>espeak<span style=color:#f92672>-</span>ng<span style=color:#f92672>-</span>data<span style=color:#f92672>/</span>lang<span style=color:#f92672>/</span>zls<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>language<span style=color:#f92672>-</span>pack<span style=color:#f92672>-</span>sl<span style=color:#f92672>-</span>base: <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>locales<span style=color:#f92672>/</span>supported<span style=color:#f92672>.</span>d<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>python<span style=color:#f92672>-</span>langdetect: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python2<span style=color:#f92672>.</span><span style=color:#ae81ff>7</span><span style=color:#f92672>/</span>dist<span style=color:#f92672>-</span>packages<span style=color:#f92672>/</span>langdetect<span style=color:#f92672>/</span>profiles<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>python3<span style=color:#f92672>-</span>langdetect: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>python3<span style=color:#f92672>/</span>dist<span style=color:#f92672>-</span>packages<span style=color:#f92672>/</span>langdetect<span style=color:#f92672>/</span>profiles<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>qemu<span style=color:#f92672>-</span>system<span style=color:#f92672>-</span>common: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>share<span style=color:#f92672>/</span>qemu<span style=color:#f92672>/</span>keymaps<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>rdesktop: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>share<span style=color:#f92672>/</span>rdesktop<span style=color:#f92672>/</span>keymaps<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>sl: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>games<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>virtualbox: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>share<span style=color:#f92672>/</span>virtualbox<span style=color:#f92672>/</span>rdesktop<span style=color:#f92672>-</span>vrdp<span style=color:#f92672>-</span>keymaps<span style=color:#f92672>/</span>sl
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>ubuntu1804 <span style=color:#f92672>~</span>]<span style=color:#75715e>#apt-file search -F /usr/games/sl</span>
</span></span><span style=display:flex><span>sl: <span style=color:#f92672>/</span>usr<span style=color:#f92672>/</span>games<span style=color:#f92672>/</span>sl
</span></span></code></pre></div><h4 id=案例2-查看包相关信息>案例2: 查看包相关信息
<a class=header-anchor href=#%e6%a1%88%e4%be%8b2-%e6%9f%a5%e7%9c%8b%e5%8c%85%e7%9b%b8%e5%85%b3%e4%bf%a1%e6%81%af></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>显示系统安装包的统计信息</span>,<span style=color:#a6e22e>可以统计已经安装包的数量</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>大小</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>占用空间等</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>apt</span><span style=color:#f92672>-</span><span style=color:#a6e22e>cache</span> <span style=color:#a6e22e>stats</span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ubuntu1804</span> ~]<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>apt</span><span style=color:#f92672>-</span><span style=color:#a6e22e>cache</span> <span style=color:#a6e22e>stats</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Total</span> <span style=color:#f92672>package</span> <span style=color:#a6e22e>names</span>: <span style=color:#ae81ff>84873</span> (<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>697</span> <span style=color:#a6e22e>k</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>Total</span> <span style=color:#f92672>package</span> <span style=color:#a6e22e>structures</span>: <span style=color:#ae81ff>126998</span> (<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>588</span> <span style=color:#a6e22e>k</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>Normal</span> <span style=color:#a6e22e>packages</span>: <span style=color:#ae81ff>91623</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Pure</span> <span style=color:#a6e22e>virtual</span> <span style=color:#a6e22e>packages</span>: <span style=color:#ae81ff>2648</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Single</span> <span style=color:#a6e22e>virtual</span> <span style=color:#a6e22e>packages</span>: <span style=color:#ae81ff>10275</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Mixed</span> <span style=color:#a6e22e>virtual</span> <span style=color:#a6e22e>packages</span>: <span style=color:#ae81ff>5110</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>显示xxx包的信息</span>,<span style=color:#a6e22e>可以看到某个包的源</span><span style=color:#960050;background-color:#1e0010>、</span><span style=color:#a6e22e>版本等信息</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>apt</span><span style=color:#f92672>-</span><span style=color:#a6e22e>cache</span> <span style=color:#a6e22e>show</span> <span style=color:#a6e22e>xxx</span> <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>更详细</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>apt</span> <span style=color:#a6e22e>show</span> <span style=color:#a6e22e>xxx</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ubuntu1804</span> ~]<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>apt</span> <span style=color:#a6e22e>show</span> <span style=color:#a6e22e>keepalived</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Package</span>: <span style=color:#a6e22e>keepalived</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Version</span>: <span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>1.3.9</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#a6e22e>ubuntu0</span><span style=color:#ae81ff>.18.04.2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Priority</span>: <span style=color:#a6e22e>optional</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Section</span>: <span style=color:#a6e22e>admin</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Origin</span>: <span style=color:#a6e22e>Ubuntu</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Maintainer</span>: <span style=color:#a6e22e>Ubuntu</span> <span style=color:#a6e22e>Developers</span> &lt;<span style=color:#a6e22e>ubuntu</span><span style=color:#f92672>-</span><span style=color:#a6e22e>devel</span><span style=color:#f92672>-</span><span style=color:#a6e22e>discuss</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>lists</span>.<span style=color:#a6e22e>ubuntu</span>.<span style=color:#a6e22e>com</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>root</span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ubuntu1804</span> ~]<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#a6e22e>apt</span><span style=color:#f92672>-</span><span style=color:#a6e22e>cache</span> <span style=color:#a6e22e>show</span> <span style=color:#a6e22e>keepalived</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>.
</span></span></code></pre></div><h4 id=案例3-查看仓库中的指定软件的所有版本>案例3: 查看仓库中的指定软件的所有版本
<a class=header-anchor href=#%e6%a1%88%e4%be%8b3-%e6%9f%a5%e7%9c%8b%e4%bb%93%e5%ba%93%e4%b8%ad%e7%9a%84%e6%8c%87%e5%ae%9a%e8%bd%af%e4%bb%b6%e7%9a%84%e6%89%80%e6%9c%89%e7%89%88%e6%9c%ac></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@ubuntu1804 ~]#apt-cache madison docker-ce
</span></span><span style=display:flex><span>docker-ce | 5:19.03.13~3-0~ubuntu-bionic | https://mirrors.aliyun.com/docker-
</span></span><span style=display:flex><span>ce/linux/ubuntu bionic/stable amd64 Packages
</span></span><span style=display:flex><span>docker-ce | 5:19.03.12~3-0~ubuntu-bionic | https://mirrors.aliyun.com/docker-
</span></span><span style=display:flex><span>ce/linux/ubuntu bionic/stable amd64 Packages
</span></span><span style=display:flex><span>docker-ce | 5:19.03.11~3-0~ubuntu-bionic | https://mirrors.aliyun.com/docker-
</span></span><span style=display:flex><span>ce/linux/ubuntu bionic/stable amd64 Packages
</span></span><span style=display:flex><span>docker-ce | 5:19.03.10~3-0~ubuntu-bionic | https://mirrors.aliyun.com/docker-
</span></span><span style=display:flex><span>ce/linux/ubuntu bionic/stable amd64 Packages
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#安装指定版本
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#apt -y install docker-ce=5:19.03.13~3-0~ubuntu-bionic
</span></span></code></pre></div><h4 id=案例4-查看文件的依赖>案例4: 查看文件的依赖
<a class=header-anchor href=#%e6%a1%88%e4%be%8b4-%e6%9f%a5%e7%9c%8b%e6%96%87%e4%bb%b6%e7%9a%84%e4%be%9d%e8%b5%96></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#查询软件xxx依赖哪些包
</span></span><span style=display:flex><span>#apt depends xxx
</span></span><span style=display:flex><span>#apt-cache depends xxx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#apt depends keepalived
</span></span><span style=display:flex><span>keepalived
</span></span><span style=display:flex><span>Depends: iproute2
</span></span><span style=display:flex><span>iproute2:i386
</span></span><span style=display:flex><span>Depends: libc6 (&gt;= 2.27)
</span></span><span style=display:flex><span>Depends: libglib2.0-0 (&gt;= 2.26.0)
</span></span><span style=display:flex><span>Depends: libip4tc0 (&gt;= 1.6.0+snapshot20161117)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>#查询软件xxx被哪些包依赖
</span></span><span style=display:flex><span>#apt rdepends xxx
</span></span><span style=display:flex><span>#apt-cache rdepends xxx
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#apt rdepends bash
</span></span><span style=display:flex><span>bash
</span></span><span style=display:flex><span>Reverse Depends:
</span></span><span style=display:flex><span>Depends: bash-builtins (= 4.4.18-2ubuntu1.2)
</span></span><span style=display:flex><span>bash:i386
</span></span><span style=display:flex><span>Recommends: plasma-sdk (&gt;= 4.3)
</span></span><span style=display:flex><span>bash:i386
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>....
</span></span></code></pre></div><h4 id=案例5-安装桌面>案例5: 安装桌面
<a class=header-anchor href=#%e6%a1%88%e4%be%8b5-%e5%ae%89%e8%a3%85%e6%a1%8c%e9%9d%a2></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@ubuntu1804 ~]#apt install ubuntu-desktop -y
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#init 5
</span></span></code></pre></div><h4 id=ubuntu-建议安装的常用包>ubuntu 建议安装的常用包
<a class=header-anchor href=#ubuntu-%e5%bb%ba%e8%ae%ae%e5%ae%89%e8%a3%85%e7%9a%84%e5%b8%b8%e7%94%a8%e5%8c%85></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@ubuntu1804 ~]#apt purge ufw lxd lxd-client lxcfs liblxc-common
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#apt install iproute2 ntpdate tcpdump telnet traceroute nfs-
</span></span><span style=display:flex><span>kernel-server nfs-common lrzsz tree openssl libssl-dev libpcre3 libpcre3-dev
</span></span><span style=display:flex><span>zlib1g-dev gcc openssh-server iotop unzip zip
</span></span></code></pre></div><h4 id=练习>练习
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0></a></h4><p>1、查询命令java来自于哪个rpm包<br>2、yum的配置和使用,包括yum仓库的创建<br>3、编写系统初始化脚本 reset.sh，包括别名，提示符颜色，yum仓库配置文件,安装tree,ftp,lftp,telnet
等包<br>4、在CentOS 8上编译安装 apache 2.4.43 源码包,并启动此服务</p></div><footer class=post-footer><div class=post-tags><a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><div class="post-nav-prev post-nav-item"><a href=/post/linux11/ rel=prev title=磁盘存储和文件系统>磁盘存储和文件系统
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"http://localhost:1313/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.js defer></script></body></html>