<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="shell脚本编程基础9.1"><meta itemprop=description content="1208034077#qq.com"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://www.lanhui.live/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux"><meta property="og:type" content="article"><meta property="og:title" content="shell脚本编程基础9.1"><meta property="og:description" content="1208034077#qq.com"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://www.lanhui.live/post/linux09/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2024-12-02 04:06:00 +0800 CST"><meta property="article:modified_time" content="2024-12-02 04:06:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.89002406547f1cea16a5ae81687e451f88fa6fc9e470d8a2dccb6dbcd0ab6db8.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"linux09","permalink":"https://www.lanhui.live/post/linux09/","title":"shell脚本编程基础9.1","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>shell脚本编程基础9.1 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>78</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#程序组成>程序组成</a></li><li><a href=#编程语言>编程语言</a></li><li><a href=#编程逻辑处理方式>编程逻辑处理方式</a></li></ul><ul><li><a href=#shell-脚本的用途>shell 脚本的用途</a></li><li><a href=#shell-脚本基本结构>shell 脚本基本结构</a></li><li><a href=#shell脚本创建过程>shell脚本创建过程</a></li><li><a href=#shell-脚本注释规范>shell 脚本注释规范</a></li><li><a href=#第一个-shell-脚本>第一个 shell 脚本</a></li><li><a href=#shell-脚本调试>shell 脚本调试</a></li><li><a href=#变量>变量</a><ul><li><a href=#变量-1>变量</a></li><li><a href=#编程语言分类>编程语言分类</a></li></ul></li><li><a href=#shell中变量命名法则>Shell中变量命名法则</a><ul><li><ul><li><a href=#命名要求>命名要求</a></li><li><a href=#命名习惯>命名习惯</a></li></ul></li><li><a href=#变量定义和引用>变量定义和引用</a><ul><li><a href=#练习>练习：</a></li></ul></li><li><a href=#环境变量>环境变量</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>1208034077#qq.com</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>78</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=88669></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=224></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-04T04:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://www.lanhui.live/post/linux09/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="1208034077#qq.com"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="shell脚本编程基础9.1"><meta itemprop=description content="编程基础 linus：Talk is cheap, show me the code 程序组成 程序：算法+数据结构 算法：处理数据的方式 数据结构：数据在计算机中的类型和组织方式 数据：是程序"></span><header class=post-header><h1 class=post-title itemprop="name headline">shell脚本编程基础9.1</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-12-02 04:06:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-12-02 04:06:00 +0800 CST">2024-12-02
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/linux itemprop=url rel=index><span itemprop=name>linux</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><h1 id=编程基础>编程基础
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e5%9f%ba%e7%a1%80></a></h1><p>linus：Talk is cheap, show me the code</p><h2 id=程序组成>程序组成
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8f%e7%bb%84%e6%88%90></a></h2><ul><li>程序：算法+数据结构</li><li>算法：处理数据的方式</li><li>数据结构：数据在计算机中的类型和组织方式</li><li>数据：是程序的核心,程序为数据提供服务
##程序编程风格</li></ul><ul><li><p><strong>面向过程语言</strong></p><ul><li>做一件事情，排出个步骤，第一步干什么，第二步干什么，如果出现情况 A，做什么处理，如果出现了情况 B，做什么处理</li><li>问题规模小，可以步骤化，按部就班处理</li><li>以指令为中心，数据服务于指令</li><li>C, shell</li></ul></li><li><p><strong>面向对象语言</strong></p><ul><li>将编程看成是一个事物，对外界来说，事物是直接使用的,不用关心事物内部的情况。而编程
就是设置事物能够完成功能。</li><li>一种认识世界、分析世界的方法论。将万事万物抽象为各种对象</li><li>类是抽象的概念，是万事万物的抽象，是一类事物的共同特征的集合</li><li>对象是类的具体实现，是一个实体</li><li>问题规模大，复杂系统</li><li>以数据为中心，指令服务于数据</li><li>java，C#，python，golang等</li></ul></li></ul><h2 id=编程语言>编程语言
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80></a></h2><p>计算机：运行二进制指令<br>编程语言：人与计算机之间交互的语言。分为两种：低级语言和高级语言</p><ul><li>低级编程语言：
机器：二进制的0和1的序列，称为机器指令。与自然语言差异太大，难懂、难写<br>汇编：用一些助记符号替代机器指令，称为汇编语言<br>如：ADD A,B 将寄存器A的数与寄存器B的数相加得到的数放到寄存器A中<br>汇编语言写好的程序需要汇编程序转换成机器指令<br>汇编语言稍微好理解，即机器指令对应的助记符，助记符更接近自然语言</li><li>高级编程语言：<br>编译：高级语言&ndash;>编译器&ndash;>机器代码文件&ndash;>执行，如：C，C++ (编译转化成新的二进制文件)<br>解释：高级语言&ndash;>执行&ndash;>解释器&ndash;>机器代码，如：shell，python，php，JavaScript，perl<br>编译和解释型语言 （边运行边解释）</li></ul><h2 id=编程逻辑处理方式>编程逻辑处理方式
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e9%80%bb%e8%be%91%e5%a4%84%e7%90%86%e6%96%b9%e5%bc%8f></a></h2><h1 id=脚本语言的基本用法>脚本语言的基本用法
<a class=header-anchor href=#%e8%84%9a%e6%9c%ac%e8%af%ad%e8%a8%80%e7%9a%84%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95></a></h1><h2 id=shell-脚本的用途>shell 脚本的用途
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e7%9a%84%e7%94%a8%e9%80%94></a></h2><ul><li>将简单的命令组合完成复杂的工作,自动化执行命令,提高工作效率</li><li>减少手工命令的输入，一定程度上避免人为错误</li><li>将软件或应用的安装及配置实现标准化</li><li>用于实现日常性的,重复性的,非交互式的运维工作,如:文件打包压缩备份,监控系统运行状态并实现
告警等</li></ul><h2 id=shell-脚本基本结构>shell 脚本基本结构
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e5%9f%ba%e6%9c%ac%e7%bb%93%e6%9e%84></a></h2><p>shell脚本编程：是基于过程式、解释执行的语言<br>编程语言的基本结构：</p><ul><li>各种系统命令的组合</li><li>数据存储：变量、数组</li><li>表达式：a + b</li><li>控制语句：if
shell脚本：包含一些命令或声明，并符合一定格式的文本文件<br>格式要求：首行shebang机制</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#!/usr/bin/python</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/perl</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/ruby</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/lua</span>
</span></span></code></pre></div><h2 id=shell脚本创建过程>shell脚本创建过程
<a class=header-anchor href=#shell%e8%84%9a%e6%9c%ac%e5%88%9b%e5%bb%ba%e8%bf%87%e7%a8%8b></a></h2><p>第一步：使用文本编辑器来创建文本文件<br>第一行必须包括shell声明序列：#!
示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span></code></pre></div><p>添加注释,注释以#开头<br>第二步：加执行权限<br>给予执行权限，在命令行上指定脚本的绝对或相对路径<br>第三步：运行脚本<br>直接运行解释器，将脚本作为解释器程序的参数运行</p><h2 id=shell-脚本注释规范>shell 脚本注释规范
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e6%b3%a8%e9%87%8a%e8%a7%84%e8%8c%83></a></h2><p>1、第一行一般为调用使用的语言<br>2、程序名，避免更改文件名为无法找到正确的文件<br>3、版本号<br>4、更改后的时间<br>5、作者相关信息<br>6、该程序的作用，及注意事项<br>7、最后是各版本的更新简要说明</p><h2 id=第一个-shell-脚本>第一个 shell 脚本
<a class=header-anchor href=#%e7%ac%ac%e4%b8%80%e4%b8%aa-shell-%e8%84%9a%e6%9c%ac></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#!SHEBANG
</span></span><span style=display:flex><span>CONFIGURATION_VARIABLES
</span></span><span style=display:flex><span>FUNCTION_DEFINITIONS
</span></span><span style=display:flex><span>MAIN_CODE
</span></span></code></pre></div><p>范例：第一个 Shell 脚本 hello world
参考文档：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#vim /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Filename: hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Version: 1.0</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Date: 2017/06/01</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Author: wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Email: 29308620@qq.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Website: www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Description: This is the first script</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Copyright: 2017 wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># License: GPL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#经典写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;hello, world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#流行写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;Hello, world!&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法2</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/hello.sh | bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash &lt; /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法4</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#chmod +x /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#绝对路径</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#/data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#相法路径</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cd /data/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#./hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法5，本方法可以实现执行远程主机的shell脚本</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#yum -y install httpd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#systemctl start httpd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#mv /data/hello.sh /var/www/html/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Filename: hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Version: 1.0</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Date: 2017/06/01</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Author: wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Email: 29308620@qq.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Website: www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Description: This is the first script</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Copyright: 2017 wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># License: GPL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#经典写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;hello, world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#流行写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;Hello, world!&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh |bash</span>
</span></span><span style=display:flex><span>% Total % Received % Xferd Average Speed Time Time Time Current
</span></span><span style=display:flex><span>Dload Upload Total Spent Left Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> 378k <span style=color:#ae81ff>0</span> --:--:-- --:--:-- --:--:-- 378k
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl -s http://10.0.0.8/hello.sh |bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh 2&gt;/dev/null |bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh &gt;/dev/null |bash</span>
</span></span><span style=display:flex><span>% Total % Received % Xferd Average Speed Time Time Time Current
</span></span><span style=display:flex><span>Dload Upload Total Spent Left Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> 378k <span style=color:#ae81ff>0</span> --:--:-- --:--:-- --:--:-- 378k
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#wget -qO - http://www.wangxiaochun.com/testdir/hello.sh | bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span></code></pre></div><p>范例:执行远程主机的脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#curl http://www.wangxiaochun.com/testdir/hello.sh |bash</span>
</span></span><span style=display:flex><span><span style=color:#f92672>%</span> Total <span style=color:#f92672>%</span> Received <span style=color:#f92672>%</span> Xferd Average Speed Time Time Time Current
</span></span><span style=display:flex><span>Dload Upload Total Spent Left Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>16869</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>--</span>:<span style=color:#f92672>--</span>:<span style=color:#f92672>--</span> <span style=color:#f92672>--</span>:<span style=color:#f92672>--</span>:<span style=color:#f92672>--</span> <span style=color:#f92672>--</span>:<span style=color:#f92672>--</span>:<span style=color:#f92672>--</span> <span style=color:#ae81ff>16869</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#curl -s http://www.wangxiaochun.com/testdir/hello.sh |bash</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#curl http://www.wangxiaochun.com/testdir/hello.sh 2&gt;/dev/null |</span>
</span></span><span style=display:flex><span>bash
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#wget -qO - http://www.wangxiaochun.com/testdir/hello.sh |bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world<span style=color:#f92672>!</span>
</span></span></code></pre></div><p>范例：在远程主机运行本地shell脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#hostname -I</span>
</span></span><span style=display:flex><span>10.0.0.8
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat test.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>hostname -I
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#ssh 10.0.0.18 /bin/bash &lt; test.sh</span>
</span></span><span style=display:flex><span>root@10.0.0.18<span style=color:#960050;background-color:#1e0010>&#39;</span>s password:
</span></span><span style=display:flex><span>10.0.0.18
</span></span></code></pre></div><p>范例：备份脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-20</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： backup.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;\033[1;32mStarting backup...\033[0m&#34;</span>
</span></span><span style=display:flex><span>sleep <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>cp -av /etc/ /data/etc<span style=color:#e6db74>`</span>date +%F<span style=color:#e6db74>`</span>/
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;\033[1;32mBackup is finished\033[0m&#34;</span>
</span></span></code></pre></div><h2 id=shell-脚本调试>shell 脚本调试
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e8%b0%83%e8%af%95></a></h2><p>只检测脚本中的语法错误，但无法检查出命令错误，但不真正执行脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bash -n /path/to/some_script
</span></span></code></pre></div><p>调试并执行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bash -x /path/to/some_script
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat -A test.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author:^I^Iwangxiaochun$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: ^I^I^I29308620$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: ^I^I^I2020-04-01$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileNameM-oM-&lt;M-^Z^I^Itest.sh$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: ^I^I^Ihttp://www.magedu.com$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#DescriptionM-oM-&lt;M-^Z^I^IThe test script$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): ^I2020 All rights reserved$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************$</span>
</span></span><span style=display:flex><span>echo line1$
</span></span><span style=display:flex><span>hostnam$
</span></span><span style=display:flex><span>cat &gt; test.txt <span style=color:#e6db74>&lt;&lt;EOF $
</span></span></span><span style=display:flex><span><span style=color:#e6db74>aaa$
</span></span></span><span style=display:flex><span><span style=color:#e6db74>bbb$
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ccc$
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span> $
</span></span><span style=display:flex><span>$
</span></span><span style=display:flex><span>echo line22$
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#bash -n test.sh</span>
</span></span><span style=display:flex><span>f1.sh: line 20: warning: here-document at line <span style=color:#ae81ff>14</span> delimited by end-of-file
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>wanted <span style=color:#e6db74>`</span>EOF<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p>总结：脚本错误常见的有三种</p><ul><li>语法错误，会导致后续的命令不继续执行，可以用bash -n 检查错误，提示的出错行数不一定是准
确的</li><li>命令错误，默认后续的命令还会继续执行，用bash -n 无法检查出来 ，可以使用 bash -x 进行观察</li><li>逻辑错误：只能使用 bash -x 进行观察</li></ul><h2 id=变量>变量
<a class=header-anchor href=#%e5%8f%98%e9%87%8f></a></h2><h3 id=变量-1>变量
<a class=header-anchor href=#%e5%8f%98%e9%87%8f-1></a></h3><p>变量类型：</p><ul><li>内置变量，如：PS1，PATH，UID，HOSTNAME，$$，BASHPID，PPID，$?，HISTSIZE</li><li>用户自定义变量
不同的变量存放的数据不同，决定了以下</li><li>数据存储方式</li><li>参与的运算</li><li>表示的数据范围
变量数据类型：</li><li>字符</li><li>数值：整型、浮点型,bash 不支持浮点数</li></ul><h3 id=编程语言分类>编程语言分类
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80%e5%88%86%e7%b1%bb></a></h3><p><img src=/imgs/img-lazy-loading.gif data-src=/images/url/linux/linux09/01.jpg alt=q><br><strong>静态和动态语言</strong></p><ul><li>静态编译语言：使用变量前，先声明变量类型，之后类型不能改变，在编译时检查，如：java，c</li><li>动态编译语言：不用事先声明，可随时改变类型，如：bash，Python</li></ul><p><strong>强类型和弱类型语言</strong></p><ul><li>强类型语言：不同类型数据操作，必须经过强制转换才同一类型才能运算，如java ， c# ，
python
如：参考以下 python 代码
print(&lsquo;magedu&rsquo;+ 10) 提示出错，不会自动转换类型
print(&lsquo;magedu&rsquo;+str(10)) 结果为magedu10，需要显示转换类型</li><li>弱类型语言：语言的运行时会隐式做数据类型转换。无须指定类型，默认均为字符型；参与运算会
自动进行隐式类型转换；变量无须事先定义可直接调用
如：bash ，php，javascript</li></ul><h2 id=shell中变量命名法则>Shell中变量命名法则
<a class=header-anchor href=#shell%e4%b8%ad%e5%8f%98%e9%87%8f%e5%91%bd%e5%90%8d%e6%b3%95%e5%88%99></a></h2><h4 id=命名要求>命名要求
<a class=header-anchor href=#%e5%91%bd%e5%90%8d%e8%a6%81%e6%b1%82></a></h4><ul><li>区分大小写</li><li>不能使程序中的保留字和内置变量：如：if, for</li><li>只能使用数字、字母及下划线，且不能以数字开头，注意：不支持短横线 “ - ”，和主机名相反</li></ul><h4 id=命名习惯>命名习惯
<a class=header-anchor href=#%e5%91%bd%e5%90%8d%e4%b9%a0%e6%83%af></a></h4><ul><li>见名知义，用英文单词命名，并体现出实际作用，不要用简写，如：ATM</li><li>变量名大写</li><li>局部变量小写</li><li>函数名小写</li><li>大驼峰StudentFirstName,由多个单词组成，且每个单词的首字母是大写，其它小写</li><li>小驼峰studentFirstName ,由多个单词组成，第一个单词的首字母小写，后续每个单词的首字母是大写，其它小写</li><li>下划线: student_name</li></ul><h3 id=变量定义和引用>变量定义和引用
<a class=header-anchor href=#%e5%8f%98%e9%87%8f%e5%ae%9a%e4%b9%89%e5%92%8c%e5%bc%95%e7%94%a8></a></h3><p>变量的生效范围等标准划分变量类型</p><ul><li>普通变量：生效范围为当前shell进程；对当前shell之外的其它shell进程，包括当前shell的子shell
进程均无效</li><li>环境变量：生效范围为当前shell进程及其子进程</li><li>本地变量：生效范围为当前shell进程中某代码片断，通常指函数
<strong>变量赋值：</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>name=&#39;value&#39;
</span></span></code></pre></div><p>value 可以是以下多种形式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>直接字串：</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;root&#39;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>变量引用：</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$USER&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>命令引用：</span>name<span style=color:#f92672>=`</span>COMMAND<span style=color:#f92672>`</span> <span style=color:#960050;background-color:#1e0010>或者</span> name<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>$</span>(COMMAND)
</span></span></code></pre></div><p>注意：变量赋值是临时生效，当退出终端后，变量会自动删除，无法持久保存，脚本中的变量会随着脚
本结束，也会自动删除
<strong>变量引用：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$name
</span></span><span style=display:flex><span>${name}
</span></span></code></pre></div><p>弱引用和强引用</p><ul><li>&ldquo;$name&rdquo; 弱引用，其中的变量引用会被替换为变量值</li><li>&lsquo;*$name&rsquo; 强引用，其中的变量引用不会被替换为变量值，而保持原字符串<br>范例：变量的各种赋值方式和引用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-mysql data-lang=mysql><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#TITLE=&#39;cto&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $TITLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>cto
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo I am $TITLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>I am cto
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#34;I am $TITLE&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>I am cto
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#39;I am $TITLE&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>I am <span style=color:#960050;background-color:#1e0010>$</span>TITLE
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#NAME=$USER
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $NAME
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>root
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#USER=`whoami`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $USER
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>root
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#FILE=`ls /run`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $FILE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>agetty.reload atd.pid auditd.pid autofs.fifo<span style=color:#f92672>-</span>misc autofs.fifo<span style=color:#f92672>-</span>net console
</span></span><span style=display:flex><span>cron.reboot cryptsetup dbus faillock fsck initctl initramfs <span style=color:#66d9ef>lock</span> log mount
</span></span><span style=display:flex><span>NetworkManager plymouth rsyslogd.pid screen sepermit setrans sshd.pid sssd.pid
</span></span><span style=display:flex><span>sudo systemd tmpfiles.d tuned udev <span style=color:#66d9ef>user</span> utmp vmware
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#FILE=/etc/*
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $FILE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>adjtime <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>aliases <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>alternatives <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>anacrontab <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>at.deny
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>audit <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>authselect <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>autofs.conf <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>autofs_ldap_auth.conf
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#seq 10
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#NUM=`seq 10`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $NUM
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#34;$NUM&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#NAMES=&#34;wang
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>&gt;</span> zhang
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> zhao
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> li<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[root@centos8 ~]#echo $NAMES
</span></span></span><span style=display:flex><span><span style=color:#e6db74>wang zhang zhao li
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[root@centos8 ~]#echo &#34;</span><span style=color:#960050;background-color:#1e0010>$</span>NAMES<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>wang
</span></span></span><span style=display:flex><span><span style=color:#e6db74>zhang
</span></span></span><span style=display:flex><span><span style=color:#e6db74>zhao
</span></span></span><span style=display:flex><span><span style=color:#e6db74>li
</span></span></span></code></pre></div><p>范例：变量引用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 data]#NAME=mage
</span></span><span style=display:flex><span>[root@centos8 data]#AGE=20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>[root@centos8 data]#echo $AGE
</span></span><span style=display:flex><span>20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME $AGE
</span></span><span style=display:flex><span>mage 20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME$AGE
</span></span><span style=display:flex><span>mage20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME_$AGE
</span></span><span style=display:flex><span>20
</span></span><span style=display:flex><span>[root@centos8 data]#echo ${NAME}_$AGE
</span></span><span style=display:flex><span>mage_20
</span></span></code></pre></div><p>范例：变量的间接赋值和引用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#TITLE=cto
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang
</span></span><span style=display:flex><span>[root@centos8 ~]#TITLE=$NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=mage
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>wang
</span></span></code></pre></div><p>范例：变量追加值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#TITLE=CTO
</span></span><span style=display:flex><span>[root@centos8 ~]#TITLE+=:wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>CTO:wang
</span></span></code></pre></div><p>范例：利用变量实现动态命令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#CMD=hostname
</span></span><span style=display:flex><span>[root@centos8 ~]#$CMD
</span></span><span style=display:flex><span>centos8.wangxiaochun.com
</span></span></code></pre></div><p>显示已定义的所有变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>set
</span></span></code></pre></div><p><strong>删除变量：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>unset &lt;name&gt;
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#NAME=mage
</span></span><span style=display:flex><span>[root@centos8 ~]#TITLE=ceo
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME $TITLE
</span></span><span style=display:flex><span>mage ceo
</span></span><span style=display:flex><span>[root@centos8 ~]#unset NAME TITLE
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME $TITLE
</span></span></code></pre></div><p>范例：显示系统信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat systeminfo.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： systeminfo.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： Show system information</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>RED<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\E[1;31m&#34;</span>
</span></span><span style=display:flex><span>GREEN<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;echo -e \E[1;32m&#34;</span>
</span></span><span style=display:flex><span>END<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\E[0m&#34;</span>
</span></span><span style=display:flex><span>. /etc/os-release
</span></span><span style=display:flex><span>$GREEN----------------------Host systeminfo--------------------$END
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;HOSTNAME: </span>$RED<span style=color:#e6db74>`hostname`</span>$END<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#echo -e &#34;IPADDR: $RED` ifconfig eth0|grep -Eo &#39;([0-9]{1,3}\.){3}[0-9]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>1,3<span style=color:#f92672>}</span><span style=color:#e6db74>&#39; |head -n1`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;IPADDR: $RED` hostname -I`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;OSVERSION: $RED$PRETTY_NAME$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;KERNEL: $RED`uname -r`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;CPU: $RED`lscpu|grep &#39;</span>^Model name<span style=color:#e6db74>&#39;|tr -s &#39;</span> <span style=color:#e6db74>&#39;|cut -d : -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;MEMORY: $RED`free -h|grep Mem|tr -s &#39;</span> <span style=color:#e6db74>&#39; : |cut -d : -f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;DISK: $RED`lsblk |grep &#39;</span>^sd<span style=color:#e6db74>&#39; |tr -s &#39;</span> <span style=color:#e6db74>&#39; |cut -d &#34; &#34; -f4`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>$GREEN---------------------------------------------------------$END
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[root@centos8 scripts]#cat system_info.sh
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#********************************************************************
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Author: wangxiaochun
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#QQ: 29308620
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Date: 2019-12-23
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#FileName： systeminfo.sh
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#URL: http://www.magedu.com
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Description： Show system information
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Copyright (C): 2019 All rights reserved
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#********************************************************************
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RED=&#34;\E[1;31m&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>GREEN=&#34;echo -e \E[1;32m&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>END=&#34;\E[0m&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>$GREEN----------------------Host systeminfo--------------------$END
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;HOSTNAME: $RED`hostname`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;IPADDR: $RED` ifconfig eth0|grep -Eo &#39;</span><span style=color:#f92672>([</span>0-9<span style=color:#f92672>]{</span>1,3<span style=color:#f92672>}</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>){</span>3<span style=color:#f92672>}[</span>0-9<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>1,3<span style=color:#f92672>}</span><span style=color:#e6db74>&#39; |head -n1`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;OSVERSION: $RED`cat /etc/redhat-release`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;KERNEL: $RED`uname -r`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;CPU: $RED`lscpu|grep &#39;</span>Model name<span style=color:#e6db74>&#39;|tr -s &#39;</span> <span style=color:#e6db74>&#39;|cut -d : -f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;MEMORY: $RED`free -h|grep Mem|tr -s &#39;</span> <span style=color:#e6db74>&#39; : |cut -d : -f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;DISK: $RED`lsblk |grep &#39;</span>^sd<span style=color:#e6db74>&#39; |tr -s &#39;</span> <span style=color:#960050;background-color:#1e0010>&#39;</span> |cut -d <span style=color:#e6db74>&#34; &#34;</span> -f4<span style=color:#e6db74>`</span>$END<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span>$GREEN<span style=color:#e6db74>---------------------------------------------------------</span>$END<span style=color:#e6db74>
</span></span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat backup.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-05</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description: test</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FILE: backup.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#VERSION: 1.0</span>
</span></span><span style=display:flex><span>COLOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;echo -e \E[1;35m&#39;</span>
</span></span><span style=display:flex><span>END<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\E[0m&#39;</span>
</span></span><span style=display:flex><span>BACKUP<span style=color:#f92672>=</span>/backup
</span></span><span style=display:flex><span>SRC<span style=color:#f92672>=</span>/etc
</span></span><span style=display:flex><span>DATE<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>date +%F<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>COLOR<span style=color:#e6db74>}</span>Starting backup...$END
</span></span><span style=display:flex><span>sleep <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>cp -av $SRC <span style=color:#e6db74>${</span>BACKUP<span style=color:#e6db74>}${</span>SRC<span style=color:#e6db74>}</span>_$DATE
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>COLOR<span style=color:#e6db74>}</span>Backup is finished$END
</span></span></code></pre></div><h4 id=练习>练习：
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0></a></h4><ul><li>1、编写脚本 systeminfo.sh，显示当前主机系统信息，包括:主机名，IPv4地址，操作系统版本，内核
版本，CPU型号，内存大小，硬盘大小</li><li>2、编写脚本 backup.sh，可实现每日将 /etc/ 目录备份到 /backup/etcYYYY-mm-dd中</li><li>3、编写脚本 disk.sh，显示当前硬盘分区中空间利用率最大的值</li><li>4、编写脚本 links.sh，显示正连接本主机的每个远程主机的IPv4地址和连接数，并按连接数从大到小排
序</li></ul><h3 id=环境变量>环境变量
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f></a></h3><p>环境变量：</p><ul><li>可以使子进程（包括孙子进程）继承父进程的变量，但是无法让父进程使用子进程的变量</li><li>一旦子进程修改从父进程继承的变量，将会新的值传递给孙子进程</li><li>一般只在系统配置文件中使用，在脚本中较少使用
变量声明和赋值：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#声明并赋值</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> name<span style=color:#f92672>=</span>VALUE
</span></span><span style=display:flex><span>declare <span style=color:#f92672>-</span>x name<span style=color:#f92672>=</span>VALUE
</span></span><span style=display:flex><span><span style=color:#75715e>#或者分两步实现</span>
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>VALUE
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> name
</span></span></code></pre></div><p>变量引用：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$name
</span></span><span style=display:flex><span>${name}
</span></span></code></pre></div><p>显示所有环境变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>env
</span></span><span style=display:flex><span>printenv
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span>
</span></span><span style=display:flex><span>declare <span style=color:#f92672>-</span>x
</span></span></code></pre></div><p>查看指定进程的环境变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>cat /proc/$PID/environ
</span></span></code></pre></div><p>删除变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>unset name
</span></span></code></pre></div><p>bash内建的环境变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>PATH
</span></span><span style=display:flex><span>SHELL
</span></span><span style=display:flex><span>USER
</span></span><span style=display:flex><span>UID
</span></span><span style=display:flex><span>HOME
</span></span><span style=display:flex><span>PWD
</span></span><span style=display:flex><span>SHLVL #shell的嵌套层数，即深度
</span></span><span style=display:flex><span>LANG
</span></span><span style=display:flex><span>MAIL
</span></span><span style=display:flex><span>HOSTNAME
</span></span><span style=display:flex><span>HISTSIZE
</span></span><span style=display:flex><span>_ #下划线,表示前一命令的最后一个参数
</span></span></code></pre></div><p>范例: 查看进程的环境变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#cat /proc/1235/environ
</span></span><span style=display:flex><span>USER=rootLOGNAME=rootHOME=/rootPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/us
</span></span><span style=display:flex><span>r/binSHELL=/bin/bashTERM=linuxSSH_AUTH_SOCK=/tmp/ssh-
</span></span><span style=display:flex><span>iIeuAxdLiY/agent.1234XDG_SESSION_ID=1XDG_RUNTIME_DIR=/run/user/0DBUS_SESSION_BUS
</span></span><span style=display:flex><span>_ADDRESS=unix:path=/run/user/0/busSSH_CLIENT=10.0.0.1 13258
</span></span><span style=display:flex><span>22SSH_CONNECTION=10.0.0.1 13258 10.0.0.8 22SSH_TTY=/dev/pts/0[root@centos8 ~]#
</span></span><span style=display:flex><span>[root@centos8 ~]#
</span></span><span style=display:flex><span>[root@centos8 ~]#cat /proc/1235/environ |tr &#39;\0&#39; &#39;\n&#39;
</span></span><span style=display:flex><span>USER=root
</span></span><span style=display:flex><span>LOGNAME=root
</span></span><span style=display:flex><span>HOME=/root
</span></span><span style=display:flex><span>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
</span></span><span style=display:flex><span>SHELL=/bin/bash
</span></span><span style=display:flex><span>TERM=linux
</span></span><span style=display:flex><span>SSH_AUTH_SOCK=/tmp/ssh-iIeuAxdLiY/agent.1234
</span></span><span style=display:flex><span>XDG_SESSION_ID=1
</span></span><span style=display:flex><span>XDG_RUNTIME_DIR=/run/user/0
</span></span><span style=display:flex><span>DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/0/bus
</span></span><span style=display:flex><span>SSH_CLIENT=10.0.0.1 13258 22
</span></span><span style=display:flex><span>SSH_CONNECTION=10.0.0.1 13258 10.0.0.8 22
</span></span><span style=display:flex><span>SSH_TTY=/dev/pts/0
</span></span></code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/linux10/ rel=next title=shell脚本编程基础9.2><i class="fa fa-chevron-left"></i> shell脚本编程基础9.2</a></div><div class="post-nav-prev post-nav-item"><a href=/post/linux08/ rel=prev title="正则表达式和文本处理三剑客之 grep8.3">正则表达式和文本处理三剑客之 grep8.3
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"https://www.lanhui.live/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.78a19d71f814f465713a5053077de10bda06a8790a23f2b3c5ac2241d0c135d3.js defer></script></body></html>