<!doctype html><html lang=zh-CN data-theme=light><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="正则表达式和相关工具及文件查找压缩 "><meta itemprop=description content="1208034077#qq.com"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="http://localhost:1313/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux"><meta property="og:type" content="article"><meta property="og:title" content="正则表达式和相关工具及文件查找压缩 "><meta property="og:description" content="1208034077#qq.com"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="http://localhost:1313/post/linux09/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2024-11-29 04:06:00 +0800 CST"><meta property="article:modified_time" content="2024-11-29 04:06:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"linux09","permalink":"http://localhost:1313/post/linux09/","title":"正则表达式和相关工具及文件查找压缩 ","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>正则表达式和相关工具及文件查找压缩 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>79</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#基本正则表达式元字符>基本正则表达式元字符</a><ul><li><a href=#字符匹配>字符匹配</a></li><li><a href=#匹配次数>匹配次数</a></li><li><a href=#位置锚定>位置锚定</a></li><li><a href=#分组其它>分组其它</a><ul><li><a href=#分组>分组</a></li><li><a href=#或者>或者</a></li></ul></li><li><a href=#正则表达式练习>正则表达式练习</a></li></ul></li><li><a href=#扩展正则表达式元字符>扩展正则表达式元字符</a><ul><li><a href=#字符匹配-1>字符匹配</a></li><li><a href=#次数匹配>次数匹配</a></li><li><a href=#位置锚定-1>位置锚定</a></li><li><a href=#分组其它-1>分组其它</a></li><li><a href=#扩展正则表达式练习>扩展正则表达式练习</a></li></ul></li><li><a href=#文件查找>文件查找</a><ul><li><a href=#locate>locate</a></li><li><a href=#find>find</a><ul><li><a href=#常见选项>常见选项：</a></li><li><a href=#指定搜索目录层级>指定搜索目录层级</a></li><li><a href=#对每个目录先处理目录内的文件再处理目录本身>对每个目录先处理目录内的文件，再处理目录本身</a></li><li><a href=#根据文件名和inode查找>根据文件名和inode查找</a></li><li><a href=#根据属主属组查找>根据属主、属组查找</a></li><li><a href=#根据文件类型查找>根据文件类型查找</a></li><li><a href=#空文件或目录>空文件或目录</a></li><li><a href=#组合条件>组合条件</a></li><li><a href=#排除目录>排除目录</a></li><li><a href=#根据文件大小来查找>根据文件大小来查找</a></li><li><a href=#根据时间戳>根据时间戳</a></li><li><a href=#根据权限查找>根据权限查找</a></li><li><a href=#正则表达式-1>正则表达式</a></li><li><a href=#处理动作>处理动作</a></li></ul></li></ul></li><li><a href=#参数替换-xargs>参数替换 xargs</a><ul><li><a href=#练习>练习</a></li></ul></li><li><a href=#压缩和解压缩>压缩和解压缩</a><ul><li><a href=#compress-和-uncompress>compress 和 uncompress</a></li><li><a href=#gzip和gunzip>gzip和gunzip</a></li><li><a href=#bzip2和bunzip2>bzip2和bunzip2</a></li><li><a href=#xz-和-unxz>xz 和 unxz</a></li><li><a href=#zip-和-unzip>zip 和 unzip</a><ul><li><a href=#加密和解密>加密和解密</a></li></ul></li></ul></li><li><a href=#打包和解包>打包和解包</a><ul><li><a href=#tar>tar</a></li></ul></li><li><a href=#split>split</a></li><li><a href=#报告文件系统磁盘使用情况>报告文件系统磁盘使用情况</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>1208034077#qq.com</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>79</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>55</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=136474></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=318></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-15T20:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=http://localhost:1313/post/linux09/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="1208034077#qq.com"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="正则表达式和相关工具及文件查找压缩 "><meta itemprop=description content="正则表达式 REGEXP： Regular Expressions，由一类特殊字符及文本字符所编写的模式，其中有些字符（元字符） 不表示字符字面意义，而表示控制"></span><header class=post-header><h1 class=post-title itemprop="name headline">正则表达式和相关工具及文件查找压缩</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-11-29 04:06:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-11-29 04:06:00 +0800 CST">2024-11-29
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/linux itemprop=url rel=index><span itemprop=name>linux</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><h1 id=正则表达式>正则表达式
<a class=header-anchor href=#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f></a></h1><p>REGEXP： Regular Expressions，由一类特殊字符及文本字符所编写的模式，其中有些字符（元字符）
不表示字符字面意义，而表示控制或通配的功能，类似于增强版的通配符功能，但与通配符不同，通配符功能是用来处理文件名，而正则表达式是处理文本内容中字符。<br>正则表达式被很多程序和开发语言所广泛支持：vim, less,grep,sed,awk, nginx,mysql 等<br>正则表达式分两类：<br>基本正则表达式：BRE Basic Regular Expressions<br>扩展正则表达式：ERE Extended Regular Expressions<br>正则表达式引擎：<br>采用不同算法，检查处理正则表达式的软件模块，如：PCRE（Perl Compatible Regular<br>Expressions）<br>正则表达式的元字符分类：字符匹配、匹配次数、位置锚定、分组<br>帮助：man 7 regex</p><h2 id=基本正则表达式元字符>基本正则表达式元字符
<a class=header-anchor href=#%e5%9f%ba%e6%9c%ac%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e5%85%83%e5%ad%97%e7%ac%a6></a></h2><h3 id=字符匹配>字符匹配
<a class=header-anchor href=#%e5%ad%97%e7%ac%a6%e5%8c%b9%e9%85%8d></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>. 匹配任意单个字符(除了\n)，可以是一个汉字或其它国家的文字
</span></span><span style=display:flex><span>[] 匹配指定范围内的任意单个字符，示例：[wang] [0-9] [a-z] [a-zA-Z]
</span></span><span style=display:flex><span>[^] 匹配指定范围外的任意单个字符,示例：[^wang]
</span></span><span style=display:flex><span>[:alnum:] 字母和数字
</span></span><span style=display:flex><span>[:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z
</span></span><span style=display:flex><span>[:lower:] 小写字母,示例:[[:lower:]],相当于[a-z]
</span></span><span style=display:flex><span>[:upper:] 大写字母
</span></span><span style=display:flex><span>[:blank:] 空白字符（空格和制表符）
</span></span><span style=display:flex><span>[:space:] 包括空格、制表符(水平和垂直)、换行符、回车符等各种类型的空白,比[:blank:]包含的范围
</span></span><span style=display:flex><span>广
</span></span><span style=display:flex><span>[:cntrl:] 不可打印的控制字符（退格、删除、警铃...）
</span></span><span style=display:flex><span>[:digit:] 十进制数字
</span></span><span style=display:flex><span>[:xdigit:]十六进制数字
</span></span><span style=display:flex><span>[:graph:] 可打印的非空白字符
</span></span><span style=display:flex><span>[:print:] 可打印字符
</span></span><span style=display:flex><span>[:punct:] 标点符号
</span></span><span style=display:flex><span>-----------------
</span></span><span style=display:flex><span>\s #匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [\f\r\t\v]。注意 Unicode
</span></span><span style=display:flex><span>正则表达式会匹配全角空格符
</span></span><span style=display:flex><span>\S #匹配任何非空白字符。等价于 [^\f\r\t\v]
</span></span><span style=display:flex><span>\w #匹配一个字母,数字,下划线,汉字,其它国家文字的字符，等价于[_[:alnum:]字]
</span></span><span style=display:flex><span>\W #匹配一个非字母,数字,下划线,汉字,其它国家文字的字符，等价于[^_[:alnum:]字]
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#ls /etc/ | grep &#39;rc[.0-6]&#39;
</span></span><span style=display:flex><span>rc0.d
</span></span><span style=display:flex><span>rc1.d
</span></span><span style=display:flex><span>rc2.d
</span></span><span style=display:flex><span>rc3.d
</span></span><span style=display:flex><span>rc4.d
</span></span><span style=display:flex><span>rc5.d
</span></span><span style=display:flex><span>rc6.d
</span></span><span style=display:flex><span>rc.d
</span></span><span style=display:flex><span>rc.local
</span></span><span style=display:flex><span>[root@centos8 ~]#ls /etc/ | grep &#39;rc[.0-6].&#39;
</span></span><span style=display:flex><span>rc0.d
</span></span><span style=display:flex><span>rc1.d
</span></span><span style=display:flex><span>rc2.d
</span></span><span style=display:flex><span>rc3.d
</span></span><span style=display:flex><span>rc4.d
</span></span><span style=display:flex><span>rc5.d
</span></span><span style=display:flex><span>rc6.d
</span></span><span style=display:flex><span>rc.d
</span></span><span style=display:flex><span>rc.local
</span></span><span style=display:flex><span>[root@centos8 ~]#ls /etc/ | grep &#39;rc[.0-6]\.&#39;
</span></span><span style=display:flex><span>rc0.d
</span></span><span style=display:flex><span>rc1.d
</span></span><span style=display:flex><span>rc2.d
</span></span><span style=display:flex><span>rc3.d
</span></span><span style=display:flex><span>rc4.d
</span></span><span style=display:flex><span>rc5.d
</span></span><span style=display:flex><span>rc6.d
</span></span></code></pre></div><h3 id=匹配次数>匹配次数
<a class=header-anchor href=#%e5%8c%b9%e9%85%8d%e6%ac%a1%e6%95%b0></a></h3><p>用在要指定次数的字符后面，用于指定前面的字符要出现的次数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>* #匹配前面的字符任意次，包括0次，贪婪模式：尽可能长的匹配
</span></span><span style=display:flex><span>.* #任意长度的任意字符
</span></span><span style=display:flex><span>\? #匹配其前面的字符出现0次或1次,即:可有可无
</span></span><span style=display:flex><span>\+ #匹配其前面的字符出现最少1次,即:肯定有且 &gt;=1 次
</span></span><span style=display:flex><span>\{n\} #匹配前面的字符n次
</span></span><span style=display:flex><span>\{m,n\} #匹配前面的字符至少m次，至多n次
</span></span><span style=display:flex><span>\{,n\} #匹配前面的字符至多n次,&lt;=n
</span></span><span style=display:flex><span>\{n,\} #匹配前面的字符至少n次
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#cat test.txt
</span></span><span style=display:flex><span>google
</span></span><span style=display:flex><span>goooooooooooooooooogle
</span></span><span style=display:flex><span>ggle
</span></span><span style=display:flex><span>gogle
</span></span><span style=display:flex><span>gooooOOOOO00000gle
</span></span><span style=display:flex><span>gooogle
</span></span><span style=display:flex><span>[root@centos8 ~]#grep &#39;go\{2,\}gle&#39; test.txt
</span></span><span style=display:flex><span>google
</span></span><span style=display:flex><span>goooooooooooooooooogle
</span></span><span style=display:flex><span>gooogle
</span></span><span style=display:flex><span>[root@centos8 ~]#grep &#39;goo\+gle&#39; test.txt
</span></span><span style=display:flex><span>google
</span></span><span style=display:flex><span>goooooooooooooooooogle
</span></span><span style=display:flex><span>gooogle
</span></span><span style=display:flex><span>[root@centos8 ~]#grep &#39;goo*gle&#39; test.txt
</span></span><span style=display:flex><span>google
</span></span><span style=display:flex><span>goooooooooooooooooogle
</span></span><span style=display:flex><span>gogle
</span></span><span style=display:flex><span>gooogle
</span></span><span style=display:flex><span>[root@centos8 ~]#grep &#39;gooo*gle&#39; test.txt
</span></span><span style=display:flex><span>google
</span></span><span style=display:flex><span>goooooooooooooooooogle
</span></span><span style=display:flex><span>gooogle
</span></span></code></pre></div><p>范例: 匹配正负数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#echo -1 -2 123 -123 234 |grep &#39;-\?[0-9]\+&#39;
</span></span><span style=display:flex><span>grep: invalid option -- &#39;\&#39;
</span></span><span style=display:flex><span>Usage: grep [OPTION]... PATTERN [FILE]...
</span></span><span style=display:flex><span>Try &#39;grep --help&#39; for more information.
</span></span><span style=display:flex><span>[root@centos8 ~]#echo -1 -2 123 -123 234 |grep &#39;\-\?[0-9]\+&#39;
</span></span><span style=display:flex><span>-1 -2 123 -123 234
</span></span><span style=display:flex><span>[root@centos8 ~]#echo -1 -2 123 -123 234 |grep -E &#39;-?[0-9]+&#39;
</span></span><span style=display:flex><span>grep: invalid option -- &#39;?&#39;
</span></span><span style=display:flex><span>Usage: grep [OPTION]... PATTERN [FILE]...
</span></span><span style=display:flex><span>Try &#39;grep --help&#39; for more information.
</span></span><span style=display:flex><span>[root@centos8 ~]#echo -1 -2 123 -123 234 |grep -E &#39;\-?[0-9]+&#39;
</span></span><span style=display:flex><span>-1 -2 123 -123 234
</span></span><span style=display:flex><span>[root@centos8 ~]#echo -1 -2 123 -123 234 |grep -E -- &#39;-?[0-9]+&#39;
</span></span><span style=display:flex><span>-1 -2 123 -123 234
</span></span><span style=display:flex><span>[root@centos8 ~]#echo -1 -2 123 -123 234 |grep -E &#39;(-)?[0-9]+&#39;
</span></span><span style=display:flex><span>-1 -2 123 -123 234
</span></span></code></pre></div><p>范例: 取IP地址</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky9 ~]# ifconfig ens160
</span></span><span style=display:flex><span>ens160: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
</span></span><span style=display:flex><span>        inet 10.0.0.131  netmask 255.255.255.0  broadcast 10.0.0.255
</span></span><span style=display:flex><span>        inet6 fe80::20c:29ff:fe0f:3d9d  prefixlen 64  scopeid 0x20&lt;link&gt;
</span></span><span style=display:flex><span>        ether 00:0c:29:0f:3d:9d  txqueuelen 1000  (Ethernet)
</span></span><span style=display:flex><span>        RX packets 1770  bytes 158243 (154.5 KiB)
</span></span><span style=display:flex><span>        RX errors 0  dropped 0  overruns 0  frame 0
</span></span><span style=display:flex><span>        TX packets 2849  bytes 335686 (327.8 KiB)
</span></span><span style=display:flex><span>        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</span></span></code></pre></div><h3 id=位置锚定>位置锚定
<a class=header-anchor href=#%e4%bd%8d%e7%bd%ae%e9%94%9a%e5%ae%9a></a></h3><p>位置锚定可以用于定位出现的位置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>^ #行首锚定, 用于模式的最左侧
</span></span><span style=display:flex><span>$ #行尾锚定，用于模式的最右侧
</span></span><span style=display:flex><span>^PATTERN$ #用于模式匹配整行
</span></span><span style=display:flex><span>^$ #空行
</span></span><span style=display:flex><span>^[[:space:]]*$ #空白行
</span></span><span style=display:flex><span>\&lt; 或 \b #词首锚定，用于单词模式的左侧
</span></span><span style=display:flex><span>\&gt; 或 \b #词尾锚定，用于单词模式的右侧
</span></span><span style=display:flex><span>\&lt;PATTERN\&gt; #匹配整个单词
</span></span><span style=display:flex><span>#注意: 单词是由字母,数字,下划线组成
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#grep &#39;^[^#]&#39; /etc/fstab
</span></span><span style=display:flex><span>UUID=acf9bd1f-caae-4e28-87be-e53afec61347 / xfs
</span></span><span style=display:flex><span>defaults 0 0
</span></span><span style=display:flex><span>UUID=1770b87e-db5a-445e-bff1-1653ac64b3d6 /boot ext4
</span></span><span style=display:flex><span>defaults 1 2
</span></span><span style=display:flex><span>UUID=ffffd919-d674-44d9-a4e7-402874f0a1f0 /data xfs
</span></span><span style=display:flex><span>defaults 0 0
</span></span><span style=display:flex><span>UUID=409e36d2-ac5e-423f-ad78-9b12db4576bd swap swap
</span></span><span style=display:flex><span>defaults 0 0
</span></span></code></pre></div><p>范例：排除掉空行和#开头的行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#grep -v &#39;^$&#39; /etc/profile|grep -v &#39;^#&#39;
</span></span><span style=display:flex><span>[root@centos8 ~]#grep &#39;^[^#]&#39; /etc/profile
</span></span><span style=display:flex><span>[root@centos8 ~]#grep -v &#39;^$\|#&#39; /etc/profile
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky9 etc]# echo root | grep &#39;\&lt;root&#39;
</span></span><span style=display:flex><span>root
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo rooter | grep &#39;\&lt;root&#39;
</span></span><span style=display:flex><span>rooter
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo -rooter | grep &#39;\&lt;root&#39;
</span></span><span style=display:flex><span>-rooter
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo aaaroot | grep &#39;root\&gt;&#39;
</span></span><span style=display:flex><span>aaaroot
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo -root: | grep &#39;\root\&gt;&#39;
</span></span><span style=display:flex><span>-root:
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky9 etc]# df |grep &#39;^/dev&#39; |grep -o &#39; *[0-9]\{1,3\}%&#39;
</span></span><span style=display:flex><span>   3%
</span></span><span style=display:flex><span>  32%
</span></span><span style=display:flex><span>   1%
</span></span></code></pre></div><h3 id=分组其它>分组其它
<a class=header-anchor href=#%e5%88%86%e7%bb%84%e5%85%b6%e5%ae%83></a></h3><h4 id=分组>分组
<a class=header-anchor href=#%e5%88%86%e7%bb%84></a></h4><p>分组：() 将多个字符捆绑在一起，当作一个整体处理.如：(root)+<br>后向引用：分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名<br>方式为: \1, \2, \3, &mldr;<br>\1 表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符<br>注意: \0 表示正则表达式匹配的所有字符<br>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky9 etc]# echo ooo | grep &#39;o\{3\}&#39;
</span></span><span style=display:flex><span>ooo
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo oooo | grep &#39;o\{3\}&#39;
</span></span><span style=display:flex><span>oooo
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo abcabcabc | grep &#39;abc\{3\}&#39;
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo abcabcabccc | grep &#39;abc\{3\}&#39;
</span></span><span style=display:flex><span>abcabcabccc
</span></span><span style=display:flex><span>[root@rocky9 etc]# echo abcabcabc | grep &#39;\(abc\)\{3\}&#39;
</span></span><span style=display:flex><span>abcabcabc
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>\(string1\(string2\)\)
</span></span><span style=display:flex><span>\1 ：string1\(string2\)
</span></span><span style=display:flex><span>\2 ：string2
</span></span></code></pre></div><p>注意： &lsquo;后向引用&rsquo; <strong>引用前面的分组括号中的模式所匹配字符</strong>，而非模式本身.s</p><h4 id=或者>或者
<a class=header-anchor href=#%e6%88%96%e8%80%85></a></h4><p>或者：|<br>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>a\|b #a或b
</span></span><span style=display:flex><span>C\|cat #C或cat
</span></span><span style=display:flex><span>\(C\|c\)at #Cat或cat
</span></span></code></pre></div><p>范例：排除空行和#开头的行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos6 ~]#grep -v &#39;^#&#39; /etc/httpd/conf/httpd.conf |grep -v ^$
</span></span><span style=display:flex><span>[root@centos6 ~]#grep -v &#39;^#\|^$&#39; /etc/httpd/conf/httpd.conf
</span></span><span style=display:flex><span>[root@centos6 ~]#grep -v &#39;^\(#\|$\)&#39; /etc/httpd/conf/httpd.conf
</span></span><span style=display:flex><span>[root@centos6 ~]#grep &#34;^[^#]&#34; /etc/httpd/conf/httpd.conf
</span></span></code></pre></div><h3 id=正则表达式练习>正则表达式练习
<a class=header-anchor href=#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%bb%83%e4%b9%a0></a></h3><p>1、显示/proc/meminfo文件中以大小s开头的行(要求：使用两种方法)<br>2、显示/etc/passwd文件中不以/bin/bash结尾的行<br>3、显示用户rpc默认的shell程序<br>4、找出/etc/passwd中的两位或三位数<br>5、显示CentOS7的/etc/grub2.cfg文件中，至少以一个空白字符开头的且后面有非空白字符的行<br>6、找出“netstat -tan”命令结果中以LISTEN后跟任意多个空白字符结尾的行<br>7、显示CentOS7上所有UID小于1000以内的用户名和UID<br>8、添加用户bash、testbash、basher、sh、nologin(其shell为/sbin/nologin),找出/etc/passwd用户
名和shell同名的行<br>9、利用df和grep，取出磁盘各分区利用率，并从大到小排序</p><h2 id=扩展正则表达式元字符>扩展正则表达式元字符
<a class=header-anchor href=#%e6%89%a9%e5%b1%95%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e5%85%83%e5%ad%97%e7%ac%a6></a></h2><h3 id=字符匹配-1>字符匹配
<a class=header-anchor href=#%e5%ad%97%e7%ac%a6%e5%8c%b9%e9%85%8d-1></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>. 任意单个字符
</span></span><span style=display:flex><span>[wang] 指定范围的字符
</span></span><span style=display:flex><span>[^wang] 不在指定范围的字符
</span></span><span style=display:flex><span>[:alnum:] 字母和数字
</span></span><span style=display:flex><span>[:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z
</span></span><span style=display:flex><span>[:lower:] 小写字母,示例:[[:lower:]],相当于[a-z]
</span></span><span style=display:flex><span>[:upper:] 大写字母
</span></span><span style=display:flex><span>[:blank:] 空白字符（空格和制表符）
</span></span><span style=display:flex><span>[:space:] 水平和垂直的空白字符（比[:blank:]包含的范围广）
</span></span><span style=display:flex><span>[:cntrl:] 不可打印的控制字符（退格、删除、警铃...）
</span></span><span style=display:flex><span>[:digit:] 十进制数字
</span></span><span style=display:flex><span>[:xdigit:]十六进制数字
</span></span><span style=display:flex><span>[:graph:] 可打印的非空白字符
</span></span><span style=display:flex><span>[:print:] 可打印字符
</span></span><span style=display:flex><span>[:punct:] 标点符号
</span></span></code></pre></div><h3 id=次数匹配>次数匹配
<a class=header-anchor href=#%e6%ac%a1%e6%95%b0%e5%8c%b9%e9%85%8d></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>* 匹配前面字符任意次
</span></span><span style=display:flex><span>? 0或1次
</span></span><span style=display:flex><span>+ 1次或多次
</span></span><span style=display:flex><span>{n} 匹配n次
</span></span><span style=display:flex><span>{m,n} 至少m，至多n次
</span></span></code></pre></div><h3 id=位置锚定-1>位置锚定
<a class=header-anchor href=#%e4%bd%8d%e7%bd%ae%e9%94%9a%e5%ae%9a-1></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>^ 行首
</span></span><span style=display:flex><span>$ 行尾
</span></span><span style=display:flex><span>\&lt;, \b 语首
</span></span><span style=display:flex><span>\&gt;, \b 语尾
</span></span></code></pre></div><h3 id=分组其它-1>分组其它
<a class=header-anchor href=#%e5%88%86%e7%bb%84%e5%85%b6%e5%ae%83-1></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>() 分组
</span></span><span style=display:flex><span>后向引用：\1, \2, ... 注意: \0 表示正则表达式匹配的所有字符
</span></span><span style=display:flex><span>| 或者
</span></span><span style=display:flex><span>a|b #a或b
</span></span><span style=display:flex><span>C|cat #C或cat
</span></span><span style=display:flex><span>(C|c)at #Cat或cat
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#ifconfig | grep -Ewo &#34;(([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-
</span></span><span style=display:flex><span>5])\.){3}([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])&#34;|head -n1
</span></span><span style=display:flex><span>10.0.0.8
</span></span></code></pre></div><h3 id=扩展正则表达式练习>扩展正则表达式练习
<a class=header-anchor href=#%e6%89%a9%e5%b1%95%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%bb%83%e4%b9%a0></a></h3><p>1、显示三个用户root、mage、wang的UID和默认shell<br>2、找出/etc/rc.d/init.d/functions文件中行首为某单词(包括下划线)后面跟一个小括号的行<br>3、使用egrep取出/etc/rc.d/init.d/functions中其基名<br>4、使用egrep取出上面路径的目录名<br>5、统计last命令中以root登录的每个主机IP地址登录次数<br>6、利用扩展正则表达式分别表示0-9、10-99、100-199、200-249、250-255<br>7、显示ifconfig命令结果中所有IPv4地址<br>8、将此字符串：welcome to magedu linux 中的每个字符去重并排序，重复次数多的排到前面</p><h2 id=文件查找>文件查找
<a class=header-anchor href=#%e6%96%87%e4%bb%b6%e6%9f%a5%e6%89%be></a></h2><p>在文件系统上查找符合条件的文件<br>文件查找：<br>非实时查找(数据库查找)：locate<br>实时查找：find</p><h3 id=locate>locate
<a class=header-anchor href=#locate></a></h3><ul><li>locate 查询系统上预建的文件索引数据库 /var/lib/mlocate/mlocate.db</li><li>索引的构建是在系统较为空闲时自动进行(周期性任务)，执行updatedb可以更新数据库</li><li>索引构建过程需要遍历整个根文件系统，很消耗资源</li><li>locate和updatedb命令来自于mlocate包
<strong>工作特点:</strong></li><li>查找速度快</li><li>模糊查找</li><li>非实时查找</li><li>搜索的是文件的全路径，不仅仅是文件名</li><li>可能只搜索用户具备读取和执行权限的目录
格式：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>locate [OPTION]... [PATTERN]...
</span></span></code></pre></div><p>常用选项<br>-i 不区分大小写的搜索<br>-n N 只列举前N个匹配项目<br>-r 使用基本正则表达式<br>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#搜索名称或路径中包含“conf&#34;的文件
</span></span><span style=display:flex><span>locate conf
</span></span><span style=display:flex><span>#使用Regex来搜索以“.conf&#34;结尾的文件
</span></span><span style=display:flex><span>locate -r &#39;\.conf$&#39;
</span></span><span style=display:flex><span>## 更新locate数据库
</span></span><span style=display:flex><span>updatedb 
</span></span></code></pre></div><p>范例: locatedb创建数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#dnf -y install mlocate</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate conf</span>
</span></span><span style=display:flex><span>locate: can <span style=color:#f92672>not</span> stat () <span style=color:#960050;background-color:#1e0010>`</span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>mlocate<span style=color:#f92672>/</span>mlocate<span style=color:#f92672>.</span>db<span style=color:#e6db74>&#39;: No such file or directory</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#updatedb</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#ll /var/lib/mlocate/mlocate.db</span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span>rw<span style=color:#f92672>-</span>r<span style=color:#f92672>-----</span> <span style=color:#ae81ff>1</span> root slocate <span style=color:#ae81ff>1041065</span> Jun <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>20</span>:<span style=color:#ae81ff>08</span> <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>mlocate<span style=color:#f92672>/</span>mlocate<span style=color:#f92672>.</span>db
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate -n 3 conf</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>boot<span style=color:#f92672>/</span>config<span style=color:#f92672>-</span><span style=color:#ae81ff>4.18</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>147.</span>el8<span style=color:#f92672>.</span>x86_64
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>boot<span style=color:#f92672>/</span>grub2<span style=color:#f92672>/</span>i386<span style=color:#f92672>-</span>pc<span style=color:#f92672>/</span>configfile<span style=color:#f92672>.</span>mod
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>boot<span style=color:#f92672>/</span>loader<span style=color:#f92672>/</span>entries<span style=color:#f92672>/</span><span style=color:#ae81ff>5</span>b85fc7444b240a992c42ce2a9f65db5<span style=color:#f92672>-</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span>rescue<span style=color:#f92672>.</span>conf
</span></span></code></pre></div><p>范例: 文件新创建和删除,无法马上更新locate数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#touch test.log</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate test.log</span>
</span></span><span style=display:flex><span>locate: can <span style=color:#f92672>not</span> stat () <span style=color:#960050;background-color:#1e0010>`</span><span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>mlocate<span style=color:#f92672>/</span>mlocate<span style=color:#f92672>.</span>db<span style=color:#e6db74>&#39;: No such file or directory</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#updatedb</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate test.log</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>root<span style=color:#f92672>/</span>test<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#touch test2.log</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate test2.log</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#updatedb</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate test2.log</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>root<span style=color:#f92672>/</span>test2<span style=color:#f92672>.</span>log
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#rm -f test2.log</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate test2.log</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>root<span style=color:#f92672>/</span>test2<span style=color:#f92672>.</span>log
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#locate -n 10 -ir &#39;\.CONF$&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>boot<span style=color:#f92672>/</span>loader<span style=color:#f92672>/</span>entries<span style=color:#f92672>/</span><span style=color:#ae81ff>5</span>b85fc7444b240a992c42ce2a9f65db5<span style=color:#f92672>-</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span>rescue<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>boot<span style=color:#f92672>/</span>loader<span style=color:#f92672>/</span>entries<span style=color:#f92672>/</span><span style=color:#ae81ff>5</span>b85fc7444b240a992c42ce2a9f65db5<span style=color:#f92672>-</span><span style=color:#ae81ff>4.18</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>147.</span>el8<span style=color:#f92672>.</span>x86_64<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>autofs<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>autofs_ldap_auth<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>dracut<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>fuse<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>host<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>idmapd<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>kdump<span style=color:#f92672>.</span>conf
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>krb5<span style=color:#f92672>.</span>conf
</span></span></code></pre></div><h3 id=find>find
<a class=header-anchor href=#find></a></h3><p>find 是实时查找工具，通过遍历指定路径完成文件查找<br>工作特点：</p><ul><li>查找速度略慢</li><li>精确查找</li><li>实时查找</li><li>查找条件丰富</li><li>可能只搜索用户具备读取和执行权限的目录
格式：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>find [OPTION]... [查找路径] [查找条件] [处理动作]
</span></span></code></pre></div><p>查找路径：指定具体目标路径；默认为当前目录<br>查找条件：指定的查找标准，可以文件名、大小、类型、权限等标准进行；默认为找出指定路径下的所
有文件<br>处理动作：对符合条件的文件做操作，默认输出至屏幕</p><h4 id=常见选项>常见选项：
<a class=header-anchor href=#%e5%b8%b8%e8%a7%81%e9%80%89%e9%a1%b9></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-name：按照文件名查找文件。
</span></span><span style=display:flex><span>-type：按照文件类型查找文件，如f（普通文件）、d（目录）、l（符号链接）等。
</span></span><span style=display:flex><span>-size：按照文件大小查找文件，可以使用c（字节）、k（千字节）、M（兆字节）等单位。
</span></span><span style=display:flex><span>-mtime：按照文件最后修改时间查找文件，后面跟天数。
</span></span><span style=display:flex><span>-atime：按照文件最后访问时间查找文件，后面跟天数。
</span></span><span style=display:flex><span>-ctime：按照文件状态改变时间查找文件，后面跟天数。
</span></span><span style=display:flex><span>-perm：按照文件权限查找文件。
</span></span><span style=display:flex><span>-user：按照文件所有者查找文件。
</span></span><span style=display:flex><span>-group：按照文件所属组查找文件。
</span></span><span style=display:flex><span>-exec：对找到的文件执行指定的命令。
</span></span><span style=display:flex><span>-ok：与-exec类似，但在执行命令前会询问用户。
</span></span><span style=display:flex><span>-print：默认选项，打印找到的文件路径。
</span></span><span style=display:flex><span>-delete：删除找到的文件。
</span></span><span style=display:flex><span>-empty：查找空文件或目录。
</span></span><span style=display:flex><span>-path：按照路径模式查找文件。
</span></span><span style=display:flex><span>-regex：按照正则表达式查找文件名。
</span></span><span style=display:flex><span>这些选项可以组合使用，以实现更复杂的搜索条件。例如，要查找过去7天内被修改过的所有普通文件，可以使用以下命令：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bash find /path/to/search -type f -mtime -7
</span></span></code></pre></div><h4 id=指定搜索目录层级>指定搜索目录层级
<a class=header-anchor href=#%e6%8c%87%e5%ae%9a%e6%90%9c%e7%b4%a2%e7%9b%ae%e5%bd%95%e5%b1%82%e7%ba%a7></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-maxdepth level 最大搜索目录深度,指定目录下的文件为第1级
</span></span><span style=display:flex><span>-mindepth level 最小搜索目录深度
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>find /etc -maxdepth 2 -mindepth 2
</span></span></code></pre></div><h4 id=对每个目录先处理目录内的文件再处理目录本身>对每个目录先处理目录内的文件，再处理目录本身
<a class=header-anchor href=#%e5%af%b9%e6%af%8f%e4%b8%aa%e7%9b%ae%e5%bd%95%e5%85%88%e5%a4%84%e7%90%86%e7%9b%ae%e5%bd%95%e5%86%85%e7%9a%84%e6%96%87%e4%bb%b6%e5%86%8d%e5%a4%84%e7%90%86%e7%9b%ae%e5%bd%95%e6%9c%ac%e8%ba%ab></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-depth
</span></span><span style=display:flex><span>-d #warning: the -d option is deprecated; please use -depth instead, because the
</span></span><span style=display:flex><span>latter is a POSIX-compliant feature
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 data]#tree /data/test
</span></span><span style=display:flex><span>/data/test
</span></span><span style=display:flex><span>├── f1.txt
</span></span><span style=display:flex><span>├── f2.txt
</span></span><span style=display:flex><span>└── test2
</span></span><span style=display:flex><span>└── test3
</span></span><span style=display:flex><span>├── f3.txt
</span></span><span style=display:flex><span>└── f4.txt
</span></span><span style=display:flex><span>4 directories, 2 files
</span></span><span style=display:flex><span>[root@centos8 data]#find /data/test
</span></span><span style=display:flex><span>/data/test
</span></span><span style=display:flex><span>/data/test/f1.txt
</span></span><span style=display:flex><span>/data/test/f2.txt
</span></span><span style=display:flex><span>/data/test/test2
</span></span><span style=display:flex><span>/data/test/test2/test3
</span></span><span style=display:flex><span>/data/test/test2/test3/f3.txt
</span></span><span style=display:flex><span>/data/test/test2/test3/f4.txt
</span></span><span style=display:flex><span>[root@centos8 data]#find /data/test -depth
</span></span><span style=display:flex><span>/data/test/f1.txt
</span></span><span style=display:flex><span>/data/test/f2.txt
</span></span><span style=display:flex><span>/data/test/test2/test3/f3.txt
</span></span><span style=display:flex><span>/data/test/test2/test3/f4.txt
</span></span><span style=display:flex><span>/data/test/test2/test3
</span></span><span style=display:flex><span>/data/test/test2
</span></span><span style=display:flex><span>/data/test
</span></span></code></pre></div><h4 id=根据文件名和inode查找>根据文件名和inode查找
<a class=header-anchor href=#%e6%a0%b9%e6%8d%ae%e6%96%87%e4%bb%b6%e5%90%8d%e5%92%8cinode%e6%9f%a5%e6%89%be></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-name &#34;文件名称&#34; #支持使用glob，如：*, ?, [], [^],通配符要加双引号引起来
</span></span><span style=display:flex><span>-iname &#34;文件名称&#34; #不区分字母大小写
</span></span><span style=display:flex><span>-inum n #按inode号查找
</span></span><span style=display:flex><span>-samefile name #相同inode号的文件
</span></span><span style=display:flex><span>-links n #链接数为n的文件
</span></span><span style=display:flex><span>-regex “PATTERN&#34; #以PATTERN匹配整个文件路径，而非文件名称
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>find <span style=color:#f92672>-</span>name snow<span style=color:#f92672>.</span>png
</span></span><span style=display:flex><span>find <span style=color:#f92672>-</span>iname snow<span style=color:#f92672>.</span>png
</span></span><span style=display:flex><span>find <span style=color:#f92672>/</span> <span style=color:#f92672>-</span>name <span style=color:#e6db74>&#34;.txt&#34;</span>
</span></span><span style=display:flex><span>find <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span> <span style=color:#960050;background-color:#1e0010>–</span>name <span style=color:#e6db74>&#34;log*&#34;</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 data]<span style=color:#75715e>#find -regex &#34;.*\.txt$&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>./</span>scripts<span style=color:#f92672>/</span>b<span style=color:#f92672>.</span>txt
</span></span><span style=display:flex><span><span style=color:#f92672>./</span>f1<span style=color:#f92672>.</span>txt
</span></span></code></pre></div><h4 id=根据属主属组查找>根据属主、属组查找
<a class=header-anchor href=#%e6%a0%b9%e6%8d%ae%e5%b1%9e%e4%b8%bb%e5%b1%9e%e7%bb%84%e6%9f%a5%e6%89%be></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-user USERNAME #查找属主为指定用户(UID)的文件
</span></span><span style=display:flex><span>-group GRPNAME #查找属组为指定组(GID)的文件
</span></span><span style=display:flex><span>-uid UserID #查找属主为指定的UID号的文件
</span></span><span style=display:flex><span>-gid GroupID #查找属组为指定的GID号的文件
</span></span><span style=display:flex><span>-nouser #查找没有属主的文件
</span></span><span style=display:flex><span>-nogroup #查找没有属组的文件
</span></span></code></pre></div><h4 id=根据文件类型查找>根据文件类型查找
<a class=header-anchor href=#%e6%a0%b9%e6%8d%ae%e6%96%87%e4%bb%b6%e7%b1%bb%e5%9e%8b%e6%9f%a5%e6%89%be></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-type TYPE
</span></span><span style=display:flex><span>TYPE可以是以下形式：
</span></span><span style=display:flex><span>f: 普通文件
</span></span><span style=display:flex><span>d: 目录文件
</span></span><span style=display:flex><span>l: 符号链接文件
</span></span><span style=display:flex><span>s：套接字文件
</span></span><span style=display:flex><span>b: 块设备文件
</span></span><span style=display:flex><span>c: 字符设备文件
</span></span><span style=display:flex><span>p: 管道文件
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#查看/home的目录
</span></span><span style=display:flex><span>find /home –type d -ls
</span></span></code></pre></div><h4 id=空文件或目录>空文件或目录
<a class=header-anchor href=#%e7%a9%ba%e6%96%87%e4%bb%b6%e6%88%96%e7%9b%ae%e5%bd%95></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-empty
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#find /app -type d -empty
</span></span></code></pre></div><h4 id=组合条件>组合条件
<a class=header-anchor href=#%e7%bb%84%e5%90%88%e6%9d%a1%e4%bb%b6></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>与：-a ，默认多个条件是与关系，所以可以省略-a
</span></span><span style=display:flex><span>或：-o
</span></span><span style=display:flex><span>非：-not !
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#find /etc/ -type d -o -type l |wc -l
</span></span><span style=display:flex><span>307
</span></span><span style=display:flex><span>[root@centos8 ~]#find /etc/ -type d -o -type l -ls |wc -l
</span></span><span style=display:flex><span>101
</span></span><span style=display:flex><span>[root@centos8 ~]#find /etc/ \( -type d -o -type l \) -ls |wc -l
</span></span><span style=display:flex><span>307
</span></span></code></pre></div><p><strong>德·摩根定律：</strong></p><ul><li>(非 A) 且 (非 B) = 非(A 或 B)</li><li>(非 A) 或 (非 B) = 非(A 且 B)
示例：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>!A -a !B = !(A -o B)
</span></span><span style=display:flex><span>!A -o !B = !(A -a B)
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>find -user joe -group joe
</span></span><span style=display:flex><span>find -user joe -not -group joe
</span></span><span style=display:flex><span>find -user joe -o -user jane
</span></span><span style=display:flex><span>find -not \( -user joe -o -user jane \)
</span></span><span style=display:flex><span>find / -user joe -o -uid 500
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 data]#find ! \( -type d -a -empty \)| wc -l
</span></span><span style=display:flex><span>56
</span></span><span style=display:flex><span>[root@centos8 data]#find ! -type d -o ! -empty |wc -l
</span></span><span style=display:flex><span>56
</span></span><span style=display:flex><span>[mage@centos8 data]$find ! -user wang ! -user mage
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>./script40
</span></span><span style=display:flex><span>./script40/backup
</span></span><span style=display:flex><span>./script40/backup/args.sh
</span></span><span style=display:flex><span>./script40/backup/chook_rabbit.sh
</span></span><span style=display:flex><span>./script40/backup/disk_check.sh
</span></span><span style=display:flex><span>./script40/backup/ping.sh
</span></span><span style=display:flex><span>./script40/backup/systeminfo.sh
</span></span><span style=display:flex><span>./script40/backup/test_read.sh
</span></span><span style=display:flex><span>./script40/backup/test.sh
</span></span><span style=display:flex><span>./script40/if_bmi.sh
</span></span><span style=display:flex><span>./script40/case_yesorno.sh
</span></span><span style=display:flex><span>./script40/case_yesorno2.sh
</span></span><span style=display:flex><span>./script40/b.txt
</span></span><span style=display:flex><span>./f1.txt
</span></span><span style=display:flex><span>./test
</span></span><span style=display:flex><span>./test/f1.txt.link
</span></span><span style=display:flex><span>./f1.txtlink
</span></span><span style=display:flex><span>./test2
</span></span><span style=display:flex><span>[root@centos8 home]#ll
</span></span><span style=display:flex><span>total 0
</span></span><span style=display:flex><span>drwx------. 2 mage mage 62 Jan 16 17:53 mage
</span></span><span style=display:flex><span>drwx------. 2 wang wang 62 Jan 16 10:43 wang
</span></span><span style=display:flex><span>drwx------ 2 xiaoming xiaoming 62 Apr 6 09:51 xiaoming
</span></span><span style=display:flex><span>[root@centos8 home]#find ! \( -user wang -o -user mage \)
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>./xiaoming
</span></span><span style=display:flex><span>./xiaoming/.bash_logout
</span></span><span style=display:flex><span>./xiaoming/.bash_profile
</span></span><span style=display:flex><span>./xiaoming/.bashrc
</span></span><span style=display:flex><span>[root@centos8 home]#find ! -user wang -a ! -user mage
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>./xiaoming
</span></span><span style=display:flex><span>./xiaoming/.bash_logout
</span></span><span style=display:flex><span>./xiaoming/.bash_profile
</span></span><span style=display:flex><span>./xiaoming/.bashrc
</span></span><span style=display:flex><span>#找出/tmp目录下，属主不是root，且文件名不以f开头的文件
</span></span><span style=display:flex><span>find /tmp \( -not -user root -a -not -name &#39;f*&#39; \) -ls
</span></span><span style=display:flex><span>find /tmp -not \( -user root -o -name &#39;f*&#39; \) –ls
</span></span></code></pre></div><h4 id=排除目录>排除目录
<a class=header-anchor href=#%e6%8e%92%e9%99%a4%e7%9b%ae%e5%bd%95></a></h4><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#查找/etc/下，除/etc/security目录的其它所有.conf后缀的文件
</span></span><span style=display:flex><span>find /etc -path &#39;/etc/security&#39; -a -prune -o -name &#34;*.conf&#34;
</span></span><span style=display:flex><span>#查找/etc/下，除/etc/security和/etc/systemd,/etc/dbus-1三个目录的所有.conf后缀的文件
</span></span><span style=display:flex><span>find /etc \( -path &#34;/etc/security&#34; -o -path &#34;/etc/systemd&#34; -o -path &#34;/etc/dbus-
</span></span><span style=display:flex><span>1&#34; \) -a -prune -o -name &#34;*.conf&#34;
</span></span><span style=display:flex><span>#排除/proc和/sys目录
</span></span><span style=display:flex><span>find / \( -path &#34;/sys&#34; -o -path &#34;/proc&#34; \) -a -prune -o -type f -a -mmin -1
</span></span></code></pre></div><h4 id=根据文件大小来查找>根据文件大小来查找
<a class=header-anchor href=#%e6%a0%b9%e6%8d%ae%e6%96%87%e4%bb%b6%e5%a4%a7%e5%b0%8f%e6%9d%a5%e6%9f%a5%e6%89%be></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-size [+|-]#UNIT #常用单位：k, M, G，c（byte）,注意大小写敏感
</span></span><span style=display:flex><span>#UNIT: #表示(#-1, #],如：6k 表示(5k,6k]
</span></span><span style=display:flex><span>-#UNIT #表示[0,#-1],如：-6k 表示[0,5k]
</span></span><span style=display:flex><span>+#UNIT #表示(#,∞),如：+6k 表示(6k,∞)
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>find / -size +10G
</span></span><span style=display:flex><span>[root@centos8 ~]#find / -size +10G
</span></span><span style=display:flex><span>/proc/kcore
</span></span><span style=display:flex><span>find: ‘/proc/25229/task/25229/fd/6’: No such file or directory
</span></span><span style=display:flex><span>find: ‘/proc/25229/task/25229/fdinfo/6’: No such file or directory
</span></span><span style=display:flex><span>find: ‘/proc/25229/fd/5’: No such file or directory
</span></span><span style=display:flex><span>find: ‘/proc/25229/fdinfo/5’: No such file or directory
</span></span><span style=display:flex><span>[root@centos8 ~]#ll -h /proc/kcore
</span></span><span style=display:flex><span>-r-------- 1 root root 128T Dec 14 2020 /proc/kcore
</span></span><span style=display:flex><span>[root@centos8 ~]#du -sh /proc/kcore
</span></span><span style=display:flex><span>0 /proc/kcore
</span></span></code></pre></div><h4 id=根据时间戳>根据时间戳
<a class=header-anchor href=#%e6%a0%b9%e6%8d%ae%e6%97%b6%e9%97%b4%e6%88%b3></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#以“天&#34;为单位
</span></span><span style=display:flex><span>-atime [+|-]#
</span></span><span style=display:flex><span># #表示[#,#+1)  10表示[10-11)
</span></span><span style=display:flex><span>+# #表示[#+1,∞]   10表示[11,∞] 
</span></span><span style=display:flex><span>-# #表示[0,#)      10表示[0-10)
</span></span><span style=display:flex><span>-mtime
</span></span><span style=display:flex><span>-ctime
</span></span><span style=display:flex><span>#以“分钟&#34;为单位
</span></span><span style=display:flex><span>-amin
</span></span><span style=display:flex><span>-mmin
</span></span><span style=display:flex><span>-cmin
</span></span></code></pre></div><p><img src=/imgs/img-lazy-loading.gif data-src=/images/url/linux/linux09/02.jpg alt></p><h4 id=根据权限查找>根据权限查找
<a class=header-anchor href=#%e6%a0%b9%e6%8d%ae%e6%9d%83%e9%99%90%e6%9f%a5%e6%89%be></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-perm [/|-]MODE
</span></span><span style=display:flex><span>MODE #精确权限匹配
</span></span><span style=display:flex><span>/MODE #任何一类(u,g,o)对象的权限中只要有一位匹配即可，或关系，+ 从CentOS 7开始淘汰
</span></span><span style=display:flex><span>-MODE #每一类对象都必须同时拥有指定权限，与关系
</span></span><span style=display:flex><span>0 表示不关注
</span></span></code></pre></div><p>说明：<br>find -perm 755 会匹配权限模式恰好是755的文件<br>只要当任意人有写权限时，find -perm /222就会匹配<br>只有当每个人都有写权限时，find -perm -222才会匹配<br>只有当其它人（other）有写权限时，find -perm -002才会匹配<br>只有当任意人没有执行权限时，find /etc/ -type f ! -perm -111 -ls才会匹配 并显示权限。</p><h4 id=正则表达式-1>正则表达式
<a class=header-anchor href=#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f-1></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-regextype type
</span></span><span style=display:flex><span>Changes the regular expression syntax understood by -regex and -iregex tests
</span></span><span style=display:flex><span>which occur later on the command line. Currently-implemented types are
</span></span><span style=display:flex><span>emacs (this is the default), posix-awk, posix-basic, posix-egrep and posix-
</span></span><span style=display:flex><span>extended.
</span></span><span style=display:flex><span>-regex pattern
</span></span><span style=display:flex><span>File name matches regular expression pattern. This is a match on the whole
</span></span><span style=display:flex><span>path, not a search. For example, to match a file named `./fubar3&#39;, you can
</span></span><span style=display:flex><span>use the regular expression `.*bar.&#39; or `.*b.*3&#39;, but not `f.*r3&#39;. The regular
</span></span><span style=display:flex><span>expressions understood by find are by default Emacs Regular Expressions, but
</span></span><span style=display:flex><span>this can be changed with the -regextype option.
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>find /you/find/dir -regextype posix-extended -regex &#34;regex&#34;
</span></span></code></pre></div><h4 id=处理动作>处理动作
<a class=header-anchor href=#%e5%a4%84%e7%90%86%e5%8a%a8%e4%bd%9c></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-print：默认的处理动作，显示至屏幕
</span></span><span style=display:flex><span>-ls：类似于对查找到的文件执行&#34;ls -dils&#34;命令格式输出
</span></span><span style=display:flex><span>-fls file：查找到的所有文件的长格式信息保存至指定文件中，相当于 -ls &gt; file
</span></span><span style=display:flex><span>-delete：删除查找到的文件，慎用！
</span></span><span style=display:flex><span>-ok COMMAND {} \; 对查找到的每个文件执行由COMMAND指定的命令，对于每个文件执行命令之前，都会
</span></span><span style=display:flex><span>交互式要求用户确认
</span></span><span style=display:flex><span>-exec COMMAND {} \; 对查找到的每个文件执行由COMMAND指定的命令
</span></span><span style=display:flex><span>{}: 用于引用查找到的文件名称自身
</span></span></code></pre></div><p>关于 {} ;<br><a href=https://askubuntu.com/questions/339015/what-does-mean-in-the-find-command title=https://askubuntu.com/questions/339015/what-does-mean-in-the-find-command rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://askubuntu.com/questions/339015/what-does-mean-in-the-find-command
<i class="fa fa-external-link-alt"></i>
</a>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#备份配置文件，添加.orig这个扩展名
</span></span><span style=display:flex><span>find -name &#34;.conf&#34; -exec cp {} {}.orig \;
</span></span><span style=display:flex><span>#提示删除存在时间超过３天以上的joe的临时文件
</span></span><span style=display:flex><span>find /tmp -ctime +3 -user joe -ok rm {} \;
</span></span><span style=display:flex><span>#在主目录中寻找可被其它用户写入的文件
</span></span><span style=display:flex><span>find ~ -perm -002 -exec chmod o-w {} \;
</span></span><span style=display:flex><span>#查找/data下的权限为644，后缀为sh的普通文件，增加执行权限
</span></span><span style=display:flex><span>find /data –type f -perm 644 -name &#34;*.sh&#34; –exec chmod 755 {} \;
</span></span><span style=display:flex><span>#查找所有文件名以.conf结尾的文件，为每个找到的文件执行后面的命令之前提示用户确认。用户需要输入y来确认操作，或者输入n来跳过当前文件的操作。这个分号是find命令的命令结束符。反斜杠\用于转义分号，因为在shell中，分号通常用作命令分隔符。在这里，转义分号告诉shell，分号是find命令的一部分，而不是shell脚本的命令分隔符。
</span></span><span style=display:flex><span>[root@rocky8 ~]# find -name &#34;*.conf&#34; -ok mv {} /data/ \;
</span></span><span style=display:flex><span>&lt; mv ... /a.conf &gt; ? y
</span></span><span style=display:flex><span>[root@rocky8~]#ls /data
</span></span><span style=display:flex><span>a.conf
</span></span></code></pre></div><h2 id=参数替换-xargs>参数替换 xargs
<a class=header-anchor href=#%e5%8f%82%e6%95%b0%e6%9b%bf%e6%8d%a2-xargs></a></h2><p>由于很多命令不支持管道|来传递参数，xargs用于产生某个命令的参数，xargs 可以读入 stdin 的数<br>据，并且以空格符或回车符将 stdin 的数据分隔成为参数<br>另外，许多命令不能接受过多参数，命令执行可能会失败，xargs 可以解决<br>注意：文件名或者是其他意义的名词内含有空格符的情况<br>find 经常和 xargs 命令进行组合,形式如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>find | xargs COMMAND
</span></span></code></pre></div><p>常见选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-0, --null：输入项以 null 字符结尾，而不是空白字符，通常与 find -print0 或 sort -z 等命令结合使用。
</span></span><span style=display:flex><span>-a file, --arg-file=file：从文件中读取输入项而不是标准输入。
</span></span><span style=display:flex><span>-d delimiter, --delimiter=delimiter：指定输入项的分隔符，默认是空白字符。
</span></span><span style=display:flex><span>-E eof-str, --eof[=eof-str]：如果输入中包含指定的字符串，则停止读取。
</span></span><span style=display:flex><span>-e [eof-str], --eof[=eof-str]：与 -E 相同，但更兼容 POSIX。
</span></span><span style=display:flex><span>-I replace-str, --replace[=replace-str]：替换字符串，默认是 {}，用于在命令行中使用输入项。
</span></span><span style=display:flex><span>-i, --replace：与 -I 相同，但默认使用 {} 作为替换字符串。
</span></span><span style=display:flex><span>-L max-lines, --max-lines=max-lines：指定最大行数，每行最多包含一个输入项。
</span></span><span style=display:flex><span>-l[max-lines], --max-lines[=max-lines]：与 -L 相同，但更兼容 POSIX。
</span></span><span style=display:flex><span>-n max-args, --max-args=max-args：指定命令行上每个命令的最大参数数量。
</span></span><span style=display:flex><span>-P max-procs, --max-procs=max-procs：指定并行执行的最大进程数。
</span></span><span style=display:flex><span>-p, --interactive：在执行每个命令之前提示用户确认。
</span></span><span style=display:flex><span>-r, --no-run-if-empty：如果输入为空，不运行命令。
</span></span><span style=display:flex><span>-s max-chars, --max-chars=max-chars：指定命令行的最大字符数。
</span></span><span style=display:flex><span>-t, --verbose：在执行命令之前打印命令到标准错误。
</span></span><span style=display:flex><span>-x, --exit：如果输入的长度超过了最大命令行长度，停止执行。
</span></span></code></pre></div><p>范例：：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#显示10个数字
</span></span><span style=display:flex><span>[root@centos8 ~]#seq 10 | xargs
</span></span><span style=display:flex><span>1 2 3 4 5 6 7 8 9 10
</span></span><span style=display:flex><span>#删除当前目录下的大量文件
</span></span><span style=display:flex><span>ls | xargs rm
</span></span><span style=display:flex><span>#
</span></span><span style=display:flex><span>find -name &#34;*.sh&#34; | xargs ls -Sl
</span></span><span style=display:flex><span>[root@centos8 data]#echo {1..10} |xargs
</span></span><span style=display:flex><span>1 2 3 4 5 6 7 8 9 10
</span></span><span style=display:flex><span>[root@centos8 data]#echo {1..10} |xargs -n1
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>2
</span></span><span style=display:flex><span>3
</span></span><span style=display:flex><span>4
</span></span><span style=display:flex><span>5
</span></span><span style=display:flex><span>6
</span></span><span style=display:flex><span>7
</span></span><span style=display:flex><span>8
</span></span><span style=display:flex><span>9
</span></span><span style=display:flex><span>10
</span></span><span style=display:flex><span>[root@centos8 data]#echo {1..10} |xargs -n2
</span></span><span style=display:flex><span>1 2
</span></span><span style=display:flex><span>3 4
</span></span><span style=display:flex><span>5 6
</span></span><span style=display:flex><span>7 8
</span></span><span style=display:flex><span>9 10
</span></span><span style=display:flex><span>#批量创建和删除用户
</span></span><span style=display:flex><span>echo user{1..10} |xargs -n1 useradd
</span></span><span style=display:flex><span>echo user{1..100} | xargs -n1 userdel -r
</span></span><span style=display:flex><span>#这个命令是错误的
</span></span><span style=display:flex><span>find /sbin/ -perm /700 | ls -l
</span></span><span style=display:flex><span>#查找有特殊权限的文件，并排序
</span></span><span style=display:flex><span>find /bin/ -perm /7000 | xargs ls -Sl
</span></span><span style=display:flex><span>#此命令和上面有何区别？
</span></span><span style=display:flex><span>find /bin/ -perm -7000 | xargs ls -Sl
</span></span><span style=display:flex><span>#以字符nul分隔
</span></span><span style=display:flex><span>find -type f -name &#34;*.txt&#34; -print0 | xargs -0 rm
</span></span><span style=display:flex><span>#并发执行多个进程
</span></span><span style=display:flex><span>seq 100 |xargs -i -P10 wget -P /data http://10.0.0.8/{}.html
</span></span><span style=display:flex><span>#并行下载bilibili视频
</span></span><span style=display:flex><span>yum install python3-pip -y
</span></span><span style=display:flex><span>pip3 install you-get
</span></span><span style=display:flex><span>seq 60 | xargs -i -P3 you-get https://www.bilibili.com/video/BV14K411W7UF?p={}
</span></span></code></pre></div><p>命令解释：
seq 10: 这个命令生成一个从1到10的数字序列。这些数字将被用作后续命令的输入。<br>xargs -i -P10: xargs命令通常用于从标准输入中读取数据，并将其作为参数传递给另一个命令。在这个命令中：<br>-i选项告诉xargs使用{}作为输入行的占位符。<br>-P10选项指定xargs可以同时运行10个进程，这样可以并行下载文件，提高效率。<br>wget -P /data http://10.0.0.8/{}.html: 这是xargs将执行的命令。wget是一个用于下载文件的命令行工具。在这个命令中：<br>-P /data选项指定下载的文件应该保存到/data目录。<br>http://10.0.0.8/{}.html是文件的URL。由于使用了-i选项，xargs会用来自seq 10的数字替换{}，从而生成一系列的URL，例如http://10.0.0.8/1.html，http://10.0.0.8/2.html，依此类推，直到http://10.0.0.8/10.html。</p><h3 id=练习>练习
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0></a></h3><p>1、查找/var目录下属主为root，且属组为mail的所有文件<br>2、查找/var目录下不属于root、lp、gdm的所有文件<br>3、查找/var目录下最近一周内其内容修改过，同时属主不为root，也不是postfix的文件<br>4、查找当前系统上没有属主或属组，且最近一个周内曾被访问过的文件<br>5、查找/etc目录下大于1M且类型为普通文件的所有文件<br>6、查找/etc目录下所有用户都没有写权限的文件<br>7、查找/etc目录下至少有一类用户没有执行权限的文件<br>8、查找/etc/init.d目录下，所有用户都有执行权限，且其它用户有写权限的文件</p><h2 id=压缩和解压缩>压缩和解压缩
<a class=header-anchor href=#%e5%8e%8b%e7%bc%a9%e5%92%8c%e8%a7%a3%e5%8e%8b%e7%bc%a9></a></h2><p>主要针对单个文件压缩,而非目录</p><h3 id=compress-和-uncompress>compress 和 uncompress
<a class=header-anchor href=#compress-%e5%92%8c-uncompress></a></h3><p>此工具来自于ncompress包,此工具目前已经很少使用<br>对应的文件是 .Z 后缀<br>格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>compress Options [file ...]
</span></span><span style=display:flex><span>uncompress file.Z 
</span></span></code></pre></div><p>常用选项
-d 解压缩，相当于uncompress<br>-c 结果输出至标准输出,不删除原文件<br>-v 显示详情</p><p>zcat file.Z 不显式解压缩的前提下查看文本文件内容
范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>zcat file.Z &gt;file
</span></span></code></pre></div><h3 id=gzip和gunzip>gzip和gunzip
<a class=header-anchor href=#gzip%e5%92%8cgunzip></a></h3><p>来自于 gzip 包<br>对应的文件是 .gz 后缀<br>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>gzip [OPTION]... FILE ...
</span></span></code></pre></div><p>常用选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-k keep, 保留原文件,CentOS 8 新特性
</span></span><span style=display:flex><span>-d 解压缩，相当于gunzip
</span></span><span style=display:flex><span>-c 结果输出至标准输出，保留原文件不改变
</span></span><span style=display:flex><span>-# 指定压缩比，#取值为1-9，值越大压缩比越大
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#解压缩
</span></span><span style=display:flex><span>gunzip file.gz
</span></span><span style=display:flex><span>#不显式解压缩的前提下查看文本文件内容
</span></span><span style=display:flex><span>zcat file.gz
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>gzip -c messages &gt;messages.gz
</span></span><span style=display:flex><span>gzip -c -d messages.gz &gt; messages
</span></span><span style=display:flex><span>zcat messages.gz &gt; messages
</span></span><span style=display:flex><span>cat messages | gzip &gt; m.gz
</span></span></code></pre></div><h3 id=bzip2和bunzip2>bzip2和bunzip2
<a class=header-anchor href=#bzip2%e5%92%8cbunzip2></a></h3><p>来自于 bzip2 包
对应的文件是 .bz2 后缀
格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bzip2 [OPTION]... FILE ...
</span></span></code></pre></div><p>常用选项</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-k keep, 保留原文件
</span></span><span style=display:flex><span>-d 解压缩
</span></span><span style=display:flex><span>-c 结果输出至标准输出，保留原文件不改变
</span></span><span style=display:flex><span>-# 1-9，压缩比，默认为9
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bunzip2 file.bz2 解压缩
</span></span><span style=display:flex><span>bzcat file.bz2 不显式解压缩的前提下查看文本文件内容
</span></span></code></pre></div><h3 id=xz-和-unxz>xz 和 unxz
<a class=header-anchor href=#xz-%e5%92%8c-unxz></a></h3><p>来自于 xz 包<br>对应的文件是 .xz 后缀<br>格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>xz [OPTION]... FILE ...
</span></span></code></pre></div><p>常用选项</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-k keep, 保留原文件
</span></span><span style=display:flex><span>-d 解压缩
</span></span><span style=display:flex><span>-c 结果输出至标准输出，保留原文件不改变
</span></span><span style=display:flex><span>-# 压缩比，取值1-9，默认为6
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>unxz file.xz #解压缩
</span></span><span style=display:flex><span>xzcat file.xz #不显式解压缩的前提下查看文本文件内容
</span></span></code></pre></div><h3 id=zip-和-unzip>zip 和 unzip
<a class=header-anchor href=#zip-%e5%92%8c-unzip></a></h3><p>zip 可以实现打包目录和多个文件成一个文件并压缩，但可能会丢失文件属性信息，如：所有者和组信
息，一般建议使用 tar 代替<br>分别来自于 zip 和 unzip 包<br>对应的文件是 .zip 后缀<br>范例: zip帮助</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#zip
</span></span><span style=display:flex><span>Copyright (c) 1990-2008 Info-ZIP - Type &#39;zip &#34;-L&#34;&#39; for software license.
</span></span><span style=display:flex><span>Zip 3.0 (July 5th 2008). Usage:
</span></span><span style=display:flex><span>zip [-options] [-b path] [-t mmddyyyy] [-n suffixes] [zipfile list] [-xi list]
</span></span><span style=display:flex><span>The default action is to add or replace zipfile entries from list, which
</span></span><span style=display:flex><span>can include the special name - to compress standard input.
</span></span><span style=display:flex><span>If zipfile and list are omitted, zip compresses stdin to stdout.
</span></span><span style=display:flex><span>-f freshen: only changed files -u update: only changed or new files
</span></span><span style=display:flex><span>-d delete entries in zipfile -m move into zipfile (delete OS files)
</span></span><span style=display:flex><span>-r recurse into directories -j junk (don&#39;t record) directory names
</span></span><span style=display:flex><span>-0 store only -l convert LF to CR LF (-ll CR LF to LF)
</span></span><span style=display:flex><span>-1 compress faster -9 compress better
</span></span><span style=display:flex><span>-q quiet operation -v verbose operation/print version info
</span></span><span style=display:flex><span>-c add one-line comments -z add zipfile comment
</span></span><span style=display:flex><span>-@ read names from stdin -o make zipfile as old as latest entry
</span></span><span style=display:flex><span>-x exclude the following names -i include only the following names
</span></span><span style=display:flex><span>-F fix zipfile (-FF try harder) -D do not add directory entries
</span></span><span style=display:flex><span>-A adjust self-extracting exe -J junk zipfile prefix (unzipsfx)
</span></span><span style=display:flex><span>-T test zipfile integrity -X eXclude eXtra file attributes
</span></span><span style=display:flex><span>-y store symbolic links as the link instead of the referenced file
</span></span><span style=display:flex><span>-e encrypt -n don&#39;t compress these suffixes
</span></span><span style=display:flex><span>-h2 show more help
</span></span><span style=display:flex><span>[root@centos8 ~]#zip -h2
</span></span><span style=display:flex><span>Extended Help for Zip
</span></span><span style=display:flex><span>See the Zip Manual for more detailed help
</span></span><span style=display:flex><span>Zip stores files in zip archives. The default action is to add or replace
</span></span><span style=display:flex><span>zipfile entries.
</span></span><span style=display:flex><span>Basic command line:
</span></span><span style=display:flex><span>zip options archive_name file file ...
</span></span><span style=display:flex><span>Some examples:
</span></span><span style=display:flex><span>Add file.txt to z.zip (create z if needed): zip z file.txt
</span></span><span style=display:flex><span>Zip all files in current dir: zip z *
</span></span><span style=display:flex><span>Zip files in current dir and subdirs also: zip -r z .
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#打包并压缩</span>
</span></span><span style=display:flex><span>zip <span style=color:#f92672>-</span>r <span style=color:#f92672>/</span>backup<span style=color:#f92672>/</span>sysconfig<span style=color:#f92672>.</span>zip <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>sysconfig<span style=color:#f92672>/</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#不包括目录本身，只打包目录内的文件和子目录</span>
</span></span><span style=display:flex><span>cd <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>sysconfig; zip <span style=color:#f92672>-</span>r <span style=color:#f92672>/</span>root<span style=color:#f92672>/</span>sysconfig<span style=color:#f92672>.</span>zip <span style=color:#f92672>*</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#默认解压缩至当前目录</span>
</span></span><span style=display:flex><span>unzip <span style=color:#f92672>/</span>backup<span style=color:#f92672>/</span>sysconfig<span style=color:#f92672>.</span>zip
</span></span><span style=display:flex><span><span style=color:#75715e>#解压缩至指定目录,如果指定目录不存在，会在其父目录（必须事先存在）下自动生成</span>
</span></span><span style=display:flex><span>unzip <span style=color:#f92672>/</span>backup<span style=color:#f92672>/</span>sysconfig<span style=color:#f92672>.</span>zip <span style=color:#f92672>-</span>d <span style=color:#f92672>/</span>tmp<span style=color:#f92672>/</span>config
</span></span><span style=display:flex><span>cat <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>log<span style=color:#f92672>/</span>messages <span style=color:#f92672>|</span> zip messages <span style=color:#f92672>-</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#-p 表示管道</span>
</span></span><span style=display:flex><span>unzip <span style=color:#f92672>-</span>p message<span style=color:#f92672>.</span>zip <span style=color:#f92672>&gt;</span> message
</span></span></code></pre></div><h4 id=加密和解密>加密和解密
<a class=header-anchor href=#%e5%8a%a0%e5%af%86%e5%92%8c%e8%a7%a3%e5%af%86></a></h4><p>范例: 交互式加密和解密</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 magedu]#zip -e magedu.zip *
</span></span><span style=display:flex><span>Enter password:
</span></span><span style=display:flex><span>Verify password:
</span></span><span style=display:flex><span>adding: ca.crt (deflated 25%)
</span></span><span style=display:flex><span>adding: client.ovpn (deflated 27%)
</span></span><span style=display:flex><span>adding: dh.pem (deflated 19%)
</span></span><span style=display:flex><span>adding: magedu.crt (deflated 45%)
</span></span><span style=display:flex><span>adding: magedu.key (deflated 24%)
</span></span><span style=display:flex><span>adding: magedu.tar (deflated 72%)
</span></span><span style=display:flex><span>adding: ta.key (deflated 40%)
</span></span><span style=display:flex><span>[root@centos8 magedu]#mv magedu.zip /root
</span></span><span style=display:flex><span>[root@centos8 magedu]#cd
</span></span><span style=display:flex><span>[root@centos8 ~]#unzip magedu.zip
</span></span><span style=display:flex><span>Archive: magedu.zip
</span></span><span style=display:flex><span>[magedu.zip] ca.crt password:
</span></span><span style=display:flex><span>password incorrect--reenter: [root@centos8 ~]#
</span></span><span style=display:flex><span>[root@centos8 ~]#unzip magedu.zip
</span></span><span style=display:flex><span>Archive: magedu.zip
</span></span><span style=display:flex><span>[magedu.zip] ca.crt password:
</span></span><span style=display:flex><span>inflating: ca.crt
</span></span><span style=display:flex><span>inflating: client.ovpn
</span></span><span style=display:flex><span>inflating: dh.pem
</span></span><span style=display:flex><span>inflating: magedu.crt
</span></span><span style=display:flex><span>inflating: magedu.key
</span></span><span style=display:flex><span>inflating: magedu.tar
</span></span><span style=display:flex><span>inflating: ta.key
</span></span></code></pre></div><p>范例: 非交互式加密和解密</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 test]#zip -P 123456 magedu.zip *
</span></span><span style=display:flex><span>adding: ca.crt (deflated 25%)
</span></span><span style=display:flex><span>adding: client.ovpn (deflated 27%)
</span></span><span style=display:flex><span>adding: dh.pem (deflated 19%)
</span></span><span style=display:flex><span>adding: ta.key (deflated 40%)
</span></span><span style=display:flex><span>[root@centos8 test]#mv magedu.zip /opt
</span></span><span style=display:flex><span>[root@centos8 test]#cd /opt
</span></span><span style=display:flex><span>[root@centos8 opt]#unzip -P 123456 magedu.zip
</span></span><span style=display:flex><span>Archive: magedu.zip
</span></span><span style=display:flex><span>[magedu.zip] ca.crt password:
</span></span><span style=display:flex><span>inflating: ca.crt
</span></span><span style=display:flex><span>inflating: client.ovpn
</span></span><span style=display:flex><span>inflating: dh.pem
</span></span><span style=display:flex><span>inflating: ta.key
</span></span></code></pre></div><h2 id=打包和解包>打包和解包
<a class=header-anchor href=#%e6%89%93%e5%8c%85%e5%92%8c%e8%a7%a3%e5%8c%85></a></h2><h3 id=tar>tar
<a class=header-anchor href=#tar></a></h3><p>tar 即 Tape ARchive 磁带归档，可以对目录和多个文件打包一个文件，并且可以压缩，保留文件属性不
丢失，常用于备份功能，推荐使用<br>对应的文件是 .tar 后缀<br>格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar [-ABcdgGhiklmMoOpPrRsStuUvwWxzZ][-b &lt;区块数目&gt;][-C &lt;目的目录&gt;][-f &lt;备份文件&gt;][-F
</span></span><span style=display:flex><span>&lt;Script文件&gt;][-K &lt;文件&gt;][-L &lt;媒体容量&gt;][-N &lt;日期时间&gt;][-T &lt;范本文件&gt;][-V &lt;卷册名称&gt;][-X
</span></span><span style=display:flex><span>&lt;范本文件&gt;][-&lt;设备编号&gt;&lt;存储密度&gt;][--after-date=&lt;日期时间&gt;][--atime-preserve][--
</span></span><span style=display:flex><span>backuup=&lt;备份方式&gt;][--checkpoint][--concatenate][--confirmation][--delete][--
</span></span><span style=display:flex><span>exclude=&lt;范本样式&gt;][--force-local][--group=&lt;群组名称&gt;][--help][--ignore-failed-
</span></span><span style=display:flex><span>read][--new-volume-script=&lt;Script文件&gt;][--newer-mtime][--no-recursion][--null][--
</span></span><span style=display:flex><span>numeric-owner][--owner=&lt;用户名称&gt;][--posix][--erve][--preserve-order][--preserve-
</span></span><span style=display:flex><span>permissions][--record-size=&lt;区块数目&gt;][--recursive-unlink][--remove-files][--rsh-
</span></span><span style=display:flex><span>command=&lt;执行指令&gt;][--same-owner][--suffix=&lt;备份字尾字符串&gt;][--totals][--use-
</span></span><span style=display:flex><span>compress-program=&lt;执行指令&gt;][--version][--volno-file=&lt;编号文件&gt;][文件或目录...]
</span></span></code></pre></div><p>选项:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-A或--catenate 新增文件到已存在的备份文件。
</span></span><span style=display:flex><span>-b&lt;区块数目&gt;或--blocking-factor=&lt;区块数目&gt; 设置每笔记录的区块数目，每个区块大小为12Bytes。
</span></span><span style=display:flex><span>-B或--read-full-records 读取数据时重设区块大小。
</span></span><span style=display:flex><span>-c或--create 建立新的备份文件。
</span></span><span style=display:flex><span>-C&lt;目的目录&gt;或--directory=&lt;目的目录&gt; 切换到指定的目录。
</span></span><span style=display:flex><span>-d或--diff或--compare 对比备份文件内和文件系统上的文件的差异。
</span></span><span style=display:flex><span>-f&lt;备份文件&gt;或--file=&lt;备份文件&gt; 指定备份文件。
</span></span><span style=display:flex><span>-F&lt;Script文件&gt;或--info-script=&lt;Script文件&gt; 每次更换磁带时，就执行指定的Script文件。
</span></span><span style=display:flex><span>-g或--listed-incremental 处理GNU格式的大量备份。
</span></span><span style=display:flex><span>-G或--incremental 处理旧的GNU格式的大量备份。
</span></span><span style=display:flex><span>-h或--dereference 不建立符号连接，直接复制该连接所指向的原始文件。
</span></span><span style=display:flex><span>-i或--ignore-zeros 忽略备份文件中的0 Byte区块，也就是EOF。
</span></span><span style=display:flex><span>-k或--keep-old-files 解开备份文件时，不覆盖已有的文件。
</span></span><span style=display:flex><span>-K&lt;文件&gt;或--starting-file=&lt;文件&gt; 从指定的文件开始还原。
</span></span><span style=display:flex><span>-l或--one-file-system 复制的文件或目录存放的文件系统，必须与tar指令执行时所处的文件系统相
</span></span><span style=display:flex><span>同，否则不予复制。
</span></span><span style=display:flex><span>-L&lt;媒体容量&gt;或-tape-length=&lt;媒体容量&gt; 设置存放每体的容量，单位以1024 Bytes计算。
</span></span><span style=display:flex><span>-m或--modification-time 还原文件时，不变更文件的更改时间。
</span></span><span style=display:flex><span>-M或--multi-volume 在建立，还原备份文件或列出其中的内容时，采用多卷册模式。
</span></span><span style=display:flex><span>-N&lt;日期格式&gt;或--newer=&lt;日期时间&gt; 只将较指定日期更新的文件保存到备份文件里。
</span></span><span style=display:flex><span>-o或--old-archive或--portability 将资料写入备份文件时使用V7格式。
</span></span><span style=display:flex><span>-O或--stdout 把从备份文件里还原的文件输出到标准输出设备。
</span></span><span style=display:flex><span>-p或--same-permissions 用原来的文件权限还原文件。
</span></span><span style=display:flex><span>-P或--absolute-names 文件名使用绝对名称，不移除文件名称前的&#34;/&#34;号。
</span></span><span style=display:flex><span>-r或--append 新增文件到已存在的备份文件的结尾部分。
</span></span><span style=display:flex><span>-R或--block-number 列出每个信息在备份文件中的区块编号。
</span></span><span style=display:flex><span>-s或--same-order 还原文件的顺序和备份文件内的存放顺序相同。
</span></span><span style=display:flex><span>-S或--sparse 倘若一个文件内含大量的连续0字节，则将此文件存成稀疏文件。
</span></span><span style=display:flex><span>-t或--list 列出备份文件的内容。
</span></span><span style=display:flex><span>-T&lt;范本文件&gt;或--files-from=&lt;范本文件&gt; 指定范本文件，其内含有一个或多个范本样式，让tar解开或
</span></span><span style=display:flex><span>建立符合设置条件的文件。
</span></span><span style=display:flex><span>-u或--update 仅置换较备份文件内的文件更新的文件。
</span></span><span style=display:flex><span>-U或--unlink-first 解开压缩文件还原文件之前，先解除文件的连接。
</span></span><span style=display:flex><span>-v或--verbose 显示指令执行过程。
</span></span><span style=display:flex><span>-V&lt;卷册名称&gt;或--label=&lt;卷册名称&gt; 建立使用指定的卷册名称的备份文件。
</span></span><span style=display:flex><span>-w或--interactive 遭遇问题时先询问用户。
</span></span><span style=display:flex><span>-W或--verify 写入备份文件后，确认文件正确无误。
</span></span><span style=display:flex><span>-x或--extract或--get 从备份文件中还原文件。
</span></span><span style=display:flex><span>-X&lt;范本文件&gt;或--exclude-from=&lt;范本文件&gt; 指定范本文件，其内含有一个或多个范本样式，让ar排除
</span></span><span style=display:flex><span>符合设置条件的文件。
</span></span><span style=display:flex><span>-z或--gzip或--ungzip 通过gzip指令处理备份文件。
</span></span><span style=display:flex><span>-Z或--compress或--uncompress 通过compress指令处理备份文件。
</span></span><span style=display:flex><span>-&lt;设备编号&gt;&lt;存储密度&gt; 设置备份用的外围设备编号及存放数据的密度。
</span></span><span style=display:flex><span>--after-date=&lt;日期时间&gt; 此参数的效果和指定&#34;-N&#34;参数相同。
</span></span><span style=display:flex><span>--atime-preserve 不变更文件的存取时间。
</span></span><span style=display:flex><span>--backup=&lt;备份方式&gt;或--backup 移除文件前先进行备份。
</span></span><span style=display:flex><span>--checkpoint 读取备份文件时列出目录名称。
</span></span><span style=display:flex><span>--concatenate 此参数的效果和指定&#34;-A&#34;参数相同。
</span></span><span style=display:flex><span>--confirmation 此参数的效果和指定&#34;-w&#34;参数相同。
</span></span><span style=display:flex><span>--delete 从备份文件中删除指定的文件。
</span></span><span style=display:flex><span>--exclude=&lt;范本样式&gt; 排除符合范本样式的文件。
</span></span><span style=display:flex><span>--group=&lt;群组名称&gt; 把加入设备文件中的文件的所属群组设成指定的群组。
</span></span><span style=display:flex><span>--help 在线帮助。
</span></span><span style=display:flex><span>--ignore-failed-read 忽略数据读取错误，不中断程序的执行。
</span></span><span style=display:flex><span>--new-volume-script=&lt;Script文件&gt; 此参数的效果和指定&#34;-F&#34;参数相同。
</span></span><span style=display:flex><span>--newer-mtime 只保存更改过的文件。
</span></span><span style=display:flex><span>--no-recursion 不做递归处理，也就是指定目录下的所有文件及子目录不予处理。
</span></span><span style=display:flex><span>--null 从null设备读取文件名称。
</span></span><span style=display:flex><span>--numeric-owner 以用户识别码及群组识别码取代用户名称和群组名称。
</span></span><span style=display:flex><span>--owner=&lt;用户名称&gt; 把加入备份文件中的文件的拥有者设成指定的用户。
</span></span><span style=display:flex><span>--posix 将数据写入备份文件时使用POSIX格式。
</span></span><span style=display:flex><span>--preserve 此参数的效果和指定&#34;-ps&#34;参数相同。
</span></span><span style=display:flex><span>--preserve-order 此参数的效果和指定&#34;-A&#34;参数相同。
</span></span><span style=display:flex><span>--preserve-permissions 此参数的效果和指定&#34;-p&#34;参数相同。
</span></span><span style=display:flex><span>--record-size=&lt;区块数目&gt; 此参数的效果和指定&#34;-b&#34;参数相同。
</span></span><span style=display:flex><span>--recursive-unlink 解开压缩文件还原目录之前，先解除整个目录下所有文件的连接。
</span></span><span style=display:flex><span>--remove-files 文件加入备份文件后，就将其删除。
</span></span><span style=display:flex><span>--rsh-command=&lt;执行指令&gt; 设置要在远端主机上执行的指令，以取代rsh指令。
</span></span><span style=display:flex><span>--same-owner 尝试以相同的文件拥有者还原文件。
</span></span><span style=display:flex><span>--suffix=&lt;备份字尾字符串&gt; 移除文件前先行备份。
</span></span><span style=display:flex><span>--totals 备份文件建立后，列出文件大小。
</span></span><span style=display:flex><span>--use-compress-program=&lt;执行指令&gt; 通过指定的指令处理备份文件。
</span></span><span style=display:flex><span>--version 显示版本信息。
</span></span><span style=display:flex><span>--volno-file=&lt;编号文件&gt; 使用指定文件内的编号取代预设的卷册编号。
</span></span></code></pre></div><p>(1) 创建归档，保留权限</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar -cpvf /PATH/FILE.tar FILE...
</span></span></code></pre></div><p>(2) 追加文件至归档： 注：不支持对压缩文件追加</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar -rf /PATH/FILE.tar FILE...
</span></span></code></pre></div><p>(3) 查看归档文件中的文件列表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar -t -f /PATH/FILE.tar
</span></span></code></pre></div><p>(4) 展开归档</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar xf /PATH/FILE.tar
</span></span><span style=display:flex><span>tar xf /PATH/FILE.tar -C /PATH/
</span></span></code></pre></div><p>(5) 结合压缩工具实现：归档并压缩</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-z 相当于gzip压缩工具
</span></span><span style=display:flex><span>-j 相当于bzip2压缩工具
</span></span><span style=display:flex><span>-J 相当于xz压缩工具
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#tar zcvf etc.tar.gz /etc/
</span></span><span style=display:flex><span>[root@centos8 ~]#tar jcvf etc.tar.bz2 /etc/
</span></span><span style=display:flex><span>[root@centos8 ~]#tar Jcvf etc.tar.xz /etc/
</span></span><span style=display:flex><span>[root@centos8 ~]#ll etc.tar.*
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 3645926 Dec 20 22:00 etc.tar.bz2
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 5105347 Dec 20 21:59 etc.tar.gz
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 3101616 Dec 20 22:00 etc.tar.xz
</span></span><span style=display:flex><span>#利用 tar 进行文件复制
</span></span><span style=display:flex><span>[root@centos8 ~]#tar c /data/ | tar x -C /backup
</span></span><span style=display:flex><span>tar: Removing leading `/&#39; from member names
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>--exclude 排除文件
</span></span></code></pre></div><p>范例: 只打包目录内的文件，不所括目录本身</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#方法1
</span></span><span style=display:flex><span>[root@centos8 ~]#cd /etc
</span></span><span style=display:flex><span>[root@centos8 etc]#tar zcvf /root/etc.tar.gz ./
</span></span><span style=display:flex><span>#方法2
</span></span><span style=display:flex><span>[root@centos8 ~]#tar -C /etc -zcf etc.tar.gz ./
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar zcvf /root/a.tgz --exclude=/app/host1 --exclude=/app/host2 /app
</span></span></code></pre></div><p><code>-T 选项指定输入文件</code><br><code>-X 选项指定包含要排除的文件列表
</code>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>tar zcvf mybackup.tgz -T /root/includefilelist -X /root/excludefilelist
</span></span></code></pre></div><h2 id=split>split
<a class=header-anchor href=#split></a></h2><p>split 命令可以分割一个文件为多个文件<br>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#分割大的 tar 文件为多份小文件
</span></span><span style=display:flex><span>split -b Size –d tar-file-name prefix-name
</span></span><span style=display:flex><span>示例:
</span></span><span style=display:flex><span>split -b 1M mybackup.tgz mybackup-parts
</span></span><span style=display:flex><span>#切换成的多个小分文件使用数字后缀
</span></span><span style=display:flex><span>split -b 1M –d mybackup.tgz mybackup-parts
</span></span></code></pre></div><p>将多个切割的小文件合并成一个大文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>cat mybackup-parts* &gt; mybackup.tar.gz
</span></span></code></pre></div><h2 id=报告文件系统磁盘使用情况>报告文件系统磁盘使用情况
<a class=header-anchor href=#%e6%8a%a5%e5%91%8a%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%e7%a3%81%e7%9b%98%e4%bd%bf%e7%94%a8%e6%83%85%e5%86%b5></a></h2><p>du命令是Linux和Unix系统中用于报告文件系统磁盘使用情况的工具。-sh是du命令的一些选项，它们的含义如下：</p><ul><li>-s（或&ndash;summarize）：这个选项告诉du命令只显示每个参数的总计大小，而不是每个子目录的大小。当您对一个目录使用du命令时，它会默认列出该目录及其所有子目录的大小。使用-s选项，您将只看到该目录的总大小。</li><li>-h（或&ndash;human-readable）：这个选项使得du命令以更易于阅读的格式显示大小，例如1K、234M、2G等，而不是以原始字节为单位。这有助于用户快速理解文件或目录的大小。
因此，du -sh命令的用途是显示指定文件或目录的总大小，并以人类可读的格式（如K、M、G）呈现。<br>例如，如果您想查看/home/user目录的总大小，您可以执行：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>du -sh --exclude=&#39;*.git&#39;
</span></span></code></pre></div><p>常见选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-h或--human-readable：以更易于阅读的格式显示大小（例如，1K、234M、2G）。
</span></span><span style=display:flex><span>-s或--summarize：只显示总计的大小，而不列出每个子目录的大小。
</span></span><span style=display:flex><span>-a或--all：列出所有个别文件和目录的磁盘使用情况，而不仅仅是子目录的总计。
</span></span><span style=display:flex><span>-c或--total：显示所有列出的文件和目录的总计大小。
</span></span><span style=display:flex><span>-d或--max-depth：指定目录层次的深度。
</span></span><span style=display:flex><span>--exclude：排除某些文件或目录。
</span></span><span style=display:flex><span>-l或--count-links：如果是硬链接，则重复计算其大小。
</span></span><span style=display:flex><span>-B或--block-size：指定块大小，用于计算磁盘使用情况。
</span></span><span style=display:flex><span>-S或--separate-dirs：不包括子目录的大小。
</span></span><span style=display:flex><span>--apparent-size：显示文件的实际大小，而不是磁盘占用量。
</span></span><span style=display:flex><span>--si：使用1000而不是1024作为大小单位的基础。
</span></span></code></pre></div><p>要查看当前目录及其子目录中所有文件和目录的磁盘使用情况，并显示总计，可以使用：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>du -ach
</span></span></code></pre></div><p>要查看特定目录的磁盘使用情况，并排除某些类型的文件，例如.git目录，可以使用：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>du -sh --exclude=&#39;*.git&#39;
</span></span></code></pre></div></div><footer class=post-footer><div class=post-tags><a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/linux10/ rel=next title=shell脚本编程基础><i class="fa fa-chevron-left"></i> shell脚本编程基础</a></div><div class="post-nav-prev post-nav-item"><a href=/post/linux08/ rel=prev title="文本处理三剑客 ">文本处理三剑客
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"http://localhost:1313/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.js defer></script></body></html>