<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="shell脚本编程基础10.1"><meta itemprop=description content="1208034077#qq.com"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://www.lanhui.live/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux"><meta property="og:type" content="article"><meta property="og:title" content="shell脚本编程基础10.1"><meta property="og:description" content="1208034077#qq.com"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://www.lanhui.live/post/linux11/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2024-12-05 04:06:00 +0800 CST"><meta property="article:modified_time" content="2024-12-05 04:06:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.89002406547f1cea16a5ae81687e451f88fa6fc9e470d8a2dccb6dbcd0ab6db8.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"linux11","permalink":"https://www.lanhui.live/post/linux11/","title":"shell脚本编程基础10.1","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>shell脚本编程基础10.1 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>79</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#编程基础>编程基础</a></li><li><a href=#短路运算>短路运算</a></li><li><a href=#条件测试命令>条件测试命令</a></li><li><a href=#变量测试>变量测试</a></li><li><a href=#数值测试>数值测试</a></li><li><a href=#字符串测试>字符串测试</a></li><li><a href=#文件测试>文件测试</a><ul><li><a href=#文件权限测试>文件权限测试：</a></li></ul></li><li><a href=#关于--和-->关于 () 和 { }</a></li><li><a href=#组合测试条件>组合测试条件</a></li><li><a href=#第一种方式>第一种方式</a></li><li><a href=#第二种方式>第二种方式</a><ul><li><a href=#练习><strong>练习</strong></a></li></ul></li><li><a href=#使用read命令来接受输入>使用read命令来接受输入</a></li><li><a href=#bash-shell-的配置文件>bash shell 的配置文件</a><ul><li><a href=#按生效范围划分两类>按生效范围划分两类</a></li></ul></li><li><a href=#shell登录两种方式分类>shell登录两种方式分类</a><ul><li><a href=#交互式登录>交互式登录</a></li><li><a href=#非交互式登录>非交互式登录</a></li></ul></li><li><a href=#按功能划分分类>按功能划分分类</a><ul><li><a href=#profile类>Profile类</a></li><li><a href=#bashrc类>Bashrc类</a></li></ul></li><li><a href=#编辑配置文件生效>编辑配置文件生效</a></li><li><a href=#bash-退出任务>Bash 退出任务</a><ul><li><a href=#练习-1>练习</a></li></ul></li><li><a href=#流程控制>流程控制</a><ul><li><a href=#选择执行-if-语句>选择执行 if 语句</a></li><li><a href=#练习-2>练习</a></li></ul></li><li><a href=#循环>循环</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>1208034077#qq.com</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>79</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=96880></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=241></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-05T04:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://www.lanhui.live/post/linux11/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="1208034077#qq.com"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="shell脚本编程基础10.1"><meta itemprop=description content="编程基础 短路运算 短路与 && CMD1 && CMD2 第一个CMD1结果为真(1)，第二个CMD2必须要参与运算，才能得到最终的结果 第一个CMD1结果为假(0)，总"></span><header class=post-header><h1 class=post-title itemprop="name headline">shell脚本编程基础10.1</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-12-05 04:06:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-12-05 04:06:00 +0800 CST">2024-12-05
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/linux itemprop=url rel=index><span itemprop=name>linux</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><h2 id=编程基础>编程基础
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e5%9f%ba%e7%a1%80></a></h2><h2 id=短路运算>短路运算
<a class=header-anchor href=#%e7%9f%ad%e8%b7%af%e8%bf%90%e7%ae%97></a></h2><ul><li>短路与 &&</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>CMD1 &amp;&amp; CMD2
</span></span><span style=display:flex><span>第一个CMD1结果为真(1)，第二个CMD2必须要参与运算，才能得到最终的结果
</span></span><span style=display:flex><span>第一个CMD1结果为假(0)，总的结果必定为0，因此不需要执行CMD2
</span></span></code></pre></div><ul><li>短路或 ||</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>CMD1 || CMD2
</span></span><span style=display:flex><span>第一个CMD1结果为真(1)，总的结果必定为1，因此不需要执行CMD2
</span></span><span style=display:flex><span>第一个CMD1结果为假(0)，第二个CMD2 必须要参与运算,才能得到最终的结果
</span></span></code></pre></div><ul><li>短路与和或组合</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>CMD1 &amp;&amp; CMD2 || CMD3
</span></span><span style=display:flex><span>当CMD1执行成功时,会执行CMD2
</span></span><span style=display:flex><span>当CMD1执行失败时,会执行CMD3
</span></span><span style=display:flex><span>注意： CMD1 || CMD2 &amp;&amp; CMD3 逻辑不通,不使用
</span></span></code></pre></div><h2 id=条件测试命令>条件测试命令
<a class=header-anchor href=#%e6%9d%a1%e4%bb%b6%e6%b5%8b%e8%af%95%e5%91%bd%e4%bb%a4></a></h2><p>条件测试：判断某需求是否满足，需要由测试机制来实现，专用的测试表达式需要由测试命令辅助完成<br>测试过程，实现评估布尔声明，以便用在条件性环境下进行执行<br>若真，则状态码变量 $? 返回0<br>若假，则状态码变量 $? 返回1<br>条件测试命令</p><ul><li>test EXPRESSION</li><li>[ EXPRESSION ] #和test 等价，建议使用 [ ]</li><li>[[ EXPRESSION ]] 相关于增强版的 [ ], 支持[]的用法,且支持扩展正则表达式和通配符
注意：EXPRESSION前后必须有空白字符<br>帮助：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>ocky9 <span style=color:#f92672>~</span>]<span style=color:#75715e>#type [</span>
</span></span><span style=display:flex><span>[ is a shell builtin
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#help [</span>
</span></span><span style=display:flex><span>[: [ arg<span style=color:#f92672>...</span> ]
</span></span><span style=display:flex><span>Evaluate conditional expression<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>This is a synonym <span style=color:#66d9ef>for</span> the <span style=color:#e6db74>&#34;test&#34;</span> builtin, but the last argument must
</span></span><span style=display:flex><span>be a literal <span style=color:#960050;background-color:#1e0010>`</span>]<span style=color:#e6db74>&#39;, to match the opening `[&#39;</span><span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>rocky9 <span style=color:#f92672>~</span>]<span style=color:#75715e># help test</span>
</span></span><span style=display:flex><span>test: test [expr]
</span></span><span style=display:flex><span>    Evaluate conditional expression<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Exits with a status of <span style=color:#ae81ff>0</span> (true) <span style=color:#f92672>or</span> <span style=color:#ae81ff>1</span> (false) depending on
</span></span><span style=display:flex><span>    the evaluation of EXPR<span style=color:#f92672>.</span>  Expressions may be unary <span style=color:#f92672>or</span> binary<span style=color:#f92672>.</span>  Unary
</span></span><span style=display:flex><span>    expressions are often used to examine the status of a file<span style=color:#f92672>.</span>  There
</span></span><span style=display:flex><span>    are string operators <span style=color:#f92672>and</span> numeric comparison operators as well<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    The behavior of test depends on the number of arguments<span style=color:#f92672>.</span>  Read the
</span></span><span style=display:flex><span>    bash manual page <span style=color:#66d9ef>for</span> the complete specification<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>File</span> operators:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>a FILE        True <span style=color:#66d9ef>if</span> file exists<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>b FILE        True <span style=color:#66d9ef>if</span> file is block special<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>c FILE        True <span style=color:#66d9ef>if</span> file is character special<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>d FILE        True <span style=color:#66d9ef>if</span> file is a directory<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>e FILE        True <span style=color:#66d9ef>if</span> file exists<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>f FILE        True <span style=color:#66d9ef>if</span> file exists <span style=color:#f92672>and</span> is a regular file<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>g FILE        True <span style=color:#66d9ef>if</span> file is set<span style=color:#f92672>-</span>group<span style=color:#f92672>-</span>id<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>h FILE        True <span style=color:#66d9ef>if</span> file is a symbolic link<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>L FILE        True <span style=color:#66d9ef>if</span> file is a symbolic link<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>k FILE        True <span style=color:#66d9ef>if</span> file has its <span style=color:#960050;background-color:#1e0010>`</span>sticky<span style=color:#e6db74>&#39; bit set.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>p FILE        True <span style=color:#66d9ef>if</span> file is a named pipe<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>r FILE        True <span style=color:#66d9ef>if</span> file is readable by you<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>s FILE        True <span style=color:#66d9ef>if</span> file exists <span style=color:#f92672>and</span> is <span style=color:#f92672>not</span> empty<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>S FILE        True <span style=color:#66d9ef>if</span> file is a socket<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>t FD          True <span style=color:#66d9ef>if</span> FD is opened on a terminal<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>u FILE        True <span style=color:#66d9ef>if</span> the file is set<span style=color:#f92672>-</span>user<span style=color:#f92672>-</span>id<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>w FILE        True <span style=color:#66d9ef>if</span> the file is writable by you<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>x FILE        True <span style=color:#66d9ef>if</span> the file is executable by you<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>O FILE        True <span style=color:#66d9ef>if</span> the file is effectively owned by you<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>G FILE        True <span style=color:#66d9ef>if</span> the file is effectively owned by your group<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>N FILE        True <span style=color:#66d9ef>if</span> the file has been modified since it was last read<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      FILE1 <span style=color:#f92672>-</span>nt FILE2  True <span style=color:#66d9ef>if</span> file1 is newer than file2 (according to
</span></span><span style=display:flex><span>                       modification date)<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      FILE1 <span style=color:#f92672>-</span>ot FILE2  True <span style=color:#66d9ef>if</span> file1 is older than file2<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      FILE1 <span style=color:#f92672>-</span>ef FILE2  True <span style=color:#66d9ef>if</span> file1 is a hard link to file2<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>String</span> operators:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>z STRING      True <span style=color:#66d9ef>if</span> string is empty<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>n STRING
</span></span><span style=display:flex><span>         STRING      True <span style=color:#66d9ef>if</span> string is <span style=color:#f92672>not</span> empty<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      STRING1 <span style=color:#f92672>=</span> STRING2
</span></span><span style=display:flex><span>                     True <span style=color:#66d9ef>if</span> the strings are equal<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      STRING1 <span style=color:#f92672>!=</span> STRING2
</span></span><span style=display:flex><span>                     True <span style=color:#66d9ef>if</span> the strings are <span style=color:#f92672>not</span> equal<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      STRING1 <span style=color:#f92672>&lt;</span> STRING2
</span></span><span style=display:flex><span>                     True <span style=color:#66d9ef>if</span> STRING1 sorts before STRING2 lexicographically<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      STRING1 <span style=color:#f92672>&gt;</span> STRING2
</span></span><span style=display:flex><span>                     True <span style=color:#66d9ef>if</span> STRING1 sorts after STRING2 lexicographically<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Other operators:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>o OPTION      True <span style=color:#66d9ef>if</span> the shell option OPTION is enabled<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>v VAR         True <span style=color:#66d9ef>if</span> the shell variable VAR is set<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>-</span>R VAR         True <span style=color:#66d9ef>if</span> the shell variable VAR is set <span style=color:#f92672>and</span> is a name
</span></span><span style=display:flex><span>                     reference<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>!</span> EXPR         True <span style=color:#66d9ef>if</span> expr is false<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      EXPR1 <span style=color:#f92672>-</span>a EXPR2 True <span style=color:#66d9ef>if</span> both expr1 AND expr2 are true<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>      EXPR1 <span style=color:#f92672>-</span>o EXPR2 True <span style=color:#66d9ef>if</span> either expr1 OR expr2 is true<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      arg1 OP arg2   Arithmetic tests<span style=color:#f92672>.</span>  OP is one of <span style=color:#f92672>-</span>eq, <span style=color:#f92672>-</span>ne,
</span></span><span style=display:flex><span>                     <span style=color:#f92672>-</span>lt, <span style=color:#f92672>-</span>le, <span style=color:#f92672>-</span>gt, <span style=color:#f92672>or</span> <span style=color:#f92672>-</span>ge<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Arithmetic binary operators <span style=color:#66d9ef>return</span> true <span style=color:#66d9ef>if</span> ARG1 is equal, <span style=color:#f92672>not</span><span style=color:#f92672>-</span>equal,
</span></span><span style=display:flex><span>    less<span style=color:#f92672>-</span>than, less<span style=color:#f92672>-</span>than<span style=color:#f92672>-</span><span style=color:#f92672>or</span><span style=color:#f92672>-</span>equal, greater<span style=color:#f92672>-</span>than, <span style=color:#f92672>or</span> greater<span style=color:#f92672>-</span>than<span style=color:#f92672>-</span><span style=color:#f92672>or</span><span style=color:#f92672>-</span>equal
</span></span><span style=display:flex><span>    than ARG2<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Exit Status:
</span></span><span style=display:flex><span>    Returns success <span style=color:#66d9ef>if</span> EXPR evaluates to true; fails <span style=color:#66d9ef>if</span> EXPR evaluates to
</span></span><span style=display:flex><span>    false <span style=color:#f92672>or</span> an invalid argument is given<span style=color:#f92672>.</span>
</span></span></code></pre></div><h2 id=变量测试>变量测试
<a class=header-anchor href=#%e5%8f%98%e9%87%8f%e6%b5%8b%e8%af%95></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#判断 NAME 变量是否定义
</span></span><span style=display:flex><span>[ -v NAME ]
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#unset x
</span></span><span style=display:flex><span>[root@centos8 ~]#test -v x
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10
</span></span><span style=display:flex><span>[root@centos8 ~]#test -v x
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#y=
</span></span><span style=display:flex><span>[root@centos8 ~]#test -v y
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#注意 [ ] 中需要空格，否则会报下面错误
</span></span><span style=display:flex><span>[root@centos8 ~]#[-v name]
</span></span><span style=display:flex><span>-bash: [-v: command not found
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -v name ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><h2 id=数值测试>数值测试
<a class=header-anchor href=#%e6%95%b0%e5%80%bc%e6%b5%8b%e8%af%95></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-eq 是否等于
</span></span><span style=display:flex><span>-ne 是否不等于
</span></span><span style=display:flex><span>-gt 是否大于
</span></span><span style=display:flex><span>-ge 是否大于等于
</span></span><span style=display:flex><span>-lt 是否小于
</span></span><span style=display:flex><span>-le 是否小于等于
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#i=10
</span></span><span style=display:flex><span>[root@centos8 ~]#j=8
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $i -lt $j ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $i -gt $j ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ i -gt j ]
</span></span><span style=display:flex><span>-bash: [: i: integer expression expected
</span></span></code></pre></div><p>算术表达式比较</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>== 相等
</span></span><span style=display:flex><span>!= 不相等
</span></span><span style=display:flex><span>&lt;=
</span></span><span style=display:flex><span>&gt;=
</span></span><span style=display:flex><span>&lt;
</span></span><span style=display:flex><span>&gt;
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#x=10;y=10;(( x == y ));echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x == y ));echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x != y ));echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=10;(( x != y ));echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x &gt; y ));echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x &lt; y ));echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><h2 id=字符串测试>字符串测试
<a class=header-anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%b5%8b%e8%af%95></a></h2><p><strong>test和 [ ] 字符串测试用法</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-z STRING 字符串是否为空，没定义或空为真，不空为假，
</span></span><span style=display:flex><span>-n STRING 字符串是否不空，不空为真，空为假
</span></span><span style=display:flex><span>STRING 同上
</span></span><span style=display:flex><span>STRING1 = STRING2 是否等于，注意 = 前后有空格
</span></span><span style=display:flex><span>STRING1 != STRING2 是否不等于
</span></span><span style=display:flex><span>&gt; ascii码是否大于ascii码
</span></span><span style=display:flex><span>&lt; 是否小于
</span></span></code></pre></div><p><strong>[[]] 字符串测试用法</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[[ expression ]] 用法
</span></span><span style=display:flex><span>== 左侧字符串是否和右侧的PATTERN相同
</span></span><span style=display:flex><span>注意:此表达式用于[[ ]]中，PATTERN为通配符
</span></span><span style=display:flex><span>=~ 左侧字符串是否能够被右侧的正则表达式的PATTERN所匹配
</span></span><span style=display:flex><span>注意: 此表达式用于[[ ]]中为扩展的正则表达式
</span></span></code></pre></div><p><strong>建议：当使用正则表达式或通配符使用[[ ]]，其它情况一般使用 [ ]</strong>
范例：使用 [ ]</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#unset str
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str=&#34;&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str=&#34; &#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -n &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#unset str
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -n &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#str=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str1=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#str2=mage
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $str1 = $str2 ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#str2=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $str1 = $str2 ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>范例：在比较字符串时，建议变量放在“ ”中</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#[ &#34;$NAME&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=&#34;I love linux&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $NAME ]
</span></span><span style=display:flex><span>-bash: [: love: binary operator expected
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$NAME&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ I love linux ]
</span></span><span style=display:flex><span>-bash: [: love: binary operator expected
</span></span></code></pre></div><p>范例: [[ ]] 和通配符</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a*&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $FILE
</span></span><span style=display:flex><span>a*
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;ab&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a*&#34;
</span></span><span style=display:flex><span>#[[]]中如果不想使用通配符*,只想表达*本身,可以用&#34; &#34;引起来
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a&#34;*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;ab&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a&#34;*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#[[]]中如果不想使用通配符*,只想表达*本身,也可以使用转义符
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a\* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a\b&#34;
</span></span><span style=display:flex><span>[root@centos8 ~t]#[[ $FILE == a\* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a*&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a\* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#通配符?
</span></span><span style=display:flex><span>[root@centos8 script]#FILE=abc
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $FILE == ??? ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 script]#FILE=abcd
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $FILE == ??? ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#通配符
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=&#34;linux1&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$NAME&#34; == linux* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$NAME&#34; == &#34;linux*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=&#34;linux*&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$NAME&#34; == &#34;linux*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#结论：[[ == ]] == 右侧的 * 做为通配符，不要加“”，只想做为*符号使用时, 需要加 “” 或转义
</span></span></code></pre></div><p>范例: 判断合理的考试成绩</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 script]#SCORE=101
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ 100|[0-9]{1,2} ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ ^(100|[0-9]{1,2})$ ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 script]#SCORE=10
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ ^(100|[0-9]{1,2})$ ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 script]#SCORE=abc
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ ^(100|[0-9]{1,2})$ ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例：使用 [[ ]] 判断文件后缀</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#通配符
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=test.log
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; == *.log ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=test.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; == *.log ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; != *.log ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#正则表达式
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; =~ \.log$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=test.log
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; =~ \.log$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>范例: 判断合法的非负整数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#N=100
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$N&#34; =~ ^[0-9]+$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#N=Magedu10
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$N&#34; =~ ^[0-9]+$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例: 判断合法IP</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#IP=1.2.3.4
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$IP&#34; =~ ^([0-9]{1,3}\.){3}[0-9]{1,3}$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#IP=1.2.3.4567
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$IP&#34; =~ ^([0-9]{1,3}.){3}[0-9]{1,3}$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $IP =~ ^(([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}
</span></span><span style=display:flex><span>([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos7 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat check_ip.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-12-11</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： check_ip.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>IP<span style=color:#f92672>=</span>$1
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $IP <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>(([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>){</span>3<span style=color:#f92672>}([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo $IP is valid <span style=color:#f92672>||</span> echo $IP is invalid
</span></span></code></pre></div><h2 id=文件测试>文件测试
<a class=header-anchor href=#%e6%96%87%e4%bb%b6%e6%b5%8b%e8%af%95></a></h2><p>存在性测试</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-a FILE：同 -e
</span></span><span style=display:flex><span>-e FILE: 文件存在性测试，存在为真，否则为假
</span></span><span style=display:flex><span>-b FILE：是否存在且为块设备文件
</span></span><span style=display:flex><span>-c FILE：是否存在且为字符设备文件
</span></span><span style=display:flex><span>-d FILE：是否存在且为目录文件
</span></span><span style=display:flex><span>-f FILE：是否存在且为普通文件
</span></span><span style=display:flex><span>-h FILE 或 -L FILE：存在且为符号链接文件
</span></span><span style=display:flex><span>-p FILE：是否存在且为命名管道文件
</span></span><span style=display:flex><span>-S FILE：是否存在且为套接字文件
</span></span></code></pre></div><p>范例： -e和-a 表示判断文件的存在性，建议使用-e</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#文件是否不存在
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -a /etc/nologin ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -a /etc/nologin ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#文件是否存在
</span></span><span style=display:flex><span>[root@centos8 ~]# [ -a /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#取反后结果却没有变化
</span></span><span style=display:flex><span>[root@centos8 ~]# [ ! -a /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -a /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#文件是否存在
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -e /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#此为推荐写法
</span></span><span style=display:flex><span>[root@centos8 ~]#[ ! -e /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -d /etc ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -d /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -L /bin ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -L /bin/ ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><h3 id=文件权限测试>文件权限测试：
<a class=header-anchor href=#%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%e6%b5%8b%e8%af%95></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-r FILE：是否存在且可读
</span></span><span style=display:flex><span>-w FILE: 是否存在且可写
</span></span><span style=display:flex><span>-x FILE: 是否存在且可执行
</span></span><span style=display:flex><span>-u FILE：是否存在且拥有suid权限
</span></span><span style=display:flex><span>-g FILE：是否存在且拥有sgid权限
</span></span><span style=display:flex><span>-k FILE：是否存在且拥有sticky权限
</span></span></code></pre></div><p><strong>注意：最终结果由用户对文件的实际权限决定，而非文件属性决定</strong>
范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#[ -w /etc/shadow ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -x /etc/shadow ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -w test.txt ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#chattr +i test.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#lsattr test.txt
</span></span><span style=display:flex><span>----i-------------- nianling.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -w test.txt ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#chattr -i test.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -w test.txt ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>文件属性测试</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-s FILE #是否存在且非空
</span></span><span style=display:flex><span>-t fd #fd 文件描述符是否在某终端已经打开
</span></span><span style=display:flex><span>-N FILE #文件自从上一次被读取之后是否被修改过
</span></span><span style=display:flex><span>-O FILE #当前有效用户是否为文件属主
</span></span><span style=display:flex><span>-G FILE #当前有效用户是否为文件属组
</span></span><span style=display:flex><span>FILE1 -ef FILE2 #FILE1是否是FILE2的硬链接
</span></span><span style=display:flex><span>FILE1 -nt FILE2 #FILE1是否新于FILE2（mtime）
</span></span><span style=display:flex><span>FILE1 -ot FILE2 #FILE1是否旧于FILE2
</span></span></code></pre></div><h2 id=关于--和-->关于 () 和 { }
<a class=header-anchor href=#%e5%85%b3%e4%ba%8e--%e5%92%8c--></a></h2><p>（CMD1;CMD2;&mldr;）和 { CMD1;CMD2;&mldr;; } 都可以将多个命令组合在一起，批量执行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#man bash
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>( list ) 会开启子shell,并且list中变量赋值及内部命令执行后,将不再影响后续的环境
</span></span><span style=display:flex><span>帮助参看:man bash 搜索(list)
</span></span><span style=display:flex><span>{ list; } 不会启子shell, 在当前shell中运行,会影响当前shell环境
</span></span><span style=display:flex><span>帮助参看:man bash 搜索{ list; }
</span></span></code></pre></div><p>范例: () 和 {}</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#name=mage;(echo $name;name=wang;echo $name );echo $name
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>[root@centos8 ~]#name=mage;{ echo $name;name=wang;echo $name; } ;echo $name
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#umask
</span></span><span style=display:flex><span>0022
</span></span><span style=display:flex><span>[root@centos8 ~]#(umask 066;touch f1.txt)
</span></span><span style=display:flex><span>[root@centos8 ~]#ll f1.txt
</span></span><span style=display:flex><span>-rw------- 1 root root 0 Dec 23 16:58 f1.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#umask
</span></span><span style=display:flex><span>0022
</span></span><span style=display:flex><span>[root@centos8 ~]#( cd /data;ls )
</span></span><span style=display:flex><span>test.log
</span></span><span style=display:flex><span>[root@centos8 ~]#pwd
</span></span><span style=display:flex><span>/root
</span></span><span style=display:flex><span>[root@centos8 ~]#{ cd /data;ls; }
</span></span><span style=display:flex><span>test.log
</span></span><span style=display:flex><span>[root@centos8 data]#pwd
</span></span><span style=display:flex><span>/data
</span></span><span style=display:flex><span>[root@centos8 data]#
</span></span><span style=display:flex><span>#（）会开启子shell
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $BASHPID
</span></span><span style=display:flex><span>1920
</span></span><span style=display:flex><span>[root@centos8 ~]#( echo $BASHPID;sleep 100)
</span></span><span style=display:flex><span>1979
</span></span><span style=display:flex><span>[root@centos8 ~]#pstree -p
</span></span><span style=display:flex><span>├─sshd(719)───sshd(1906)───sshd(1919)─┬─bash(1920)───bash(1979)───sleep(1980)
</span></span><span style=display:flex><span>#{ } 不会开启子shell
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $BASHPID
</span></span><span style=display:flex><span>1920
</span></span><span style=display:flex><span>[root@centos8 ~]#{ echo $BASHPID; }
</span></span><span style=display:flex><span>1920
</span></span></code></pre></div><h2 id=组合测试条件>组合测试条件
<a class=header-anchor href=#%e7%bb%84%e5%90%88%e6%b5%8b%e8%af%95%e6%9d%a1%e4%bb%b6></a></h2><h2 id=第一种方式>第一种方式
<a class=header-anchor href=#%e7%ac%ac%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[ EXPRESSION1 -a EXPRESSION2 ] #并且，EXPRESSION1和EXPRESSION2都是真，结果才为真
</span></span><span style=display:flex><span>[ EXPRESSION1 -o EXPRESSION2 ] #或者，EXPRESSION1和EXPRESSION2只要有一个真，结果就为
</span></span><span style=display:flex><span>真
</span></span><span style=display:flex><span>[ ! EXPRESSION ] #取反
</span></span></code></pre></div><p><strong>说明： -a 和 -o 需要使用测试命令进行，[[ ]] 不支持</strong>
范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;/data/scrips/test.sh&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#ll /data/scrips/test.sh
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 382 Dec 23 09:32 /data/scripts/test.sh
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f $FILE -a -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#chmod +x /data/scripts/test.sh
</span></span><span style=display:flex><span>[root@centos8 ~]#ll /data/scripts/test.sh
</span></span><span style=display:flex><span>-rwxr-xr-x 1 root root 382 Dec 23 09:32 /data/script40/test.sh
</span></span><span style=display:flex><span>#并且
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f $FILE -a -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#chmod -x /data/scripts/test.sh
</span></span><span style=display:flex><span>[root@centos8 ~]#ll /data/scripts/test.sh
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 382 Dec 23 09:32 /data/scripts/test.sh
</span></span><span style=display:flex><span>#或者
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f $FILE -o -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#取反
</span></span><span style=display:flex><span>[root@centos8 ~]#[ ! -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -x $FILE ]
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><h2 id=第二种方式>第二种方式
<a class=header-anchor href=#%e7%ac%ac%e4%ba%8c%e7%a7%8d%e6%96%b9%e5%bc%8f></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>COMMAND1 &amp;&amp; COMMAND2 #并且，短路与，代表条件性的AND THEN
</span></span><span style=display:flex><span>如果COMMAND1 成功,将执行COMMAND2,否则,将不执行COMMAND2
</span></span><span style=display:flex><span>COMMAND1 || COMMAND2 #或者，短路或，代表条件性的OR ELSE
</span></span><span style=display:flex><span>如果COMMAND1 成功,将不执行COMMAND2,否则,将执行COMMAND2
</span></span><span style=display:flex><span>! COMMAND #非,取反
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos7 ~]#[ $[RANDOM%6] -eq 0 ] &amp;&amp; rm -rf /* || echo &#34;click&#34;
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#test &#34;A&#34; = &#34;B&#34; &amp;&amp; echo &#34;Strings are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#test &#34;A&#34;-eq &#34;B&#34; &amp;&amp; echo &#34;Integers are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;A&#34; = &#34;B&#34; ] &amp;&amp; echo &#34;Strings are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$A&#34; -eq &#34;$B&#34; ] &amp;&amp; echo &#34;Integers are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f /bin/cat -a -x /bin/cat ] &amp;&amp; cat /etc/fstab
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$HOSTNAME&#34; -o &#34;$HOSTNAME&#34; = &#34;localhost.localdomain&#34; ]&amp;&amp;
</span></span><span style=display:flex><span>hostname www.magedu.com
</span></span><span style=display:flex><span>[root@centos8 ~]#id wang &amp;&gt; /dev/null || useradd wang
</span></span><span style=display:flex><span>[root@centos8 ~]#id zhang &amp;&gt; /dev/null || useradd zhang
</span></span><span style=display:flex><span>[root@centos8 ~]#getent passwd zhang
</span></span><span style=display:flex><span>zhang:x:1002:1002::/home/zhang:/bin/bash
</span></span><span style=display:flex><span>[root@centos8 ~]#grep -q no_such_user /etc/passwd || echo &#39;No such user&#39;
</span></span><span style=display:flex><span>No such user
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#[ -f “$FILE” ] &amp;&amp; [[ “$FILE”=~ .*\.sh$ ]] &amp;&amp; chmod +x $FILE
</span></span><span style=display:flex><span>[root@centos8 ~]#ping -c1 -W1 172.16.0.1 &amp;&gt; /dev/null &amp;&amp; echo &#39;172.16.0.1 is
</span></span><span style=display:flex><span>up&#39; || (echo &#39;172.16.0.1 is unreachable&#39;; exit 1)
</span></span><span style=display:flex><span>172.16.0.1 is up
</span></span><span style=display:flex><span>[root@centos8 ~]#IP=10.0.0.111;ping -c1 -W1 $IP &amp;&gt; /dev/null &amp;&amp; echo $IP is up
</span></span><span style=display:flex><span>|| echo $IP is down
</span></span><span style=display:flex><span>10.0.0.111 is down
</span></span><span style=display:flex><span>[root@centos8 ~]#IP=10.0.0.1;ping -c1 -W1 $IP &amp;&gt; /dev/null &amp;&amp; echo $IP is up ||
</span></span><span style=display:flex><span>echo $IP is down
</span></span><span style=display:flex><span>10.0.0.1 is up
</span></span></code></pre></div><p>范例：&& 和 || 组合使用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null || echo &#34;$NAME is not
</span></span><span style=display:flex><span>exist&#34;
</span></span><span style=display:flex><span>wange is not exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>wange is not exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null || echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>&amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null || echo &#34;$NAME is not
</span></span><span style=display:flex><span>exist&#34; &amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>wange is not exist
</span></span><span style=display:flex><span>wange is exist
</span></span><span style=display:flex><span>#结论：如果&amp;&amp; 和 || 混合使用，&amp;&amp; 要在前，|| 放在后
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>useradd $NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#id wange
</span></span><span style=display:flex><span>uid=1002(wange) gid=1002(wange) groups=1002(wange)
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wangge; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>( useradd $NAME; echo $NAME is created )
</span></span><span style=display:flex><span>wangge is created
</span></span><span style=display:flex><span>[root@centos8 ~]#id wangge
</span></span><span style=display:flex><span>uid=1003(wangge) gid=1003(wangge) groups=1003(wangge)
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wanggege; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>|| { useradd $NAME; echo $NAME is created; }
</span></span><span style=display:flex><span>wanggege is created
</span></span></code></pre></div><p>范例：网络状态判断</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/ping.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： ping.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>IP<span style=color:#f92672>=</span>172.16.0.1
</span></span><span style=display:flex><span>ping -c1 -W1 $IP &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;</span>$IP<span style=color:#e6db74> is up&#34;</span> <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;</span>$IP<span style=color:#e6db74> is
</span></span></span><span style=display:flex><span><span style=color:#e6db74>unreachable&#34;</span>; exit; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Script is finished&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/scripts/ping.sh</span>
</span></span><span style=display:flex><span>172.16.0.1 is up
</span></span><span style=display:flex><span>Script is finished
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#. /etc/os-release; [[ $ID == &#34;rocky&#34; ]] &amp;&amp; [[ $VERSION_ID ==
</span></span><span style=display:flex><span>8* ]] &amp;&amp; echo Rocky8 || echo CentOS8
</span></span><span style=display:flex><span>[root@rocky8 ~]#. /etc/os-release; [[ $ID == &#34;rocky&#34; ]] &amp;&amp; [[ $VERSION_ID == 8*
</span></span><span style=display:flex><span>]] &amp;&amp; echo Rocky8 || echo CentOS8
</span></span><span style=display:flex><span>Rocky8
</span></span></code></pre></div><p>范例：磁盘空间的判断</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/script/disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>WARNING<span style=color:#f92672>=</span><span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>SPACE_USED<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>df|grep <span style=color:#e6db74>&#39;^/dev/sd&#39;</span>|tr -s <span style=color:#e6db74>&#39; &#39;</span> %|cut -d% -f5|sort -nr|head -1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$SPACE_USED<span style=color:#e6db74>&#34;</span> -ge $WARNING <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;disk used is </span>$SPACE_USED<span style=color:#e6db74>,will be full&#34;</span>
</span></span><span style=display:flex><span>| mail -s diskwaring root
</span></span></code></pre></div><p>范例：磁盘空间和Inode号的检查脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>WARNING<span style=color:#f92672>=</span><span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>SPACE_USED<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>df | grep <span style=color:#e6db74>&#39;^/dev/sd&#39;</span>|grep -oE <span style=color:#e6db74>&#39;[0-9]+%&#39;</span>|tr -d %| sort -nr|head -1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>INODE_USED<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>df -i | grep <span style=color:#e6db74>&#39;^/dev/sd&#39;</span>|grep -oE <span style=color:#e6db74>&#39;[0-9]+%&#39;</span>|tr -d %| sort -nr|head
</span></span><span style=display:flex><span>-1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$SPACE_USED<span style=color:#e6db74>&#34;</span> -gt $WARNING -o <span style=color:#e6db74>&#34;</span>$INODE_USED<span style=color:#e6db74>&#34;</span> -gt $WARNING <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;DISK
</span></span></span><span style=display:flex><span><span style=color:#e6db74>USED:</span>$SPACE_USED<span style=color:#e6db74>%, INODE_USED:</span>$INODE_USED<span style=color:#e6db74>,will be full&#34;</span> | mail -s <span style=color:#e6db74>&#34;DISK Warning&#34;</span>
</span></span><span style=display:flex><span>root@wangxiaochun.com
</span></span></code></pre></div><h3 id=练习><strong>练习</strong>
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0></a></h3><p>1、编写脚本 argsnum.sh，接受一个文件路径作为参数；如果参数个数小于1，则提示用户“至少应该给
一个参数”，并立即退出；如果参数个数不小于1，则显示第一个参数所指向的文件中的空白行数
2、编写脚本 hostping.sh，接受一个主机的IPv4地址做为参数，测试是否可连通。如果能ping通，则提
示用户“该IP地址可访问”；如果不可ping通，则提示用户“该IP地址不可访问”
3、编写脚本 checkdisk.sh，检查磁盘分区空间和inode使用率，如果超过80%，就发广播警告空间将满
4、编写脚本 per.sh，判断当前用户对指定参数文件，是否不可读并且不可写
5、编写脚本 excute.sh ，判断参数文件是否为sh后缀的普通文件，如果是，添加所有人可执行权限，
否则提示用户非脚本文件
6、编写脚本 nologin.sh和 login.sh，实现禁止和允许普通用户登录系统</p><h2 id=使用read命令来接受输入>使用read命令来接受输入
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8read%e5%91%bd%e4%bb%a4%e6%9d%a5%e6%8e%a5%e5%8f%97%e8%be%93%e5%85%a5></a></h2><p>使用read来把输入值分配给一个或多个shell变量，read从标准输入中读取值，给每个单词分配一个变
量，所有剩余单词都被分配给最后一个变量，如果变量名没有指定，默认标准输入的值赋值给系统内置
变量REPLY<br>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>read [options] [name ...]
</span></span></code></pre></div><p>常见选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-p 指定要显示的提示
</span></span><span style=display:flex><span>-s 静默输入，一般用于密码
</span></span><span style=display:flex><span>-n N 指定输入的字符长度N
</span></span><span style=display:flex><span>-d &#39;字符&#39; 输入结束符
</span></span><span style=display:flex><span>-t N TIMEOUT为N秒
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#read
</span></span><span style=display:flex><span>wangxiaochun
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $REPLY
</span></span><span style=display:flex><span>wangxiaochun
</span></span><span style=display:flex><span>[root@centos8 ~]#read NAME TITLE
</span></span><span style=display:flex><span>wang cto
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>cto
</span></span><span style=display:flex><span>[root@centos8 ~]#read -p &#34;Please input your name: &#34; NAME
</span></span><span style=display:flex><span>Please input your name: wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>wang
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#read x y z &lt;&lt;&lt; &#34;I love you&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $x
</span></span><span style=display:flex><span>I
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $y
</span></span><span style=display:flex><span>love
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $z
</span></span><span style=display:flex><span>you
</span></span><span style=display:flex><span>[root@centos8 ~]#
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#man bash
</span></span><span style=display:flex><span>Each command in a pipeline is executed as separate process (i.e., in a subshell).
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#Pipelines:A pipeline is a sequence of one or more commands separated by one of
</span></span><span style=display:flex><span>the control operators | or |&amp;
</span></span><span style=display:flex><span>Each command in a pipeline is executed as a separate process (i.e., in a
</span></span><span style=display:flex><span>subshell).
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | read NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | { read NAME; echo $NAME; }
</span></span><span style=display:flex><span>magedu
</span></span></code></pre></div><p><strong>范例：面试题 read和输入重定向</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 scripts]#cat test.txt
</span></span><span style=display:flex><span>1 2
</span></span><span style=display:flex><span>[root@centos8 scripts]#read i j &lt; test.txt ; echo i=$i j=$j
</span></span><span style=display:flex><span>i=1 j=2
</span></span><span style=display:flex><span>[root@centos8 scripts]#echo 1 2 | read x y ; echo x=$x y=$y
</span></span><span style=display:flex><span>x= y=       echo x=$x y=$y 为父进程，故无输出。
</span></span><span style=display:flex><span>[root@centos8 ~]#echo 1 2 | ( read x y ; echo x=$x y=$y )
</span></span><span style=display:flex><span>x=1 y=2
</span></span><span style=display:flex><span>[root@centos8 ~]#echo 1 2 | { read x y ; echo x=$x y=$y; }
</span></span><span style=display:flex><span>x=1 y=2
</span></span></code></pre></div><p>范例：判断用户输入的是否为 YES</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>root@ubuntu2004:~# cat yesorno.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Please input yes or no: &#34;</span> input
</span></span><span style=display:flex><span>answer<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $input| tr <span style=color:#e6db74>&#39;A-Z&#39;</span> <span style=color:#e6db74>&#39;a-z&#39;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;yes&#39;</span> -o $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;y&#39;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo YES
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;no&#39;</span> -o $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo NO
</span></span><span style=display:flex><span>root@ubuntu2004:~# cat yesorno2.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Please input yes or no: &#34;</span> input
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $input <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>([</span>Yy<span style=color:#f92672>][</span>Ee<span style=color:#f92672>][</span>Ss<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Yy<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo YES
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $input <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>([</span>Nn<span style=color:#f92672>][</span>Oo<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Nn<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo NO
</span></span></code></pre></div><p>范例: 检查主机的网络状态</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat check_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-07</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： check_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Please input a IP: &#34;</span> IP
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$IP<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>(([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>){</span>3<span style=color:#f92672>}([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-
</span></span><span style=display:flex><span>9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;IP is invalid&#34;</span>;exit; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>ping -c1 -W1 $IP &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo $IP is up <span style=color:#f92672>||</span> echo $IP is down
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>read -p “Enter a filename: “ FILE
</span></span></code></pre></div><p>范例：鸡兔同笼算法，今有雉兔同笼，上有三十五头，下有九十四足，问雉兔各几何？</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/script40/chook_rabbit.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： chook_rabbit.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入头的数量: &#34;</span> HEAD
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入脚的数量: &#34;</span> FOOT
</span></span><span style=display:flex><span>RABBIT<span style=color:#f92672>=</span>$<span style=color:#f92672>[</span>FOOT/2-HEAD<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>CHOOK<span style=color:#f92672>=</span>$<span style=color:#f92672>[</span>HEAD-RABBIT<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;兔子: &#34;</span> $RABBIT
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;鸡: &#34;</span> $CHOOK
</span></span></code></pre></div><p>范例：实现运维工作菜单</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>. /etc/init.d/functions
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#34;\E[</span>$<span style=color:#e6db74>[RANDOM%7+31];1m&#34;</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>请选择：
</span></span></span><span style=display:flex><span><span style=color:#e6db74>1）备份数据库
</span></span></span><span style=display:flex><span><span style=color:#e6db74>2）清理日志
</span></span></span><span style=display:flex><span><span style=color:#e6db74>3）软件升级
</span></span></span><span style=display:flex><span><span style=color:#e6db74>4）软件回滚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>5）删库跑路
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#39;\E[0m&#39;</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请选择上面项对应的数字1-5: &#34;</span> MENU
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> ./backup.sh
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;清理日志&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>3</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;软件升级&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>4</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;软件回滚&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>5</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;删库跑路&#34;</span>
</span></span></code></pre></div><h2 id=bash-shell-的配置文件>bash shell 的配置文件
<a class=header-anchor href=#bash-shell-%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h2><p>bash shell的配置文件很多，可以分成下面类别</p><h3 id=按生效范围划分两类>按生效范围划分两类
<a class=header-anchor href=#%e6%8c%89%e7%94%9f%e6%95%88%e8%8c%83%e5%9b%b4%e5%88%92%e5%88%86%e4%b8%a4%e7%b1%bb></a></h3><p>全局配置：针对所有用户皆有效</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span></code></pre></div><p>个人配置：只针对特定用户有效</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>~/.bashrc
</span></span></code></pre></div><h2 id=shell登录两种方式分类>shell登录两种方式分类
<a class=header-anchor href=#shell%e7%99%bb%e5%bd%95%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f%e5%88%86%e7%b1%bb></a></h2><h3 id=交互式登录>交互式登录
<a class=header-anchor href=#%e4%ba%a4%e4%ba%92%e5%bc%8f%e7%99%bb%e5%bd%95></a></h3><ul><li>直接通过终端输入账号密码登录</li><li>使用 su - UserName 切换的用户
<strong>配置文件生效和执行顺序：</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#放在每个文件最前
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/ .bash_ profile
</span></span><span style=display:flex><span>~/ .bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>#放在每个文件最后
</span></span><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/bashrc #此文件执行两次
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span></code></pre></div><p><strong>注意：文件之间的调用关系，写在同一个文件的不同位置，将影响文件的执行顺序</strong></p><h3 id=非交互式登录>非交互式登录
<a class=header-anchor href=#%e9%9d%9e%e4%ba%a4%e4%ba%92%e5%bc%8f%e7%99%bb%e5%bd%95></a></h3><ul><li>su UserName</li><li>图形界面下打开的终端</li><li>执行脚本</li><li>任何其它的bash实例
执行顺序：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span></code></pre></div><p>范例: 将命令放在最前面</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Last login: Wed Jun 10 11:24:03 2020 from 10.0.0.1
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>[root@centos8 ~]#su - root
</span></span><span style=display:flex><span>Last login: Wed Jun 10 12:26:31 CST 2020 from 10.0.0.1 on pts/0
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>[root@centos8 ~]#exit
</span></span><span style=display:flex><span>logout
</span></span><span style=display:flex><span>[root@centos8 ~]#su root
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span></code></pre></div><p>范例:将命令放在最后面</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Last login: Wed Jun 10 12:29:20 2020 from 10.0.0.1
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>[root@centos8 ~]#su - root
</span></span><span style=display:flex><span>Last login: Wed Jun 10 12:30:03 CST 2020 from 10.0.0.1 on pts/3
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>[root@centos8 ~]#su root
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span></code></pre></div><h2 id=按功能划分分类>按功能划分分类
<a class=header-anchor href=#%e6%8c%89%e5%8a%9f%e8%83%bd%e5%88%92%e5%88%86%e5%88%86%e7%b1%bb></a></h2><p>profile类和bashrc类</p><h3 id=profile类>Profile类
<a class=header-anchor href=#profile%e7%b1%bb></a></h3><p>profile类为交互式登录的shell提供配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>全局：/etc/profile, /etc/profile.d/*.sh
</span></span><span style=display:flex><span>个人：~/.bash_profile
</span></span></code></pre></div><p>功用：<br>(1) 用于定义环境变量<br>(2) 运行命令或脚本</p><h3 id=bashrc类>Bashrc类
<a class=header-anchor href=#bashrc%e7%b1%bb></a></h3><p>bashrc类：为非交互式和交互式登录的shell提供配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>全局：/etc/bashrc
</span></span><span style=display:flex><span>个人：~/.bashrc
</span></span></code></pre></div><p>功用：<br>(1) 定义命令别名和函数<br>(2) 定义本地变量</p><h2 id=编辑配置文件生效>编辑配置文件生效
<a class=header-anchor href=#%e7%bc%96%e8%be%91%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%94%9f%e6%95%88></a></h2><p>修改profile和bashrc文件后需生效两种方法:</p><ol><li>重新启动shell进程</li><li>source|. 配置文件<br>注意:source 会在当前shell中执行脚本,所有一般只用于执行置文件,或在脚本中调用另一个脚本的场景<br>范例：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>. ~/.bashr
</span></span></code></pre></div><h2 id=bash-退出任务>Bash 退出任务
<a class=header-anchor href=#bash-%e9%80%80%e5%87%ba%e4%bb%bb%e5%8a%a1></a></h2><p>保存在~/.bash_logout文件中（用户）,在退出登录shell时运行<br>功能：</p><ul><li>创建自动备份</li><li>清除临时文件</li></ul><h3 id=练习-1>练习
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0-1></a></h3><ul><li>1、让所有用户的PATH环境变量的值多出一个路径，例如：/usr/local/apache/bin</li><li>2、用户 root 登录时，将命令指示符变成红色，并自动启用如下别名： rm=‘rm -i’
cdnet=‘cd /etc/sysconfig/network-scripts/’<br>editnet=‘vim /etc/sysconfig/network-scripts/ifcfg-eth0’<br>editnet=‘vim /etc/sysconfig/network-scripts/ifcfg-eno16777736 或 ifcfg-ens33 ’ (如果系统是
CentOS7)</li><li>3、任意用户登录系统时，显示红色字体的警示提醒信息“Hi,dangerous！”</li><li>4、编写生成脚本基本格式的脚本，包括作者，联系方式，版本，时间，描述等</li></ul><h2 id=流程控制>流程控制
<a class=header-anchor href=#%e6%b5%81%e7%a8%8b%e6%8e%a7%e5%88%b6></a></h2><p>条件选择<br>条件判断分绍<br>单分支条件<br>多分支条件</p><h3 id=选择执行-if-语句>选择执行 if 语句
<a class=header-anchor href=#%e9%80%89%e6%8b%a9%e6%89%a7%e8%a1%8c-if-%e8%af%ad%e5%8f%a5></a></h3><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if COMMANDS; then COMMANDS; [ elif COMMANDS; then COMMANDS; ]... [ else
</span></span><span style=display:flex><span>COMMANDS; ] fi
</span></span></code></pre></div><p>单分支</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if 判断条件;then
</span></span><span style=display:flex><span>条件为真的分支代码
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>双分支</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if 判断条件; then
</span></span><span style=display:flex><span>条件为真的分支代码
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>条件为假的分支代码
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>多分支</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if 判断条件1; then
</span></span><span style=display:flex><span>条件1为真的分支代码
</span></span><span style=display:flex><span>elif 判断条件2; then
</span></span><span style=display:flex><span>条件2为真的分支代码
</span></span><span style=display:flex><span>elif 判断条件3; then
</span></span><span style=display:flex><span>条件3为真的分支代码
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>以上条件都为假的分支代码
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>说明：</p><ul><li>多个条件时，逐个条件进行判断，第一次遇为“真”条件时，执行其分支，而后结束整个if语句</li><li>if 语句可嵌套
范例：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#根据命令的退出状态来执行命令
</span></span><span style=display:flex><span>if ping -c1 -W2 station1 &amp;&gt; /dev/null; then
</span></span><span style=display:flex><span>echo &#39;station1 is UP&#39;
</span></span><span style=display:flex><span>elif grep -q &#39;station1&#39; ~/maintenance.txt; then
</span></span><span style=display:flex><span>echo &#39;station1 is undergoing maintenance&#39;
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>echo &#39;station1 is unexpectedly DOWN!&#39;
</span></span><span style=display:flex><span>exit 1
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>范例：身体质量指数 (BMI）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat if_bmi.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-25</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： if_bmi.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入身高(m为单位): &#34;</span> HIGH
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> ! <span style=color:#e6db74>&#34;</span>$HIGH<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>[</span>0-2<span style=color:#f92672>](</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>,2<span style=color:#f92672>})</span>?$ <span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;输入错误的身高!&#34;</span>
</span></span><span style=display:flex><span>exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入体重(kg为单位): &#34;</span> WEIGHT
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> ! <span style=color:#e6db74>&#34;</span>$WEIGHT<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>1,3<span style=color:#f92672>}</span>$ <span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span> echo <span style=color:#e6db74>&#34;输入错误的体重!&#34;</span>; exit 2; <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>BMI<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $WEIGHT/$HIGH^2|bc<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $BMI -le <span style=color:#ae81ff>18</span> <span style=color:#f92672>]</span> ;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;太瘦了,多吃点!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> $BMI -lt <span style=color:#ae81ff>24</span> <span style=color:#f92672>]</span> ;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;身材很棒!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;太胖了,注意节食,加强运动!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>条件判断 case 语句
格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>case WORD in [PATTERN [| PATTERN]...) COMMANDS ;;]... esac
</span></span><span style=display:flex><span>case 变量引用 in
</span></span><span style=display:flex><span>PAT1)
</span></span><span style=display:flex><span>    分支1
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>PAT2)
</span></span><span style=display:flex><span>    分支2
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>*)
</span></span><span style=display:flex><span>   默认分支
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>esac
</span></span></code></pre></div><p>case支持glob风格的通配符：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>* 任意长度任意字符
</span></span><span style=display:flex><span>? 任意单个字符
</span></span><span style=display:flex><span>[] 指定范围内的任意单个字符
</span></span><span style=display:flex><span>| 或者，如: a|b
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat case_yesorno.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-25</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： case_yesorno.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Do you agree(yes/no)? &#34;</span> INPUT
</span></span><span style=display:flex><span>INPUT<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $INPUT | tr <span style=color:#e6db74>&#39;A-Z&#39;</span> <span style=color:#e6db74>&#39;a-z&#39;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $INPUT in
</span></span><span style=display:flex><span>y|yes<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;You input is YES&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>n|no<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;You input is NO&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;Input fales,please input yes or no!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat case_yesorno2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-25</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： case_yesorno.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Do you agree(yes/no)? &#34;</span> INPUT
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $INPUT in
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>yY<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Yy<span style=color:#f92672>][</span>Ee<span style=color:#f92672>][</span>Ss<span style=color:#f92672>])</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;You input is YES&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Nn<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Nn<span style=color:#f92672>][</span>Oo<span style=color:#f92672>])</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;You input is NO&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Input fales,please input yes or no!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><p>范例: 文件后缀处理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat suffix.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-07</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： suffix.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;please input a file: &#34;</span> FILE
</span></span><span style=display:flex><span>SUFFIX<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $FILE | grep -Eo <span style=color:#e6db74>&#34;[^.]+</span>$<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $SUFFIX in
</span></span><span style=display:flex><span>gz<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo gzip
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>bz2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo bzip2
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>xz<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo xz
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>Z<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo compress
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>zip<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo zip
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo other
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><p>范例：运维菜单实现版本2</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#34;\E[</span>$<span style=color:#e6db74>[RANDOM%7+31];1m&#34;</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>请选择：
</span></span></span><span style=display:flex><span><span style=color:#e6db74>1）备份数据库
</span></span></span><span style=display:flex><span><span style=color:#e6db74>2）清理日志
</span></span></span><span style=display:flex><span><span style=color:#e6db74>3）软件升级
</span></span></span><span style=display:flex><span><span style=color:#e6db74>4）软件回滚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>5）删库跑路
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#39;\E[0m&#39;</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入上面数字1-5: &#34;</span> MENU
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $MENU in
</span></span><span style=display:flex><span>1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;执行备份数据库&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>#./backup.sh</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;清理日志&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>3<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;软件升级&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;软件回滚&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>5<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;删库跑路&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;INPUT FALSE!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><h3 id=练习-2>练习
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0-2></a></h3><p>1、编写脚本 createuser.sh，实现如下功能：使用一个用户名做为参数，如果指定参数的用户存在，就
显示其存在，否则添加之。并设置初始密码为123456，显示添加的用户的id号等信息，在此新用户第一
次登录时，会提示用户立即改密码，如果没有参数，就提示：请输入用户名</p><p>2、编写脚本 yesorno.sh，提示用户输入yes或no,并判断用户输入的是yes还是no,或是其它信息</p><p>3、编写脚本 filetype.sh，判断用户输入文件路径，显示其文件类型（普通，目录，链接，其它文件类
型）</p><p>4、编写脚本 checkint.sh，判断用户输入的参数是否为正整数</p><p>5、编写脚本 reset.sh，实现系统安装后的初始化环境，包括：1、别名 2、环境变量，如PS1等 3、
安装常用软件包，如：tree 5、实现固定的IP的设置，6、vim的设置等</p><h2 id=循环>循环
<a class=header-anchor href=#%e5%be%aa%e7%8e%af></a></h2></div><footer class=post-footer><div class=post-tags><a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><div class="post-nav-prev post-nav-item"><a href=/post/linux10/ rel=prev title=shell脚本编程基础9.2>shell脚本编程基础9.2
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"https://www.lanhui.live/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.78a19d71f814f465713a5053077de10bda06a8790a23f2b3c5ac2241d0c135d3.js defer></script></body></html>