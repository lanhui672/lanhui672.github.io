<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="使用 Aira2 下载文件后上传到 OneDrive 网盘"><meta itemprop=description content="admin#lanhui.live"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://www.lanhui.live/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="Aira2,onedrive"><meta property="og:type" content="article"><meta property="og:title" content="使用 Aira2 下载文件后上传到 OneDrive 网盘"><meta property="og:description" content="admin#lanhui.live"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://www.lanhui.live/post/1045/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2020-04-12 21:21:00 +0800 CST"><meta property="article:modified_time" content="2020-04-12 21:21:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.89002406547f1cea16a5ae81687e451f88fa6fc9e470d8a2dccb6dbcd0ab6db8.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"1045","permalink":"https://www.lanhui.live/post/1045/","title":"使用 Aira2 下载文件后上传到 OneDrive 网盘","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>使用 Aira2 下载文件后上传到 OneDrive 网盘 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>71</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#安装-aria2>安装 Aria2</a></li><li><a href=#安装-ariang>安装 AriaNg</a><ul><li><a href=#安装-onedriveuploader>安装 OneDriveUploader</a></li><li><a href=#初始化配置>初始化配置</a></li><li><a href=#使用命令>使用命令</a></li><li><a href=#命令示例>命令示例</a></li></ul></li><li><a href=#aria2-自动上传>Aria2 自动上传</a></li><li><a href=#windows-使用>Windows 使用</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>admin#lanhui.live</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>71</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>51</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=47646></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=137></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-10-16T14:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://www.lanhui.live/post/1045/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="admin#lanhui.live"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="使用 Aira2 下载文件后上传到 OneDrive 网盘"><meta itemprop=description content="这里是 Rat&rsquo;s Blog大佬 使用教程的整合，因为大佬的教程要同时参考三篇文章，这里整合一下用法。使用到用命令上传是没问题的，后续操作没成功，不过还是"></span><header class=post-header><h1 class=post-title itemprop="name headline">使用 Aira2 下载文件后上传到 OneDrive 网盘</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2020-04-12 21:21:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2020-04-12 21:21:00 +0800 CST">2020-04-12
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E7%BD%91%E7%BB%9C itemprop=url rel=index><span itemprop=name>网络</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><p>这里是
<a href=https://www.moerats.com/archives/700/ title="Rat&amp;rsquo;s Blog大佬" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Rat&rsquo;s Blog大佬
<i class="fa fa-external-link-alt"></i>
</a>使用教程的整合，因为大佬的教程要同时参考三篇文章，这里整合一下用法。使用到用命令上传是没问题的，后续操作没成功，不过还是搬过来组成完整教程。后面有空弄一下onelndex的上传</span></span></p><h2 id=安装-aria2>安装 Aria2
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-aria2></a></h2><p>这里用的逗比的脚本，使用命令：
wget -N &ndash;no-check-certificate
<a href=https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/aria2.sh title=https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/aria2.sh rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://raw.githubusercontent.com/ToyoDAdoubiBackup/doubi/master/aria2.sh
<i class="fa fa-external-link-alt"></i>
</a>&& chmod +x aria2.sh && bash aria2.sh
#备用地址
wget -N &ndash;no-check-certificate
<a href=https://www.moerats.com/usr/shell/Aria2/aria2.sh title=https://www.moerats.com/usr/shell/Aria2/aria2.sh rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.moerats.com/usr/shell/Aria2/aria2.sh
<i class="fa fa-external-link-alt"></i>
</a>&& chmod +x aria2.sh && bash aria2.sh
安装完成后，如果我们想修改密码、下载文件位置、端口的话，可以使用命令<code>bash aria2.sh</code>，再选择修改配置即可，这里建议使用该脚本配置自动更新<code>BT-Tracker</code>服务器，对下载<code>BT</code>有加成。</p><h2 id=安装-ariang>安装 AriaNg
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-ariang></a></h2><p>这一步和安装<code>OneIndex</code>差不多，先添加一个域名，不想用域名的可以在添加域名那里填上<code>IP</code>或者<code>IP:端口</code>，然后将<code>AriaNg</code>程序上传到对应的根目录，可以使用命令：
这里以添加IP为例
#Debian/Ubuntu系统
apt-get install unzip -y
#CentOS系统
yum install unzip -y
cd /www/wwwroot/11.22.33.44
wget
<a href=https://www.moerats.com/usr/down/aria-ng-0.2.0.zip title=https://www.moerats.com/usr/down/aria-ng-0.2.0.zip rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://www.moerats.com/usr/down/aria-ng-0.2.0.zip
<i class="fa fa-external-link-alt"></i>
</a>&& unzip aria-ng-0.2.0.zip</p><p>这时候我们就可以使用<code>IP</code>访问<code>AriaNg</code>界面了，或者<code>IP:端口</code>，这取决于你添加域名的时候填的什么了。</p><p>刚开始登录会提示错误，需要虚入密码</p><img class=aligncenter src=/images/2020/04/21/caa09f551a86740e55206337996ab646.md.png alt width=500 height=244><p style=text-align:center>点击<strong>AriaNg设置—>全局的旁边RPC—>AriaNg RPC秘钥</strong></p><img class=aligncenter src=/images/2020/04/21/2.md.png alt width=500 height=174><p style=text-align:center><strong>—>输入你设置的AriaNg密码就登录成功了</strong></p><img class=aligncenter src=/images/2020/04/21/3.md.png alt width=500 height=140>
## 配置 Aria2 上传
### 1、授权认证
点击右侧<code>URL</code>登录并授权，授权地址→【<a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=78d4dc35-7e46-42c6-9023-2d39314433a5&amp;response_type=code&amp;redirect_uri=http://localhost/onedrive-login&amp;response_mode=query&amp;scope=offline_access%20User.Read%20Files.ReadWrite.All" target=_blank rel="noopener noreferrer">国际版、个人版 (家庭版)</a>】、【<a href="https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize?client_id=dfe36e60-6133-48cf-869f-4d15b8354769&amp;response_type=code&amp;redirect_uri=http://localhost/onedrive-login&amp;response_mode=query&amp;scope=offline_access%20User.Read%20Files.ReadWrite.All" target=_blank rel="noopener noreferrer">中国版 (世纪互联)</a>】。<p>授权后会获取一个<code>localhost</code>开头打不开的链接，这里复制好整个链接地址，包括<code>localhost</code>。</p><h3 id=安装-onedriveuploader>安装 OneDriveUploader
<a class=header-anchor href=#%e5%ae%89%e8%a3%85-onedriveuploader></a></h3><pre><code>#64位系统下载
wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/amd64/linux/OneDriveUploader -P /usr/local/bin/
#32位系统下载
wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/i386/linux/OneDriveUploader -P /usr/local/bin/
#arm架构下载
wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/arm/linux/OneDriveUploader -P /usr/local/bin/
#给予权限
chmod +x /usr/local/bin/OneDriveUploader
</code></pre><h3 id=初始化配置>初始化配置
<a class=header-anchor href=#%e5%88%9d%e5%a7%8b%e5%8c%96%e9%85%8d%e7%bd%ae></a></h3><pre><code>#国际版，将url换成你上面复制的授权地址，包括 
http://loaclhost。
OneDriveUploader -a &quot;url&quot;
#个人版(家庭版)，将url换成你上面复制的授权地址，包括 
http://loaclhost。
OneDriveUploader -ms -a &quot;url&quot;
#中国版(世纪互联)，将url换成你上面复制的授权地址，包括 
http://loaclhost。
OneDriveUploader -cn -a &quot;url&quot;   
</code></pre><p>如果提示<code>Init config file: /path/to/file/auth.json</code>类似信息，则初始化成功。</p><h3 id=使用命令>使用命令
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8%e5%91%bd%e4%bb%a4></a></h3><pre><code>Usage of OneDriveUploader:
  -a string
        // 初始化授权
        Setup and Init auth.json.
  -b string
        // 自定义上传分块大小, 可以提高网络吞吐量, 受限于磁盘性能和网络速度.
        Set block size. [Unit: M; 5&lt;=b&lt;=60;] (default &quot;10&quot;)
  -c string
        // 配置文件路径
        Config file. (default &quot;auth.json&quot;)
  -n string
        // 上传单个文件时,在网盘中重命名
        Rename file on upload to remote.
  -r string
        // 上传到网盘中的某个目录, 默认: 根目录
        Upload to reomte path.
  -s string
        // *必要参数, 要上传的文件或文件夹
        Upload item.
  -t string
        // 线程数, 同时上传文件的个数. 默认: 2
        Set thread num. (default &quot;2&quot;)
  -f
        // 开关(推荐)
        // 加上 -f 参数，强制读取 auth.json 中的块大小配置和多线程配置.
        // 不加 -f 参数, 每次覆盖保存当前使用参数到 auth.json 配置文件中.
        Force Read config form config file. [BlockSize, ThreadNum]
  -skip
        // 开关
        // 跳过上传网盘中已存在的同名文件. (默认不跳过)
        Skip exist file on remote.
  -cn
        // 开关
        // 授权中国版(世纪互联), 需要此参数.
        OneDrive by 21Vianet.
  -ms
        // 开关
        // 授权个人版(家庭版), 需要此参数.
        OneDrive by Microsoft.
</code></pre><h3 id=命令示例>命令示例
<a class=header-anchor href=#%e5%91%bd%e4%bb%a4%e7%a4%ba%e4%be%8b></a></h3><pre><code>#将当前目录下的mm00.jpg文件上传到OneDrive网盘根目录
OneDriveUploader -c /path/to/file/auth.json -s 
&quot;mm00.jpg&quot;

#将当前目录下的mm00.jpg文件上传到OneDrive网盘根目录，并改名为mm01.jpg

OneDriveUploader -c /path/to/file/auth.json -s &quot;mm00.jpg&quot; -n &quot;mm01.jpg&quot;
#将当前目录下的Download文件夹上传到OneDrive网盘根目录

OneDriveUploader -c /path/to/file/auth.json -s &quot;Download&quot;
#将当前目录下的Download文件夹上传到OneDrive网盘Test目录中

OneDriveUploader -c /path/to/file/auth.json -s 
&quot;Download&quot; -r &quot;Test&quot;
#将同目录下的Download文件夹上传到OneDriv网盘Test目录中，使用10线程

OneDriveUploader -c /path/to/file/auth.json -t 10 -s 
&quot;Download&quot; -r &quot;Test&quot;
#将同目录下的Download文件夹上传到OneDrive网盘Test目录中，使用15线程，并设置分块大小为20M

OneDriveUploader -c /path/to/file/auth.json -t 15 -b 20 -s &quot;Download&quot; -r &quot;Test&quot;
</code></pre><p><code>/path/to/file/auth.json</code>为初始化时，生成的<code>auth.json</code>绝对路径地址，本文默认<code>/root/auth.json</code>，自行调整。</p><p><strong>注意：</strong>如果你之前上传手动中断过，再上传的时候，请使用<code>-skip</code>参数，默认会跳过你已经上传过的文件 / 文件夹</p><h2 id=aria2-自动上传>Aria2 自动上传
<a class=header-anchor href=#aria2-%e8%87%aa%e5%8a%a8%e4%b8%8a%e4%bc%a0></a></h2><p>同样的这里也会提供个配套的<code>Aria2</code>自动上传脚本，上传配置方法参考→<a href=https://www.moerats.com/archives/482/ target=_blank rel="noopener noreferrer">传送门</a>。</p><p>上传脚本代码如下：</p><pre><code>#!/bin/bash
GID=&quot;$1&quot;;
FileNum=&quot;$2&quot;;
File=&quot;$3&quot;;
MaxSize=&quot;15728640&quot;;
Thread=&quot;3&quot;;  #默认3线程，自行修改，服务器配置不好的话，不建议太多
Block=&quot;20&quot;;  #默认分块20m，自行修改
RemoteDIR=&quot;&quot;;  #上传到Onedrive的路径，默认为根目录，如果要上传到MOERATS目录，&quot;&quot;里面请填成MOERATS
LocalDIR=&quot;/www/download/&quot;;  #Aria2下载目录，记得最后面加上/
Uploader=&quot;/usr/local/bin/OneDriveUploader&quot;;  #上传的程序完整路径，默认为本文安装的目录
Config=&quot;/root/auth.json&quot;;  #初始化生成的配置auth.json绝对路径，参考第3步骤生成的路径
if [[ -z $(echo &quot;$FileNum&quot; |grep -o '[0-9]*' |head -n1) ]]; then FileNum='0'; fi
if [[ &quot;$FileNum&quot; -le '0' ]]; then exit 0; fi
if [[ &quot;$#&quot; != '3' ]]; then exit 0; fi
function LoadFile(){
  if [[ ! -e &quot;${Uploader}&quot; ]]; then return; fi
  IFS_BAK=$IFS
  IFS=$'\n'
  tmpFile=&quot;$(echo &quot;${File/#$LocalDIR}&quot; |cut -f1 -d'/')&quot;
  FileLoad=&quot;${LocalDIR}${tmpFile}&quot;
  if [[ ! -e &quot;${FileLoad}&quot; ]]; then return; fi
  ItemSize=$(du -s &quot;${FileLoad}&quot; |cut -f1 |grep -o '[0-9]*' |head -n1)
  if [[ -z &quot;$ItemSize&quot; ]]; then return; fi
  if [[ &quot;$ItemSize&quot; -ge &quot;$MaxSize&quot; ]]; then
    echo -ne &quot;\033[33m${FileLoad} \033[0mtoo large to spik.\n&quot;;
    return;
  fi
  ${Uploader} -c &quot;${Config}&quot; -t &quot;${Thread}&quot; -b &quot;${Block}&quot; -s &quot;${FileLoad}&quot; -r &quot;${RemoteDIR}&quot; -skip
  if [[ $? == '0' ]]; then
    rm -rf &quot;${FileLoad}&quot;;
  fi
  IFS=$IFS_BAK
}
LoadFile;
</code></pre><p>授权<code>chmod +x upload.sh然后再到Aria2配置文件中加上一行on-download-complete=/root/upload.sh即可，后面为脚本的路径。最后重启Aria2生效。</code></p><p>检测下脚本编码是否正确，比如我脚本路径为<code>/root/upload.sh</code>，使用命令</p><pre><code>bash /root/upload.sh
</code></pre><p>如果无任何输出，则正确，反之输出类似<code>$&lsquo;r&rsquo;: command not found</code>错误，则需要转换下编码格式，具体步骤如下</p><p>先安装<code>dos2unix</code>：
#CentOS系统
yum install dos2unix -y
#Debian/Ubuntu系统
apt install dos2unix -y
再转换编码：
#后面为脚本路径
dos2unix /root/upload.sh</p><h2 id=windows-使用>Windows 使用
<a class=header-anchor href=#windows-%e4%bd%bf%e7%94%a8></a></h2><p>先下载程序文件，下载地址→<a href=https://github.com/MoeClub/OneList/tree/master/OneDriveUploader/amd64/win target=_blank rel="noopener noreferrer">传送门</a>。</p><p>比如我将<code>exe</code>文件放到<code>D</code>盘，然后使用<code>Win+R</code>，输入<code>CMD</code>运行，调出窗口后，使用命令：</p><pre><code>#进入D盘
cd /d D:\
#国际版初始化，将url换成你上面复制的授权地址，包括 
</code></pre><p>http://loaclhost。
OneDriveUploader.exe -a &ldquo;url&rdquo;
#个人版(家庭版)初始化，将url换成你上面复制的授权地址，包括
http://loaclhost。
OneDriveUploader.exe -ms -a &ldquo;url&rdquo;
#中国版(世纪互联)初始化，将url换成你上面复制的授权地址，包括http://loaclhost。
OneDriveUploader.exe -cn -a &ldquo;url&rdquo;</p><p>然后上传命令和上面一样，只需要把<code>OneDriveUploader</code>改成<code>OneDriveUploader.exe</code>即可。</p><p>最后经测试，该版本的上传已经完全能应对各种稀奇古怪的字符问题，
;</p></div><footer class=post-footer><div class=post-tags><a href=/tags/aira2>Aira2
</a><a href=/tags/onedrive>onedrive</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/1068/ rel=next title=宝塔安装matomo报错：Process类依赖于proc_open，这在PHP安装中不可用。><i class="fa fa-chevron-left"></i> 宝塔安装matomo报错：Process类依赖于proc_open，这在PHP安装中不可用。</a></div><div class="post-nav-prev post-nav-item"><a href=/post/1429/ rel=prev title=Chevereto-搭建你的私人图床！>Chevereto-搭建你的私人图床！
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"https://www.lanhui.live/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.min.78a19d71f814f465713a5053077de10bda06a8790a23f2b3c5ac2241d0c135d3.js defer></script></body></html>