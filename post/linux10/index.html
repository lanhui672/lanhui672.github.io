<!doctype html><html lang=zh-CN data-theme=light><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#19b8eb" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="shell脚本编程基础"><meta itemprop=description content="1208034077#qq.com"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="http://localhost:1313/imgs/hugo_next_avatar.png"><meta itemprop=keywords content="linux"><meta property="og:type" content="article"><meta property="og:title" content="shell脚本编程基础"><meta property="og:description" content="1208034077#qq.com"><meta property="og:image" content="/imgs/hugo_next_avatar.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="http://localhost:1313/post/linux10/"><meta property="og:site_name" content="蓝惠の小窝"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="蓝惠の小窝"><meta property="article:published_time" content="2024-12-03 04:06:00 +0800 CST"><meta property="article:modified_time" content="2024-12-03 04:06:00 +0800 CST"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"linux10","permalink":"http://localhost:1313/post/linux10/","title":"shell脚本编程基础","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://hm.baidu.com/hm.js?",e.async="true",document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>shell脚本编程基础 - 蓝惠の小窝</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>蓝惠の小窝</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>寻找大波斯菊需要的不是金钱，而是一颗去找寻的心♥.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友链</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>81</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#程序组成>程序组成</a></li><li><a href=#程序编程风格>程序编程风格</a></li><li><a href=#编程语言>编程语言</a></li><li><a href=#编程逻辑处理方式>编程逻辑处理方式</a></li><li><a href=#脚本语言的基本用法>脚本语言的基本用法</a><ul><li><a href=#shell-脚本的用途>shell 脚本的用途</a></li><li><a href=#shell-脚本基本结构>shell 脚本基本结构</a></li><li><a href=#shell脚本创建过程>shell脚本创建过程</a></li><li><a href=#shell-脚本注释规范>shell 脚本注释规范</a></li><li><a href=#第一个-shell-脚本>第一个 shell 脚本</a></li><li><a href=#shell-脚本调试>shell 脚本调试</a><ul><li><a href=#常见脚本错误>常见脚本错误</a></li><li><a href=#查看不可见字符>查看不可见字符</a></li></ul></li></ul></li><li><a href=#变量>变量</a><ul><li><a href=#变量类型>变量类型：</a></li><li><a href=#编程语言分类>编程语言分类</a></li><li><a href=#shell中变量命名法则>Shell中变量命名法则</a><ul><li><a href=#命名要求>命名要求</a></li><li><a href=#命名习惯>命名习惯</a></li></ul></li><li><a href=#变量定义和引用>变量定义和引用</a></li><li><a href=#练习>练习：</a></li><li><a href=#环境变量>环境变量</a></li><li><a href=#只读变量>只读变量</a></li><li><a href=#位置变量>位置变量</a></li><li><a href=#退出状态码变量>退出状态码变量</a></li><li><a href=#展开命令行>展开命令行</a></li><li><a href=#脚本安全和-set>脚本安全和 set</a></li><li><a href=#格式化输出-printf>格式化输出 printf</a></li></ul></li><li><a href=#算术运算>算术运算</a><ul><li><a href=#随机数生成器变量>随机数生成器变量</a></li><li><a href=#增强型赋值><strong>增强型赋值</strong></a></li></ul></li><li><a href=#逻辑运算>逻辑运算</a><ul><li><a href=#与或非>与或非</a><ul><li><a href=#与>与：&</a></li><li><a href=#或>或：|</a></li><li><a href=#非>非：！</a></li><li><a href=#异或>异或：^</a></li></ul></li><li><a href=#短路运算>短路运算</a></li></ul></li><li><a href=#条件测试命令>条件测试命令</a><ul><li><a href=#变量测试>变量测试</a></li><li><a href=#数值测试>数值测试</a></li><li><a href=#字符串测试>字符串测试</a></li><li><a href=#文件测试>文件测试</a></li><li><a href=#文件权限测试>文件权限测试：</a></li></ul></li><li><a href=#关于--和-->关于 () 和 { }</a></li><li><a href=#组合测试条件>组合测试条件</a><ul><li><a href=#第一种方式>第一种方式</a></li><li><a href=#第二种方式>第二种方式</a></li><li><a href=#练习-1><strong>练习</strong></a></li><li><a href=#使用read命令来接受输入>使用read命令来接受输入</a></li></ul></li><li><a href=#bash-shell-的配置文件>bash shell 的配置文件</a><ul><li><a href=#按生效范围划分两类>按生效范围划分两类</a></li></ul></li><li><a href=#shell登录两种方式分类>shell登录两种方式分类</a><ul><li><a href=#交互式登录>交互式登录</a></li><li><a href=#非交互式登录>非交互式登录</a></li></ul></li><li><a href=#按功能划分分类>按功能划分分类</a><ul><li><a href=#profile类>Profile类</a></li><li><a href=#bashrc类>Bashrc类</a></li></ul></li><li><a href=#编辑配置文件生效>编辑配置文件生效</a></li><li><a href=#bash-退出任务>Bash 退出任务</a><ul><li><a href=#练习-2>练习</a></li></ul></li><li><a href=#流程控制>流程控制</a><ul><li><a href=#选择执行-if-语句>选择执行 if 语句</a></li></ul></li><li><a href=#条件判断-case-语句>条件判断 case 语句</a><ul><li><a href=#练习-3>练习</a></li></ul></li><li><a href=#循环>循环</a><ul><li><a href=#循环-for>循环 for</a></li><li><a href=#练习用-for-实现>练习：用 for 实现</a></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=蓝惠の小窝 src=/imgs/img-lazy-loading.gif data-src=/imgs/hugo_next_avatar.png><p class=site-author-name itemprop=name>蓝惠の小窝</p><div class=site-description itemprop=description>1208034077#qq.com</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>81</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>55</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/lanhui672 title="Github → https://github.com/lanhui672" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title></div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://lanhui.live title=http://lanhui.live target=_blank>短域密语</a></li><li class=links-of-blogroll-item><a href=http://lan-hui.com title=http://lan-hui.com target=_blank>引导页</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=161507></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=368></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-12-21T04:06:00+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/lanhui672/lanhui672.github.io/wiki rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=http://localhost:1313/post/linux10/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/hugo_next_avatar.png"><meta itemprop=name content="蓝惠の小窝"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="蓝惠の小窝"><meta itemprop=description content="1208034077#qq.com"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="shell脚本编程基础"><meta itemprop=description content="编程基础 linus：Talk is cheap, show me the code 程序组成 程序：算法+数据结构 算法：处理数据的方式 数据结构：数据在计算机中的类型和组织方式 数据：是程序"></span><header class=post-header><h1 class=post-title itemprop="name headline">shell脚本编程基础</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-12-03 04:06:00 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-12-03 04:06:00 +0800 CST">2024-12-03
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/linux itemprop=url rel=index><span itemprop=name>linux</span></a></span></span></div><div class=post-meta-items></div></div><meta name=baidu-site-verification content="codeva-CvrLlzui8a"><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?289d43bfba112a047eccf686e7551557",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></header><div class="post-body autonumber" itemprop=articleBody><h1 id=编程基础>编程基础
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e5%9f%ba%e7%a1%80></a></h1><p>linus：Talk is cheap, show me the code</p><h2 id=程序组成>程序组成
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8f%e7%bb%84%e6%88%90></a></h2><ul><li>程序：算法+数据结构</li><li>算法：处理数据的方式</li><li>数据结构：数据在计算机中的类型和组织方式</li><li>数据：是程序的核心,程序为数据提供服务</li></ul><h2 id=程序编程风格>程序编程风格
<a class=header-anchor href=#%e7%a8%8b%e5%ba%8f%e7%bc%96%e7%a8%8b%e9%a3%8e%e6%a0%bc></a></h2><ul><li><p><strong>面向过程语言</strong></p><ul><li>做一件事情，排出个步骤，第一步干什么，第二步干什么，如果出现情况 A，做什么处理，如果出现了情况 B，做什么处理</li><li>问题规模小，可以步骤化，按部就班处理</li><li>以指令为中心，数据服务于指令</li><li>C, shell</li></ul></li><li><p><strong>面向对象语言</strong></p><ul><li>将编程看成是一个事物，对外界来说，事物是直接使用的,不用关心事物内部的情况。而编程
就是设置事物能够完成功能。</li><li>一种认识世界、分析世界的方法论。将万事万物抽象为各种对象</li><li>类是抽象的概念，是万事万物的抽象，是一类事物的共同特征的集合</li><li>对象是类的具体实现，是一个实体</li><li>问题规模大，复杂系统</li><li>以数据为中心，指令服务于数据</li><li>java，C#，python，golang等</li></ul></li></ul><h2 id=编程语言>编程语言
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80></a></h2><p>计算机：运行二进制指令<br>编程语言：人与计算机之间交互的语言。分为两种：低级语言和高级语言</p><ul><li>低级编程语言：
机器：二进制的0和1的序列，称为机器指令。与自然语言差异太大，难懂、难写<br>汇编：用一些助记符号替代机器指令，称为汇编语言<br>如：ADD A,B 将寄存器A的数与寄存器B的数相加得到的数放到寄存器A中<br>汇编语言写好的程序需要汇编程序转换成机器指令<br>汇编语言稍微好理解，即机器指令对应的助记符，助记符更接近自然语言</li><li>高级编程语言：<br>编译：高级语言&ndash;>编译器&ndash;>机器代码文件&ndash;>执行，如：C，C++ (编译转化成新的二进制文件)<br>解释：高级语言&ndash;>执行&ndash;>解释器&ndash;>机器代码，如：shell，python，php，JavaScript，perl<br>编译和解释型语言 （边运行边解释）</li></ul><h2 id=编程逻辑处理方式>编程逻辑处理方式
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e9%80%bb%e8%be%91%e5%a4%84%e7%90%86%e6%96%b9%e5%bc%8f></a></h2><h2 id=脚本语言的基本用法>脚本语言的基本用法
<a class=header-anchor href=#%e8%84%9a%e6%9c%ac%e8%af%ad%e8%a8%80%e7%9a%84%e5%9f%ba%e6%9c%ac%e7%94%a8%e6%b3%95></a></h2><h3 id=shell-脚本的用途>shell 脚本的用途
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e7%9a%84%e7%94%a8%e9%80%94></a></h3><ul><li>将简单的命令组合完成复杂的工作,自动化执行命令,提高工作效率</li><li>减少手工命令的输入，一定程度上避免人为错误</li><li>将软件或应用的安装及配置实现标准化</li><li>用于实现日常性的,重复性的,非交互式的运维工作,如:文件打包压缩备份,监控系统运行状态并实现
告警等</li></ul><h3 id=shell-脚本基本结构>shell 脚本基本结构
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e5%9f%ba%e6%9c%ac%e7%bb%93%e6%9e%84></a></h3><p>shell脚本编程：是基于过程式、解释执行的语言<br>编程语言的基本结构：</p><ul><li>各种系统命令的组合</li><li>数据存储：变量、数组</li><li>表达式：a + b</li><li>控制语句：if
shell脚本：包含一些命令或声明，并符合一定格式的文本文件<br>格式要求：首行shebang机制</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#!/usr/bin/python</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/perl</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/ruby</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/lua</span>
</span></span></code></pre></div><h3 id=shell脚本创建过程>shell脚本创建过程
<a class=header-anchor href=#shell%e8%84%9a%e6%9c%ac%e5%88%9b%e5%bb%ba%e8%bf%87%e7%a8%8b></a></h3><p>第一步：使用文本编辑器来创建文本文件<br>第一行必须包括shell声明序列：#!
示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span></code></pre></div><p>添加注释,注释以#开头<br>第二步：加执行权限<br>给予执行权限，在命令行上指定脚本的绝对或相对路径<br>第三步：运行脚本<br>直接运行解释器，将脚本作为解释器程序的参数运行</p><h3 id=shell-脚本注释规范>shell 脚本注释规范
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e6%b3%a8%e9%87%8a%e8%a7%84%e8%8c%83></a></h3><p>1、第一行一般为调用使用的语言<br>2、程序名，避免更改文件名为无法找到正确的文件<br>3、版本号<br>4、更改后的时间<br>5、作者相关信息<br>6、该程序的作用，及注意事项<br>7、最后是各版本的更新简要说明</p><h3 id=第一个-shell-脚本>第一个 shell 脚本
<a class=header-anchor href=#%e7%ac%ac%e4%b8%80%e4%b8%aa-shell-%e8%84%9a%e6%9c%ac></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#!SHEBANG
</span></span><span style=display:flex><span>CONFIGURATION_VARIABLES
</span></span><span style=display:flex><span>FUNCTION_DEFINITIONS
</span></span><span style=display:flex><span>MAIN_CODE
</span></span></code></pre></div><p>范例：第一个 Shell 脚本 hello world
参考文档：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#vim /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Filename: hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Version: 1.0</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Date: 2017/06/01</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Author: wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Email: 29308620@qq.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Website: www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Description: This is the first script</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Copyright: 2017 wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># License: GPL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#经典写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;hello, world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#流行写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;Hello, world!&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法2</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/hello.sh | bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash &lt; /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法4</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#chmod +x /data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#绝对路径</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#/data/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#相法路径</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cd /data/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#./hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#执行方法5，本方法可以实现执行远程主机的shell脚本</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#yum -y install httpd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#systemctl start httpd</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#mv /data/hello.sh /var/www/html/</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Filename: hello.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Version: 1.0</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Date: 2017/06/01</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Author: wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Email: 29308620@qq.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Website: www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Description: This is the first script</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Copyright: 2017 wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e># License: GPL</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ------------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#经典写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;hello, world&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#流行写法</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;Hello, world!&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh |bash</span>
</span></span><span style=display:flex><span>% Total % Received % Xferd Average Speed Time Time Time Current
</span></span><span style=display:flex><span>Dload Upload Total Spent Left Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> 378k <span style=color:#ae81ff>0</span> --:--:-- --:--:-- --:--:-- 378k
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl -s http://10.0.0.8/hello.sh |bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh 2&gt;/dev/null |bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#curl http://10.0.0.8/hello.sh &gt;/dev/null |bash</span>
</span></span><span style=display:flex><span>% Total % Received % Xferd Average Speed Time Time Time Current
</span></span><span style=display:flex><span>Dload Upload Total Spent Left Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> 378k <span style=color:#ae81ff>0</span> --:--:-- --:--:-- --:--:-- 378k
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#wget -qO - http://www.wangxiaochun.com/testdir/hello.sh | bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world!
</span></span></code></pre></div><p>范例:执行远程主机的脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#curl http://www.wangxiaochun.com/testdir/hello.sh |bash</span>
</span></span><span style=display:flex><span><span style=color:#f92672>%</span> Total <span style=color:#f92672>%</span> Received <span style=color:#f92672>%</span> Xferd Average Speed Time Time Time Current
</span></span><span style=display:flex><span>Dload Upload Total Spent Left Speed
</span></span><span style=display:flex><span><span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>100</span> <span style=color:#ae81ff>388</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>16869</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>--</span>:<span style=color:#f92672>--</span>:<span style=color:#f92672>--</span> <span style=color:#f92672>--</span>:<span style=color:#f92672>--</span>:<span style=color:#f92672>--</span> <span style=color:#f92672>--</span>:<span style=color:#f92672>--</span>:<span style=color:#f92672>--</span> <span style=color:#ae81ff>16869</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#curl -s http://www.wangxiaochun.com/testdir/hello.sh |bash</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#curl http://www.wangxiaochun.com/testdir/hello.sh 2&gt;/dev/null |</span>
</span></span><span style=display:flex><span>bash
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#wget -qO - http://www.wangxiaochun.com/testdir/hello.sh |bash</span>
</span></span><span style=display:flex><span>hello, world
</span></span><span style=display:flex><span>Hello, world<span style=color:#f92672>!</span>
</span></span></code></pre></div><p>范例：在远程主机运行本地shell脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#hostname -I</span>
</span></span><span style=display:flex><span>10.0.0.8
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat test.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>hostname -I
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#ssh 10.0.0.18 /bin/bash &lt; test.sh</span>
</span></span><span style=display:flex><span>root@10.0.0.18<span style=color:#960050;background-color:#1e0010>&#39;</span>s password:
</span></span><span style=display:flex><span>10.0.0.18
</span></span></code></pre></div><p>范例：备份脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-20</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： backup.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;\033[1;32mStarting backup...\033[0m&#34;</span>
</span></span><span style=display:flex><span>sleep <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>cp -av /etc/ /data/etc<span style=color:#e6db74>`</span>date +%F<span style=color:#e6db74>`</span>/
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;\033[1;32mBackup is finished\033[0m&#34;</span>
</span></span></code></pre></div><h3 id=shell-脚本调试>shell 脚本调试
<a class=header-anchor href=#shell-%e8%84%9a%e6%9c%ac%e8%b0%83%e8%af%95></a></h3><p>只检测脚本中的语法错误，但无法检查出命令错误，但不真正执行脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bash -n /path/to/some_script
</span></span></code></pre></div><p>调试并执行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>bash -x /path/to/some_script
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat -A test.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author:^I^Iwangxiaochun$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: ^I^I^I29308620$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: ^I^I^I2020-04-01$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileNameM-oM-&lt;M-^Z^I^Itest.sh$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: ^I^I^Ihttp://www.magedu.com$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#DescriptionM-oM-&lt;M-^Z^I^IThe test script$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): ^I2020 All rights reserved$</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************$</span>
</span></span><span style=display:flex><span>echo line1$
</span></span><span style=display:flex><span>hostnam$
</span></span><span style=display:flex><span>cat &gt; test.txt <span style=color:#e6db74>&lt;&lt;EOF $
</span></span></span><span style=display:flex><span><span style=color:#e6db74>aaa$
</span></span></span><span style=display:flex><span><span style=color:#e6db74>bbb$
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ccc$
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span> $
</span></span><span style=display:flex><span>$
</span></span><span style=display:flex><span>echo line22$
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#bash -n test.sh</span>
</span></span><span style=display:flex><span>f1.sh: line 20: warning: here-document at line <span style=color:#ae81ff>14</span> delimited by end-of-file
</span></span><span style=display:flex><span><span style=color:#f92672>(</span>wanted <span style=color:#e6db74>`</span>EOF<span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h4 id=常见脚本错误>常见脚本错误
<a class=header-anchor href=#%e5%b8%b8%e8%a7%81%e8%84%9a%e6%9c%ac%e9%94%99%e8%af%af></a></h4><p>总结：脚本错误常见的有三种</p><ul><li>语法错误，会导致后续的命令不继续执行，可以用bash -n 检查错误，提示的出错行数不一定是准
确的</li><li>命令错误，默认后续的命令还会继续执行，用bash -n 无法检查出来 ，可以使用 bash -x 进行观察</li><li>逻辑错误：只能使用 bash -x 进行观察</li></ul><h4 id=查看不可见字符>查看不可见字符
<a class=header-anchor href=#%e6%9f%a5%e7%9c%8b%e4%b8%8d%e5%8f%af%e8%a7%81%e5%ad%97%e7%ac%a6></a></h4><p><code>:set list</code>
<code>cat -A</code></p><h2 id=变量>变量
<a class=header-anchor href=#%e5%8f%98%e9%87%8f></a></h2><h3 id=变量类型>变量类型：
<a class=header-anchor href=#%e5%8f%98%e9%87%8f%e7%b1%bb%e5%9e%8b></a></h3><ul><li>内置变量，如：PS1，PATH，UID，HOSTNAME，$$，BASHPID，PPID，$?，HISTSIZE</li><li>用户自定义变量
不同的变量存放的数据不同，决定了以下</li><li>数据存储方式</li><li>参与的运算</li><li>表示的数据范围
变量数据类型：</li><li>字符</li><li>数值：整型、浮点型,bash 不支持浮点数</li></ul><h3 id=编程语言分类>编程语言分类
<a class=header-anchor href=#%e7%bc%96%e7%a8%8b%e8%af%ad%e8%a8%80%e5%88%86%e7%b1%bb></a></h3><p><img src=/imgs/img-lazy-loading.gif data-src=/images/url/linux/linux09/01.jpg alt=q><br><strong>静态和动态语言</strong></p><ul><li>静态编译语言：使用变量前，先声明变量类型，之后类型不能改变，在编译时检查，如：java，c</li><li>动态编译语言：不用事先声明，可随时改变类型，如：bash，Python</li></ul><p><strong>强类型和弱类型语言</strong></p><ul><li>强类型语言：不同类型数据操作，必须经过强制转换才同一类型才能运算，如java ， c# ，
python
如：参考以下 python 代码
print(&lsquo;magedu&rsquo;+ 10) 提示出错，不会自动转换类型
print(&lsquo;magedu&rsquo;+str(10)) 结果为magedu10，需要显示转换类型</li><li>弱类型语言：语言的运行时会隐式做数据类型转换。无须指定类型，默认均为字符型；参与运算会
自动进行隐式类型转换；变量无须事先定义可直接调用
如：bash ，php，javascript</li></ul><h3 id=shell中变量命名法则>Shell中变量命名法则
<a class=header-anchor href=#shell%e4%b8%ad%e5%8f%98%e9%87%8f%e5%91%bd%e5%90%8d%e6%b3%95%e5%88%99></a></h3><h4 id=命名要求>命名要求
<a class=header-anchor href=#%e5%91%bd%e5%90%8d%e8%a6%81%e6%b1%82></a></h4><ul><li>区分大小写</li><li>不能使程序中的保留字和内置变量：如：if, for</li><li>只能使用数字、字母及下划线，且不能以数字开头，注意：不支持短横线 “ - ”，和主机名相反</li></ul><h4 id=命名习惯>命名习惯
<a class=header-anchor href=#%e5%91%bd%e5%90%8d%e4%b9%a0%e6%83%af></a></h4><ul><li>见名知义，用英文单词命名，并体现出实际作用，不要用简写，如：ATM</li><li>变量名大写</li><li>局部变量小写</li><li>函数名小写</li><li>大驼峰StudentFirstName,由多个单词组成，且每个单词的首字母是大写，其它小写</li><li>小驼峰studentFirstName ,由多个单词组成，第一个单词的首字母小写，后续每个单词的首字母是大写，其它小写</li><li>下划线: student_name
范例：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky ~]# NAME=lan
</span></span><span style=display:flex><span>[root@rocky ~]# echo $NAME
</span></span><span style=display:flex><span>lan
</span></span><span style=display:flex><span>[root@rocky ~]# AGE=18
</span></span><span style=display:flex><span>[root@rocky ~]# echo $NAME:$AGE
</span></span><span style=display:flex><span>lan:18
</span></span><span style=display:flex><span>[root@rocky ~]# echo $NAME_$AGE
</span></span><span style=display:flex><span>18
</span></span><span style=display:flex><span>[root@rocky ~]# echo ${NAME}_$AGE
</span></span><span style=display:flex><span>lan_18
</span></span></code></pre></div><h3 id=变量定义和引用>变量定义和引用
<a class=header-anchor href=#%e5%8f%98%e9%87%8f%e5%ae%9a%e4%b9%89%e5%92%8c%e5%bc%95%e7%94%a8></a></h3><p>变量的生效范围等标准划分变量类型</p><ul><li>普通变量：生效范围为当前shell进程；对当前shell之外的其它shell进程，包括当前shell的子shell
进程均无效</li><li>环境变量：生效范围为当前shell进程及其子进程</li><li>本地变量：生效范围为当前shell进程中某代码片断，通常指函数<br>查看进程关系命令<code>pstree -p</code><br>查看自己所在进程：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@rocky ~]# echo $BASHPID
</span></span><span style=display:flex><span>649758
</span></span></code></pre></div><p><strong>变量赋值：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>name=&#39;value&#39;
</span></span></code></pre></div><p>value 可以是以下多种形式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>直接字串：</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;root&#39;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>变量引用：</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;$USER&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>命令引用：</span>name<span style=color:#f92672>=`</span>COMMAND<span style=color:#f92672>`</span> <span style=color:#960050;background-color:#1e0010>或者</span> name<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>$</span>(COMMAND)
</span></span></code></pre></div><p>注意：变量赋值是临时生效，当退出终端后，变量会自动删除，无法持久保存，脚本中的变量会随着脚
本结束，也会自动删除
<strong>变量引用：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$name
</span></span><span style=display:flex><span>${name}
</span></span></code></pre></div><p>弱引用和强引用</p><ul><li>&ldquo;$name&rdquo; 弱引用，其中的变量引用会被替换为变量值</li><li>&lsquo;*$name&rsquo; 强引用，其中的变量引用不会被替换为变量值，而保持原字符串<br>范例：变量的各种赋值方式和引用</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-mysql data-lang=mysql><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#TITLE=&#39;cto&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $TITLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>cto
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo I am $TITLE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>I am cto
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#34;I am $TITLE&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>I am cto
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#39;I am $TITLE&#39;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>I am <span style=color:#960050;background-color:#1e0010>$</span>TITLE
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#NAME=$USER
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $NAME
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>root
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#USER=`whoami`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $USER
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>root
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#FILE=`ls /run`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $FILE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>agetty.reload atd.pid auditd.pid autofs.fifo<span style=color:#f92672>-</span>misc autofs.fifo<span style=color:#f92672>-</span>net console
</span></span><span style=display:flex><span>cron.reboot cryptsetup dbus faillock fsck initctl initramfs <span style=color:#66d9ef>lock</span> log mount
</span></span><span style=display:flex><span>NetworkManager plymouth rsyslogd.pid screen sepermit setrans sshd.pid sssd.pid
</span></span><span style=display:flex><span>sudo systemd tmpfiles.d tuned udev <span style=color:#66d9ef>user</span> utmp vmware
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#FILE=/etc/*
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $FILE
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>adjtime <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>aliases <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>alternatives <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>anacrontab <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>at.deny
</span></span><span style=display:flex><span><span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>audit <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>authselect <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>autofs.conf <span style=color:#f92672>/</span>etc<span style=color:#f92672>/</span>autofs_ldap_auth.conf
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#seq 10
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#NUM=`seq 10`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $NUM
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>8</span> <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo &#34;$NUM&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>[root<span style=color:#f92672>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#NAMES=&#34;wang
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>&gt;</span> zhang
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> zhao
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> li<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[root@centos8 ~]#echo $NAMES
</span></span></span><span style=display:flex><span><span style=color:#e6db74>wang zhang zhao li
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[root@centos8 ~]#echo &#34;</span><span style=color:#960050;background-color:#1e0010>$</span>NAMES<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>wang
</span></span></span><span style=display:flex><span><span style=color:#e6db74>zhang
</span></span></span><span style=display:flex><span><span style=color:#e6db74>zhao
</span></span></span><span style=display:flex><span><span style=color:#e6db74>li
</span></span></span></code></pre></div><p>范例：变量引用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 data]#NAME=mage
</span></span><span style=display:flex><span>[root@centos8 data]#AGE=20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>[root@centos8 data]#echo $AGE
</span></span><span style=display:flex><span>20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME $AGE
</span></span><span style=display:flex><span>mage 20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME$AGE
</span></span><span style=display:flex><span>mage20
</span></span><span style=display:flex><span>[root@centos8 data]#echo $NAME_$AGE
</span></span><span style=display:flex><span>20
</span></span><span style=display:flex><span>[root@centos8 data]#echo ${NAME}_$AGE
</span></span><span style=display:flex><span>mage_20
</span></span></code></pre></div><p>范例：变量的间接赋值和引用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#TITLE=cto
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang
</span></span><span style=display:flex><span>[root@centos8 ~]#TITLE=$NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=mage
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>wang
</span></span></code></pre></div><p>范例：变量追加值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#TITLE=CTO
</span></span><span style=display:flex><span>[root@centos8 ~]#TITLE+=:wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>CTO:wang
</span></span></code></pre></div><p>范例：利用变量实现动态命令</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#CMD=hostname
</span></span><span style=display:flex><span>[root@centos8 ~]#$CMD
</span></span><span style=display:flex><span>centos8.wangxiaochun.com
</span></span></code></pre></div><p>显示已定义的所有变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>set
</span></span></code></pre></div><p><strong>删除变量：</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>unset &lt;name&gt;
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#NAME=mage
</span></span><span style=display:flex><span>[root@centos8 ~]#TITLE=ceo
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME $TITLE
</span></span><span style=display:flex><span>mage ceo
</span></span><span style=display:flex><span>[root@centos8 ~]#unset NAME TITLE
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME $TITLE
</span></span></code></pre></div><p>范例：显示系统信息</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat systeminfo.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： systeminfo.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： Show system information</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>RED<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\E[1;31m&#34;</span>
</span></span><span style=display:flex><span>GREEN<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;echo -e \E[1;32m&#34;</span>
</span></span><span style=display:flex><span>END<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\E[0m&#34;</span>
</span></span><span style=display:flex><span>. /etc/os-release
</span></span><span style=display:flex><span>$GREEN----------------------Host systeminfo--------------------$END
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;HOSTNAME: </span>$RED<span style=color:#e6db74>`hostname`</span>$END<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#echo -e &#34;IPADDR: $RED` ifconfig eth0|grep -Eo &#39;([0-9]{1,3}\.){3}[0-9]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>1,3<span style=color:#f92672>}</span><span style=color:#e6db74>&#39; |head -n1`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;IPADDR: $RED` hostname -I`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;OSVERSION: $RED$PRETTY_NAME$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;KERNEL: $RED`uname -r`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;CPU: $RED`lscpu|grep &#39;</span>^Model name<span style=color:#e6db74>&#39;|tr -s &#39;</span> <span style=color:#e6db74>&#39;|cut -d : -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;MEMORY: $RED`free -h|grep Mem|tr -s &#39;</span> <span style=color:#e6db74>&#39; : |cut -d : -f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;DISK: $RED`lsblk |grep &#39;</span>^sd<span style=color:#e6db74>&#39; |tr -s &#39;</span> <span style=color:#e6db74>&#39; |cut -d &#34; &#34; -f4`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>$GREEN---------------------------------------------------------$END
</span></span></span><span style=display:flex><span><span style=color:#e6db74>[root@centos8 scripts]#cat system_info.sh
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#********************************************************************
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Author: wangxiaochun
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#QQ: 29308620
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Date: 2019-12-23
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#FileName： systeminfo.sh
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#URL: http://www.magedu.com
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Description： Show system information
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#Copyright (C): 2019 All rights reserved
</span></span></span><span style=display:flex><span><span style=color:#e6db74>#********************************************************************
</span></span></span><span style=display:flex><span><span style=color:#e6db74>RED=&#34;\E[1;31m&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>GREEN=&#34;echo -e \E[1;32m&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>END=&#34;\E[0m&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>$GREEN----------------------Host systeminfo--------------------$END
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;HOSTNAME: $RED`hostname`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;IPADDR: $RED` ifconfig eth0|grep -Eo &#39;</span><span style=color:#f92672>([</span>0-9<span style=color:#f92672>]{</span>1,3<span style=color:#f92672>}</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>){</span>3<span style=color:#f92672>}[</span>0-9<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>1,3<span style=color:#f92672>}</span><span style=color:#e6db74>&#39; |head -n1`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;OSVERSION: $RED`cat /etc/redhat-release`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;KERNEL: $RED`uname -r`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;CPU: $RED`lscpu|grep &#39;</span>Model name<span style=color:#e6db74>&#39;|tr -s &#39;</span> <span style=color:#e6db74>&#39;|cut -d : -f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;MEMORY: $RED`free -h|grep Mem|tr -s &#39;</span> <span style=color:#e6db74>&#39; : |cut -d : -f2`$END&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>echo -e &#34;DISK: $RED`lsblk |grep &#39;</span>^sd<span style=color:#e6db74>&#39; |tr -s &#39;</span> <span style=color:#960050;background-color:#1e0010>&#39;</span> |cut -d <span style=color:#e6db74>&#34; &#34;</span> -f4<span style=color:#e6db74>`</span>$END<span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span>$GREEN<span style=color:#e6db74>---------------------------------------------------------</span>$END<span style=color:#e6db74>
</span></span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat backup.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wang</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-05</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description: test</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FILE: backup.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#VERSION: 1.0</span>
</span></span><span style=display:flex><span>COLOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;echo -e \E[1;35m&#39;</span>
</span></span><span style=display:flex><span>END<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\E[0m&#39;</span>
</span></span><span style=display:flex><span>BACKUP<span style=color:#f92672>=</span>/backup
</span></span><span style=display:flex><span>SRC<span style=color:#f92672>=</span>/etc
</span></span><span style=display:flex><span>DATE<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>date +%F<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>COLOR<span style=color:#e6db74>}</span>Starting backup...$END
</span></span><span style=display:flex><span>sleep <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>cp -av $SRC <span style=color:#e6db74>${</span>BACKUP<span style=color:#e6db74>}${</span>SRC<span style=color:#e6db74>}</span>_$DATE
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>COLOR<span style=color:#e6db74>}</span>Backup is finished$END
</span></span></code></pre></div><h3 id=练习>练习：
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0></a></h3><ul><li>1、编写脚本 systeminfo.sh，显示当前主机系统信息，包括:主机名，IPv4地址，操作系统版本，内核
版本，CPU型号，内存大小，硬盘大小</li><li>2、编写脚本 backup.sh，可实现每日将 /etc/ 目录备份到 /backup/etcYYYY-mm-dd中</li><li>3、编写脚本 disk.sh，显示当前硬盘分区中空间利用率最大的值</li><li>4、编写脚本 links.sh，显示正连接本主机的每个远程主机的IPv4地址和连接数，并按连接数从大到小排
序</li></ul><h3 id=环境变量>环境变量
<a class=header-anchor href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f></a></h3><p>环境变量：</p><ul><li>可以使子进程（包括孙子进程）继承父进程的变量，但是无法让父进程使用子进程的变量</li><li>一旦子进程修改从父进程继承的变量，将会新的值传递给孙子进程</li><li>一般只在系统配置文件中使用，在脚本中较少使用
变量声明和赋值：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#声明并赋值</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> name<span style=color:#f92672>=</span>VALUE
</span></span><span style=display:flex><span>declare <span style=color:#f92672>-</span>x name<span style=color:#f92672>=</span>VALUE
</span></span><span style=display:flex><span><span style=color:#75715e>#或者分两步实现</span>
</span></span><span style=display:flex><span>name<span style=color:#f92672>=</span>VALUE
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> name
</span></span></code></pre></div><p>变量引用：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$name
</span></span><span style=display:flex><span>${name}
</span></span></code></pre></div><p>显示所有环境变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>env
</span></span><span style=display:flex><span>printenv
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span>
</span></span><span style=display:flex><span>declare <span style=color:#f92672>-</span>x
</span></span></code></pre></div><p>查看指定进程的环境变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>cat /proc/$PID/environ
</span></span></code></pre></div><p>删除变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>unset name
</span></span></code></pre></div><p>bash内建的环境变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>PATH
</span></span><span style=display:flex><span>SHELL
</span></span><span style=display:flex><span>USER
</span></span><span style=display:flex><span>UID
</span></span><span style=display:flex><span>HOME
</span></span><span style=display:flex><span>PWD
</span></span><span style=display:flex><span>SHLVL #shell的嵌套层数，即深度
</span></span><span style=display:flex><span>LANG
</span></span><span style=display:flex><span>MAIL
</span></span><span style=display:flex><span>HOSTNAME
</span></span><span style=display:flex><span>HISTSIZE
</span></span><span style=display:flex><span>_ #下划线,表示前一命令的最后一个参数
</span></span></code></pre></div><p>范例: 查看进程的环境变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#cat /proc/1235/environ
</span></span><span style=display:flex><span>USER=rootLOGNAME=rootHOME=/rootPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/us
</span></span><span style=display:flex><span>r/binSHELL=/bin/bashTERM=linuxSSH_AUTH_SOCK=/tmp/ssh-
</span></span><span style=display:flex><span>iIeuAxdLiY/agent.1234XDG_SESSION_ID=1XDG_RUNTIME_DIR=/run/user/0DBUS_SESSION_BUS
</span></span><span style=display:flex><span>_ADDRESS=unix:path=/run/user/0/busSSH_CLIENT=10.0.0.1 13258
</span></span><span style=display:flex><span>22SSH_CONNECTION=10.0.0.1 13258 10.0.0.8 22SSH_TTY=/dev/pts/0[root@centos8 ~]#
</span></span><span style=display:flex><span>[root@centos8 ~]#
</span></span><span style=display:flex><span>[root@centos8 ~]#cat /proc/1235/environ |tr &#39;\0&#39; &#39;\n&#39;
</span></span><span style=display:flex><span>USER=root
</span></span><span style=display:flex><span>LOGNAME=root
</span></span><span style=display:flex><span>HOME=/root
</span></span><span style=display:flex><span>PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
</span></span><span style=display:flex><span>SHELL=/bin/bash
</span></span><span style=display:flex><span>TERM=linux
</span></span><span style=display:flex><span>SSH_AUTH_SOCK=/tmp/ssh-iIeuAxdLiY/agent.1234
</span></span><span style=display:flex><span>XDG_SESSION_ID=1
</span></span><span style=display:flex><span>XDG_RUNTIME_DIR=/run/user/0
</span></span><span style=display:flex><span>DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/0/bus
</span></span><span style=display:flex><span>SSH_CLIENT=10.0.0.1 13258 22
</span></span><span style=display:flex><span>SSH_CONNECTION=10.0.0.1 13258 10.0.0.8 22
</span></span><span style=display:flex><span>SSH_TTY=/dev/pts/0
</span></span></code></pre></div><h3 id=只读变量>只读变量
<a class=header-anchor href=#%e5%8f%aa%e8%af%bb%e5%8f%98%e9%87%8f></a></h3><p>只读变量：只能声明定义，但后续不能修改和删除，即常量<br>声明只读变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>readonly name
</span></span><span style=display:flex><span>declare -r name
</span></span></code></pre></div><p>查看只读变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>readonly [-p]
</span></span><span style=display:flex><span>declare -r
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#readonly PI=3.14159</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $PI</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3.14159</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#PI=3.14</span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span>bash: PI: readonly variable
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#unset PI</span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span>bash: unset: PI: cannot unset: readonly variable
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $PI</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>3.14159</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#exit</span>
</span></span><span style=display:flex><span>logout
</span></span><span style=display:flex><span>Connection closed by foreign host<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>Disconnected from remote host(<span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span>) at <span style=color:#ae81ff>14</span>:<span style=color:#ae81ff>27</span>:<span style=color:#ae81ff>04.</span>
</span></span><span style=display:flex><span>Type <span style=color:#960050;background-color:#1e0010>`</span>help<span style=color:#e6db74>&#39; to learn how to use Xshell prompt.</span>
</span></span><span style=display:flex><span>[c:\<span style=color:#f92672>~</span>]<span style=color:#f92672>$</span>
</span></span><span style=display:flex><span>Reconnecting <span style=color:#f92672>in</span> <span style=color:#ae81ff>1</span> seconds<span style=color:#f92672>.</span> Press any key to exit local shell<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>Connecting to <span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.8</span>:<span style=color:#ae81ff>22.</span><span style=color:#f92672>..</span>
</span></span><span style=display:flex><span>Connection established<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>To escape to local shell, press <span style=color:#e6db74>&#39;Ctrl+Alt+]&#39;</span><span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>WARNING<span style=color:#f92672>!</span> The remote SSH server rejected X11 forwarding request<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>Last login: Wed Apr <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>13</span>:<span style=color:#ae81ff>51</span>:<span style=color:#ae81ff>28</span> <span style=color:#ae81ff>2020</span> from <span style=color:#ae81ff>10.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0.1</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#echo $PI</span>
</span></span></code></pre></div><h3 id=位置变量>位置变量
<a class=header-anchor href=#%e4%bd%8d%e7%bd%ae%e5%8f%98%e9%87%8f></a></h3><p>位置变量：在bash shell中内置的变量, 在脚本代码中调用通过命令行传递给脚本的参数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$1, $2, ... 对应第1个、第2个等参数，shift [n]换位置
</span></span><span style=display:flex><span>$0 命令本身,包括路径
</span></span><span style=display:flex><span>$* 传递给脚本的所有参数，全部参数合为一个字符串
</span></span><span style=display:flex><span>$@ 传递给脚本的所有参数，每个参数为独立字符串
</span></span><span style=display:flex><span>$# 传递给脚本的参数的个数
</span></span><span style=display:flex><span>注意：$@ $* 只在被双引号包起来的时候才会有差异
</span></span></code></pre></div><p>清空所有位置变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>set --
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/arg.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-01</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： arg.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;1st arg is </span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;2st arg is </span>$2<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;3st arg is </span>$3<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;10st arg is </span><span style=color:#e6db74>${</span>10<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;11st arg is </span><span style=color:#e6db74>${</span>11<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;The number of arg is </span>$#<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;All args are </span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;All args are </span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;The scriptname is `basename </span>$0<span style=color:#e6db74>`&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/scripts/arg.sh {a..z}</span>
</span></span><span style=display:flex><span>1st arg is a
</span></span><span style=display:flex><span>2st arg is b
</span></span><span style=display:flex><span>3st arg is c
</span></span><span style=display:flex><span>10st arg is j
</span></span><span style=display:flex><span>11st arg is k
</span></span><span style=display:flex><span>The number of arg is <span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span>All args are a b c d e f g h i j k l m n o p q r s t u v w x y z
</span></span><span style=display:flex><span>All args are a b c d e f g h i j k l m n o p q r s t u v w x y z
</span></span><span style=display:flex><span>The scriptname is arg.sh
</span></span></code></pre></div><p>范例：删库跑路之命令rm的安全实现</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/rm.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-01</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName: rm.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>WARNING_COLOR<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;echo -e \E[1;31m&#34;</span>
</span></span><span style=display:flex><span>END<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\E[0m&#34;</span>
</span></span><span style=display:flex><span>DIR<span style=color:#f92672>=</span>/tmp/<span style=color:#e6db74>`</span>date +%F_%H-%M-%S<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>mkdir $DIR
</span></span><span style=display:flex><span>mv $* $DIR
</span></span><span style=display:flex><span><span style=color:#e6db74>${</span>WARNING_COLOR<span style=color:#e6db74>}</span>Move $* to $DIR $END
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#chmod a+x /data/scripts/rm.sh</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#alias rm=&#39;/data/scripts/rm.sh&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#touch {1..10}.txt</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#rm *.txt</span>
</span></span><span style=display:flex><span>Move 10.txt 1.txt 2.txt 3.txt 4.txt 5.txt 6.txt 7.txt 8.txt 9.txt to /tmp/2020-
</span></span><span style=display:flex><span>04-01_15-15-28
</span></span></code></pre></div><p>范例：$*和$@的区别</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat f1.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;f1.sh:all args are </span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;f1.sh:all args are </span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>./file.sh <span style=color:#e6db74>&#34;</span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat f2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;f2.sh:all args are </span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;f2.sh:all args are </span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>./file.sh <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat file.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;file.sh:1st arg is </span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#./f1.sh a b c</span>
</span></span><span style=display:flex><span>f1.sh:all args are a b c
</span></span><span style=display:flex><span>f1.sh:all args are a b c
</span></span><span style=display:flex><span>file.sh:1st arg is a b c
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#./f2.sh a b c</span>
</span></span><span style=display:flex><span>f2.sh:all args are a b c
</span></span><span style=display:flex><span>f2.sh:all args are a b c
</span></span><span style=display:flex><span>file.sh:1st arg is a
</span></span></code></pre></div><p>范例: 利用软链接实现同一个脚本不同功能</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat test.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>echo $0
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#ln -s test.sh a.sh</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#ln -s test.sh b.sh</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#./a.sh</span>
</span></span><span style=display:flex><span>./a.sh
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#./b.sh</span>
</span></span><span style=display:flex><span>./b.sh
</span></span></code></pre></div><h3 id=退出状态码变量>退出状态码变量
<a class=header-anchor href=#%e9%80%80%e5%87%ba%e7%8a%b6%e6%80%81%e7%a0%81%e5%8f%98%e9%87%8f></a></h3><p>当我们浏览网页时，有时会看到下图所显示的数字，表示网页的错误信息，我们称为状态码，在shell脚
本中也有相似的技术表示程序执行的相应状态。<br>进程执行后，将使用变量 $? 保存状态码的相关数字，不同的值反应成功或失败，$?取值范例 0-255</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$?的值为0 #代表成功
</span></span><span style=display:flex><span>$?的值是1到255 #代表失败
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>ping -c1 -W1 hostdown &amp;&gt; /dev/null
</span></span><span style=display:flex><span>echo $?
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#curl -fs http://www.wangxiaochun.com &gt;/dev/null
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>用户可以在脚本中使用以下命令自定义退出状态码</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>exit [n]
</span></span></code></pre></div><p>注意：</p><ul><li>脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命令后面的数字</li><li>如果exit后面无数字,终止退出状态取决于exit命令前面命令执行结果
如果没有exit命令, 即未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执行的最后
一条命令的状态码</li></ul><h3 id=展开命令行>展开命令行
<a class=header-anchor href=#%e5%b1%95%e5%bc%80%e5%91%bd%e4%bb%a4%e8%a1%8c></a></h3><p><strong>展开命令执行顺序</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>把命令行分成单个命令词
</span></span><span style=display:flex><span>展开别名
</span></span><span style=display:flex><span>展开大括号的声明{}
</span></span><span style=display:flex><span>展开波浪符声明 ~
</span></span><span style=display:flex><span>命令替换$() 和 ``
</span></span><span style=display:flex><span>再次把命令行分成命令词
</span></span><span style=display:flex><span>展开文件通配符*、?、[abc]等等
</span></span><span style=display:flex><span>准备I/0重导向 &lt;、&gt;
</span></span><span style=display:flex><span>运行命令
</span></span></code></pre></div><p><strong>防止扩展</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>反斜线（\）会使随后的字符按原意解释
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#echo Your cost: \$5.00
</span></span><span style=display:flex><span>Your cost: $5.00
</span></span><span style=display:flex><span>[root@rocky8 ~]#echo &#34;The book&#39;s price is \$10&#34;
</span></span><span style=display:flex><span>The book&#39;s price is $10
</span></span></code></pre></div><p><strong>加引号来防止扩展</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>单引号（’’）防止所有扩展
</span></span><span style=display:flex><span>双引号（”“）也可防止扩展，但是以下情况例外：$（美元符号）
</span></span></code></pre></div><p><strong>变量扩展</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>`` : 反引号，命令替换
</span></span><span style=display:flex><span>\：反斜线，禁止单个字符扩展
</span></span><span style=display:flex><span>!：叹号，历史命令替换
</span></span></code></pre></div><p>范例: ``和$() 区别</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#echo `echo \`
</span></span><span style=display:flex><span>&gt; ^C
</span></span><span style=display:flex><span>[root@centos8 ~]#echo `echo \\`
</span></span><span style=display:flex><span>[root@centos8 ~]#echo `echo \\\`
</span></span><span style=display:flex><span>&gt; ^C
</span></span><span style=display:flex><span>[root@centos8 ~]#echo `echo \\\\`
</span></span><span style=display:flex><span>\
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $(echo \)
</span></span><span style=display:flex><span>&gt; ^C
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $(echo \\)
</span></span><span style=display:flex><span>\
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $(echo \\\)
</span></span><span style=display:flex><span>&gt; ^C
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $(echo \\\\)
</span></span><span style=display:flex><span>\\
</span></span></code></pre></div><h3 id=脚本安全和-set>脚本安全和 set
<a class=header-anchor href=#%e8%84%9a%e6%9c%ac%e5%ae%89%e5%85%a8%e5%92%8c-set></a></h3><p>set 命令：可以用来定制 shell 环境<br><strong>$- 变量</strong><br>h：hashall，打开选项后，Shell 会将命令所在的路径hash下来，避免每次都要查询。通过set +h将h选<br>项关闭<br>i：interactive-comments，包含这个选项说明当前的 shell 是一个交互式的 shell。所谓的交互式shell,
在脚本中，i选项是关闭的<br>m：monitor，打开监控模式，就可以通过Job control来控制进程的停止、继续，后台或者前台执行等<br>B：braceexpand，大括号扩展<br>H：history，H选项打开，可以展开历史列表中的命令，可以通过!感叹号来完成，例如“!!”返回上最近的
一个历史命令，“!n”返回第 n 个历史命令<br>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#echo $-
</span></span><span style=display:flex><span>himBHs
</span></span><span style=display:flex><span>[root@centos8 ~]#set +h
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $-
</span></span><span style=display:flex><span>imBHs
</span></span><span style=display:flex><span>[root@centos8 ~]#hash
</span></span><span style=display:flex><span>-bash: hash: hashing disabled
</span></span><span style=display:flex><span>[root@centos8 ~]#echo {1..10}
</span></span><span style=display:flex><span>1 2 3 4 5 6 7 8 9 10
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $-
</span></span><span style=display:flex><span>imBHs
</span></span><span style=display:flex><span>[root@centos8 ~]#set +B
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $-
</span></span><span style=display:flex><span>imHs
</span></span><span style=display:flex><span>[root@centos8 ~]#echo {1..10}
</span></span><span style=display:flex><span>{1..10}
</span></span></code></pre></div><p><strong>set 命令实现脚本安全</strong><br>-u 在扩展一个没有设置的变量时，显示错误信息， 等同set -o nounset<br>-e 如果一个命令返回一个非0退出状态值(失败)就退出， 等同set -o errexit<br>-o option 显示，打开或者关闭选项<br>显示选项：set -o<br>打开选项：set -o 选项<br>关闭选项：set +o 选项<br>-x 当执行命令时，打印命令及其参数,类似 bash -x<br>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#set -o</span>
</span></span><span style=display:flex><span>allexport off
</span></span><span style=display:flex><span>braceexpand on
</span></span><span style=display:flex><span>emacs on
</span></span><span style=display:flex><span>errexit off
</span></span><span style=display:flex><span>errtrace off
</span></span><span style=display:flex><span>functrace off
</span></span><span style=display:flex><span>hashall on
</span></span><span style=display:flex><span>histexpand on
</span></span><span style=display:flex><span>history on
</span></span><span style=display:flex><span>ignoreeof off
</span></span><span style=display:flex><span>interactive<span style=color:#f92672>-</span>comments on
</span></span><span style=display:flex><span>keyword off
</span></span><span style=display:flex><span>monitor on
</span></span><span style=display:flex><span>noclobber off
</span></span><span style=display:flex><span>noexec off
</span></span><span style=display:flex><span>noglob off
</span></span><span style=display:flex><span>nolog off
</span></span><span style=display:flex><span>notify off
</span></span><span style=display:flex><span>nounset off
</span></span><span style=display:flex><span>onecmd off
</span></span><span style=display:flex><span>physical off
</span></span><span style=display:flex><span>pipefail off
</span></span><span style=display:flex><span>posix off
</span></span><span style=display:flex><span>privileged off
</span></span><span style=display:flex><span>verbose off
</span></span><span style=display:flex><span>vi off
</span></span><span style=display:flex><span>xtrace off
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>DIR=/data
</span></span><span style=display:flex><span>cd $DIR
</span></span><span style=display:flex><span>rm -rf *
</span></span><span style=display:flex><span>#rm -rf $DIr/*
</span></span></code></pre></div><h3 id=格式化输出-printf>格式化输出 printf
<a class=header-anchor href=#%e6%a0%bc%e5%bc%8f%e5%8c%96%e8%be%93%e5%87%ba-printf></a></h3><p>相当于增强版的 echo, 实现丰富的格式化输出<br>格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>printf &#34;指定的格式&#34; &#34;文本1&#34; ”文本2“……
</span></span></code></pre></div><table><thead><tr><th>printf</th><th>format</th><th>item1</th><th>item2</th><th>&mldr;</th></tr></thead><tbody><tr><td>printf</td><td>&ldquo;%s\n&rdquo;</td><td>abc</td><td>def</td><td></td></tr></tbody></table><p><strong>常用格式替换符</strong></p><table><thead><tr><th>替换符</th><th>功能</th></tr></thead><tbody><tr><td>%s</td><td>字符串</td></tr><tr><td>%d, %i</td><td>十进制整数</td></tr><tr><td>%f</td><td>浮点格式</td></tr><tr><td>%c</td><td>ASCII字符，即显示对应参数的第一个字符</td></tr><tr><td>%b</td><td>相应的参数中包含转义字符时，可以使用此替换符进行替换，对应的转义字符会被转义</td></tr><tr><td>%o</td><td>八进制值</td></tr><tr><td>%u</td><td>不带正负号的十进制值</td></tr><tr><td>%x</td><td>十六进制值 (a-f)</td></tr><tr><td>%X</td><td>十六进制值 (A-F)</td></tr><tr><td>%%</td><td>表示%本身</td></tr><tr><td>说明：</td><td></td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>%#s 中的数字代表此替换符中的输出字符宽度，不足补空格，默认是右对齐,%-10s表示10个字符宽，- 表示
</span></span><span style=display:flex><span>左对齐
</span></span><span style=display:flex><span>%03d 表示3位宽度,不足前面用0补全,超出位数原样输出
</span></span><span style=display:flex><span>%.2f 中的2表示小数点后显示的小数位数
</span></span></code></pre></div><p>常用转义字符</p><table><thead><tr><th>转义符</th><th>功能</th></tr></thead><tbody><tr><td>\a</td><td>警告字符，通常为ASCII的BEL字符</td></tr><tr><td>\b</td><td>后退</td></tr><tr><td>\f</td><td>换页</td></tr><tr><td>\n</td><td>换行</td></tr><tr><td>\r</td><td>回车</td></tr><tr><td>\t</td><td>水平制表符</td></tr><tr><td>\v</td><td>垂直制表符</td></tr><tr><td>\</td><td>表示\本身</td></tr></tbody></table><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#printf &#34;%s&#34; 1 2 3 4
</span></span><span style=display:flex><span>1234[root@centos8 ~]#
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%s\n&#34; 1 2 3 4
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>2
</span></span><span style=display:flex><span>3
</span></span><span style=display:flex><span>4
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%f\n&#34; 1 2 3 4
</span></span><span style=display:flex><span>1.000000
</span></span><span style=display:flex><span>2.000000
</span></span><span style=display:flex><span>3.000000
</span></span><span style=display:flex><span>4.000000
</span></span><span style=display:flex><span>#.2f 表示保留两位小数
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%.2f\n&#34; 1 2 3 4
</span></span><span style=display:flex><span>1.00
</span></span><span style=display:flex><span>2.00
</span></span><span style=display:flex><span>3.00
</span></span><span style=display:flex><span>4.00
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;(%s)&#34; 1 2 3 4;echo
</span></span><span style=display:flex><span>(1)(2)(3)(4)
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34; (%s) &#34; 1 2 3 4;echo &#34;&#34;
</span></span><span style=display:flex><span>(1) (2) (3) (4)
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;(%s)\n&#34; 1 2 3 4
</span></span><span style=display:flex><span>(1)
</span></span><span style=display:flex><span>(2)
</span></span><span style=display:flex><span>(3)
</span></span><span style=display:flex><span>(4)
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%s %s\n&#34; 1 2 3 4
</span></span><span style=display:flex><span>1 2
</span></span><span style=display:flex><span>3 4
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%s %s %s\n&#34; 1 2 3 4
</span></span><span style=display:flex><span>1 2 3
</span></span><span style=display:flex><span>4
</span></span><span style=display:flex><span>#%-10s 表示宽度10个字符，左对齐
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%-10s %-10s %-4s %s \n&#34; 姓名 性别 年龄 体重 小明 男 20 70
</span></span><span style=display:flex><span>小红 女 18 50
</span></span><span style=display:flex><span>姓名 性别 年龄 体重
</span></span><span style=display:flex><span>小明 男 20 70
</span></span><span style=display:flex><span>小红 女 18 50
</span></span><span style=display:flex><span>#将十进制的17转换成16进制数
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%X&#34; 17
</span></span><span style=display:flex><span>11[root@centos8 ~]#
</span></span><span style=display:flex><span>#将十六进制C转换成十进制
</span></span><span style=display:flex><span>[root@centos8 ~]#printf &#34;%d\n&#34; 0xC
</span></span><span style=display:flex><span>12
</span></span><span style=display:flex><span>[root@rocky8 ~]#VAR=&#34;welcome to Magedu&#34;;printf &#34;\033[1;32m%s\033[0m &#34; $VAR
</span></span><span style=display:flex><span>welcome to Magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#VAR=&#34;welcome to Magedu&#34;;printf &#34;\033[1;32m%s\033[0m\n&#34; $VAR
</span></span><span style=display:flex><span>welcome
</span></span><span style=display:flex><span>to
</span></span><span style=display:flex><span>Magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#VAR=&#34;welcome to Magedu&#34;;printf &#34;\033[1;32m%s\033[0m\n&#34; &#34;$VAR&#34;
</span></span><span style=display:flex><span>welcome to Magedu
</span></span></code></pre></div><h2 id=算术运算>算术运算
<a class=header-anchor href=#%e7%ae%97%e6%9c%af%e8%bf%90%e7%ae%97></a></h2><p>Shell允许在某些情况下对算术表达式进行求值，比如：let和declare 内置命令，(( ))复合命令和算术扩
展。求值以固定宽度的整数进行，不检查溢出，尽管除以0 被困并标记为错误。运算符及其优先级，关
联性和值与C语言相同。以下运算符列表分组为等优先级运算符级别。级别按降序排列优先。<br><strong>注意：bash 只支持整数，不支持小数</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>+</span> <span style=color:#f92672>-</span> addition, subtraction
</span></span><span style=display:flex><span><span style=color:#f92672>*</span> <span style=color:#f92672>/</span> <span style=color:#f92672>%</span> multiplication, division, remainder, <span style=color:#f92672>%</span><span style=color:#960050;background-color:#1e0010>表示取模，即取余数，示例：</span><span style=color:#ae81ff>9</span><span style=color:#f92672>%</span><span style=color:#ae81ff>4</span><span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#ae81ff>5</span><span style=color:#f92672>%</span><span style=color:#ae81ff>3</span><span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>i<span style=color:#f92672>++</span> i<span style=color:#f92672>--</span> variable post<span style=color:#f92672>-</span>increment <span style=color:#f92672>and</span> post<span style=color:#f92672>-</span>decrement
</span></span><span style=display:flex><span><span style=color:#f92672>++</span>i <span style=color:#f92672>--</span>i variable pre<span style=color:#f92672>-</span>increment <span style=color:#f92672>and</span> pre<span style=color:#f92672>-</span>decrement
</span></span><span style=display:flex><span><span style=color:#f92672>=</span> <span style=color:#f92672>*=</span> <span style=color:#f92672>/=</span> <span style=color:#f92672>%=</span> <span style=color:#f92672>+=</span> <span style=color:#f92672>-=</span> <span style=color:#f92672>&lt;&lt;=</span> <span style=color:#f92672>&gt;&gt;=</span> <span style=color:#f92672>&amp;=</span> <span style=color:#f92672>^=</span> <span style=color:#f92672>|=</span> assignment
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> <span style=color:#f92672>+</span> unary minus <span style=color:#f92672>and</span> plus
</span></span><span style=display:flex><span><span style=color:#f92672>!</span> <span style=color:#f92672>~</span> logical <span style=color:#f92672>and</span> bitwise negation
</span></span><span style=display:flex><span><span style=color:#f92672>**</span> exponentiation <span style=color:#960050;background-color:#1e0010>乘方</span>,<span style=color:#960050;background-color:#1e0010>即指数运算</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;&lt;</span> <span style=color:#f92672>&gt;&gt;</span> left <span style=color:#f92672>and</span> right bitwise shifts
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;=</span> <span style=color:#f92672>&gt;=</span> <span style=color:#f92672>&lt;</span> <span style=color:#f92672>&gt;</span> comparison
</span></span><span style=display:flex><span><span style=color:#f92672>==</span> <span style=color:#f92672>!=</span> equality <span style=color:#f92672>and</span> inequality
</span></span><span style=display:flex><span><span style=color:#f92672>&amp;</span> bitwise AND
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> bitwise OR
</span></span><span style=display:flex><span><span style=color:#f92672>^</span> bitwise exclusive OR
</span></span><span style=display:flex><span><span style=color:#f92672>&amp;&amp;</span> logical AND
</span></span><span style=display:flex><span><span style=color:#f92672>||</span> logical OR
</span></span><span style=display:flex><span>expr<span style=color:#960050;background-color:#1e0010>?</span>expr:expr conditional operator
</span></span><span style=display:flex><span>expr1 , expr2 comma
</span></span></code></pre></div><p>乘法符号有些场景中需要转义<br>实现算术运算：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>(<span style=color:#ae81ff>1</span>) let <span style=color:#66d9ef>var</span><span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>算术表达式</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>2</span>) ((<span style=color:#66d9ef>var</span><span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>算术表达式</span>)) <span style=color:#960050;background-color:#1e0010>和上面等价</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>3</span>) <span style=color:#66d9ef>var</span><span style=color:#f92672>=$</span>[<span style=color:#960050;background-color:#1e0010>算术表达式</span>]
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>4</span>) <span style=color:#66d9ef>var</span><span style=color:#f92672>=$</span>((<span style=color:#960050;background-color:#1e0010>算术表达式</span>))
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>5</span>) <span style=color:#66d9ef>var</span><span style=color:#f92672>=$</span>(expr arg1 arg2 arg3 <span style=color:#f92672>...</span>)
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>6</span>) declare <span style=color:#f92672>-</span>i <span style=color:#66d9ef>var</span> <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>数值</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>7</span>) echo <span style=color:#e6db74>&#39;算术表达式&#39;</span> <span style=color:#f92672>|</span> bc
</span></span></code></pre></div><h3 id=随机数生成器变量>随机数生成器变量
<a class=header-anchor href=#%e9%9a%8f%e6%9c%ba%e6%95%b0%e7%94%9f%e6%88%90%e5%99%a8%e5%8f%98%e9%87%8f></a></h3><p>内建的随机数生成器变量：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$RANDOM 取值范围：0-32767
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#生成 31 - 37 之间随机数
</span></span><span style=display:flex><span>[root@rocky ~]# echo $[RANDOM%7+31]   对7取余数后+31
</span></span><span style=display:flex><span>#随机字体颜色
</span></span><span style=display:flex><span>[root@rocky ~]# echo -e &#34;\E[1;$[RANDOM%7+31]mhello\E[0m&#34;
</span></span></code></pre></div><h3 id=增强型赋值><strong>增强型赋值</strong>
<a class=header-anchor href=#%e5%a2%9e%e5%bc%ba%e5%9e%8b%e8%b5%8b%e5%80%bc></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>+= i+=10 相当于 i=i+10
</span></span><span style=display:flex><span>-= i-=j 相当于 i=i-j
</span></span><span style=display:flex><span>*=
</span></span><span style=display:flex><span>/=
</span></span><span style=display:flex><span>%=
</span></span><span style=display:flex><span>++ i++,++i 相当于 i=i+1
</span></span><span style=display:flex><span>-- i--,--i 相当于 i=i-1
</span></span></code></pre></div><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>let varOPERvalue
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#let i=10*2
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $i
</span></span><span style=display:flex><span>20
</span></span><span style=display:flex><span>[root@centos8 ~]#((j=i+10))
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $j
</span></span><span style=display:flex><span>30
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#自加3后自赋值
</span></span><span style=display:flex><span>let count+=3
</span></span><span style=display:flex><span>[root@centos8 ~]#i=10
</span></span><span style=display:flex><span>[root@centos8 ~]#let i+=20 #相当于let i=i+20
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $i
</span></span><span style=display:flex><span>30
</span></span><span style=display:flex><span>[root@centos8 ~]#j=20
</span></span><span style=display:flex><span>[root@centos8 ~]#let i*=j
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $i
</span></span><span style=display:flex><span>600
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#75715e>#自增，自减</span>
</span></span><span style=display:flex><span>let <span style=color:#66d9ef>var</span><span style=color:#f92672>+=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>let <span style=color:#66d9ef>var</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>let <span style=color:#66d9ef>var</span><span style=color:#f92672>-=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>let <span style=color:#66d9ef>var</span><span style=color:#f92672>--</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#unset i j ; i=1; let j=i++; echo &#34;i=$i,j=$j&#34;  i赋值给j再自增</span>
</span></span><span style=display:flex><span>i<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>,j<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>[root<span style=color:#960050;background-color:#1e0010>@</span>centos8 <span style=color:#f92672>~</span>]<span style=color:#75715e>#unset i j ; i=1; let j=++i; echo &#34;i=$i,j=$j&#34;   i自增再赋值给j</span>
</span></span><span style=display:flex><span>i<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>,j<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#expr 2 * 3
</span></span><span style=display:flex><span>expr: syntax error: unexpected argument ‘anaconda-ks.cfg’
</span></span><span style=display:flex><span>[root@centos8 ~]#ls
</span></span><span style=display:flex><span>anaconda-ks.cfg
</span></span><span style=display:flex><span>[root@centos8 ~]#expr 2 \* 3
</span></span><span style=display:flex><span>6
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#echo &#34;scale=3;20/3&#34;|bc
</span></span><span style=display:flex><span>6.666
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#i=10
</span></span><span style=display:flex><span>[root@centos8 ~]#j=20
</span></span><span style=display:flex><span>[root@centos8 ~]#declare -i result=i*j
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $result
</span></span><span style=display:flex><span>200
</span></span></code></pre></div><p>范例：鸡兔同笼，是中国古代著名典型趣题之一，记载于《孙子算经》之中。今有雉兔同笼，上有三十
五头，下有九十四足，问雉兔各几何？</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat chook_rabbit.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>HEAD<span style=color:#f92672>=</span>$1
</span></span><span style=display:flex><span>FOOT<span style=color:#f92672>=</span>$2
</span></span><span style=display:flex><span>RABBIT<span style=color:#f92672>=</span><span style=color:#66d9ef>$((</span><span style=color:#f92672>(</span>FOOT-HEAD-HEAD<span style=color:#f92672>)/</span><span style=color:#ae81ff>2</span><span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span>CHOOK<span style=color:#f92672>=</span>$<span style=color:#f92672>[</span>HEAD-RABBIT<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>echo RABBIT:$RABBIT
</span></span><span style=display:flex><span>echo CHOOK:$CHOOK
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#./chook_rabbit.sh 30 80</span>
</span></span><span style=display:flex><span>RABBIT:10
</span></span><span style=display:flex><span>CHOOK:20
</span></span></code></pre></div><h2 id=逻辑运算>逻辑运算
<a class=header-anchor href=#%e9%80%bb%e8%be%91%e8%bf%90%e7%ae%97></a></h2><h3 id=与或非>与或非
<a class=header-anchor href=#%e4%b8%8e%e6%88%96%e9%9d%9e></a></h3><table><thead><tr><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center>与逻辑 一假则假 全真则真</th><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center>或逻辑 一真则真，全假则假</th><th style=text-align:center></th><th style=text-align:center>非逻辑 假则真，真则假</th><th style=text-align:center></th><th style=text-align:center></th><th style=text-align:center>异或逻辑 相同为假，不同为真</th></tr></thead><tbody><tr><td style=text-align:center>A</td><td style=text-align:center>B</td><td style=text-align:center>F</td><td style=text-align:center>A</td><td style=text-align:center>B</td><td style=text-align:center>F</td><td style=text-align:center>A</td><td style=text-align:center>F</td><td style=text-align:center>A</td><td style=text-align:center>B</td><td style=text-align:center>F</td></tr><tr><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>0</td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>1</td></tr><tr><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>0</td><td style=text-align:center>1</td></tr></tbody></table><p><strong>异或逻辑：相同为假，不同为真</strong></p><p><strong>true, false</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>1,真
</span></span><span style=display:flex><span>0,假
</span></span><span style=display:flex><span>#注意,以上为二进制
</span></span></code></pre></div><h4 id=与>与：&
<a class=header-anchor href=#%e4%b8%8e></a></h4><p>和0相与结果为0，和1相与结果保留原值, 一假则假,全真才真</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>0 与 0 = 0
</span></span><span style=display:flex><span>0 与 1 = 0
</span></span><span style=display:flex><span>1 与 0 = 0
</span></span><span style=display:flex><span>1 与 1 = 1
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@ubuntu1804 ~]#x=$[2&amp;6]
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#echo $x
</span></span><span style=display:flex><span>2
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#x=$[7&amp;3]
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#echo $x
</span></span><span style=display:flex><span>3
</span></span></code></pre></div><h4 id=或>或：|
<a class=header-anchor href=#%e6%88%96></a></h4><p>和1相或结果为1，和0相或结果保留原值,一真则真,全假才假</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>0 或 0 = 0
</span></span><span style=display:flex><span>0 或 1 = 1
</span></span><span style=display:flex><span>1 或 0 = 1
</span></span><span style=display:flex><span>1 或 1 = 1
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@ubuntu1804 ~]#x=$[7|3]
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#echo $x
</span></span><span style=display:flex><span>7
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#x=$[2|5]
</span></span><span style=display:flex><span>[root@ubuntu1804 ~]#echo $x
</span></span><span style=display:flex><span>7
</span></span></code></pre></div><h4 id=非>非：！
<a class=header-anchor href=#%e9%9d%9e></a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>! 1 = 0 ! true
</span></span><span style=display:flex><span>! 0 = 1 ! false
</span></span></code></pre></div><h4 id=异或>异或：^
<a class=header-anchor href=#%e5%bc%82%e6%88%96></a></h4><p>异或的两个值，<code>相同为假，不同为真。</code>两个数字X,Y异或得到结果Z，Z再和任意两者之一X异或，将得出
另一个值Y</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>0 ^ 0 = 0
</span></span><span style=display:flex><span>0 ^ 1 = 1
</span></span><span style=display:flex><span>1 ^ 0 = 1
</span></span><span style=display:flex><span>1 ^ 1 = 0
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#true
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#false
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#! true
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#! false
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>范例: 变量互换</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;temp=$x;x=$y;y=$temp;echo x=$x,y=$y
</span></span><span style=display:flex><span>x=20,y=10
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;x=$[x^y];y=$[x^y];x=$[x^y];echo x=$x,y=$y
</span></span><span style=display:flex><span>x=20,y=10
</span></span></code></pre></div><h3 id=短路运算>短路运算
<a class=header-anchor href=#%e7%9f%ad%e8%b7%af%e8%bf%90%e7%ae%97></a></h3><ul><li>短路与 &&</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>CMD1 &amp;&amp; CMD2
</span></span><span style=display:flex><span>第一个CMD1结果为真(1)，第二个CMD2必须要参与运算，才能得到最终的结果
</span></span><span style=display:flex><span>第一个CMD1结果为假(0)，总的结果必定为0，因此不需要执行CMD2
</span></span></code></pre></div><ul><li>短路或 ||</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>CMD1 || CMD2
</span></span><span style=display:flex><span>第一个CMD1结果为真(1)，总的结果必定为1，因此不需要执行CMD2
</span></span><span style=display:flex><span>第一个CMD1结果为假(0)，第二个CMD2 必须要参与运算,才能得到最终的结果
</span></span></code></pre></div><ul><li>短路与和或组合</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>CMD1 &amp;&amp; CMD2 || CMD3
</span></span><span style=display:flex><span>当CMD1执行成功时,会执行CMD2
</span></span><span style=display:flex><span>当CMD1执行失败时,会执行CMD3
</span></span><span style=display:flex><span>注意： CMD1 || CMD2 &amp;&amp; CMD3 逻辑不通,不使用
</span></span></code></pre></div><h2 id=条件测试命令>条件测试命令
<a class=header-anchor href=#%e6%9d%a1%e4%bb%b6%e6%b5%8b%e8%af%95%e5%91%bd%e4%bb%a4></a></h2><p>条件测试：判断某需求是否满足，需要由测试机制来实现，专用的测试表达式需要由测试命令辅助完成<br>测试过程，实现评估布尔声明，以便用在条件性环境下进行执行<br>若真，则状态码变量 $? 返回0<br>若假，则状态码变量 $? 返回1<br>条件测试命令</p><ul><li>test EXPRESSION</li><li>[ EXPRESSION ] #和test 等价，建议使用 [ ]</li><li>[[ EXPRESSION ]] 相关于增强版的 [ ], 支持[]的用法,且支持扩展正则表达式和通配符
注意：EXPRESSION前后必须有空白字符<br>帮助：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@ocky9 ~]#type [
</span></span><span style=display:flex><span>[ is a shell builtin
</span></span><span style=display:flex><span>[root@centos8 ~]#help [
</span></span><span style=display:flex><span>[: [ arg... ]
</span></span><span style=display:flex><span>Evaluate conditional expression.
</span></span><span style=display:flex><span>This is a synonym for the &#34;test&#34; builtin, but the last argument must
</span></span><span style=display:flex><span>be a literal `]&#39;, to match the opening `[&#39;.
</span></span><span style=display:flex><span>[root@rocky9 ~]# help test
</span></span><span style=display:flex><span>测试：test [表达式] 评估条件表达式。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>根据EXPR的评估结果，退出状态为0（真）或1（假）。表达式可以是单目或双目的。单目表达式常用于检查文件的状态。还包括字符串操作符和数值比较操作符。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test的行为取决于参数的数量。阅读bash手册页以获取完整规范。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>文件操作符：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  -a FILE        如果文件存在，则为真。
</span></span><span style=display:flex><span>  -b FILE        如果文件是块特殊文件，则为真。
</span></span><span style=display:flex><span>  -c FILE        如果文件是字符特殊文件，则为真。
</span></span><span style=display:flex><span>  -d FILE        如果文件是一个目录，则为真。
</span></span><span style=display:flex><span>  -e FILE        如果文件存在，则为真。
</span></span><span style=display:flex><span>  -f FILE        如果文件存在且是一个普通文件，则为真。
</span></span><span style=display:flex><span>  -g FILE        如果文件设置了组ID，则为真。
</span></span><span style=display:flex><span>  -h FILE        如果文件是一个符号链接，则为真。
</span></span><span style=display:flex><span>  -L FILE        如果文件是一个符号链接，则为真。
</span></span><span style=display:flex><span>  -k FILE        如果文件设置了其“粘滞”位，则为真。
</span></span><span style=display:flex><span>  -p FILE        如果文件是一个命名管道，则为真。
</span></span><span style=display:flex><span>  -r FILE        如果文件对你可读，则为真。
</span></span><span style=display:flex><span>  -s FILE        如果文件存在且不为空，则为真。
</span></span><span style=display:flex><span>  -S FILE        如果文件是一个套接字，则为真。
</span></span><span style=display:flex><span>  -t FD          如果FD是在终端上打开的，则为真。
</span></span><span style=display:flex><span>  -u FILE        如果文件设置了用户ID，则为真。
</span></span><span style=display:flex><span>  -w FILE        如果文件对你可写，则为真。
</span></span><span style=display:flex><span>  -x FILE        如果文件对你可执行，则为真。
</span></span><span style=display:flex><span>  -O FILE        如果文件实际上是由你拥有的，则为真。
</span></span><span style=display:flex><span>  -G FILE        如果文件实际上是由你的组拥有的，则为真。
</span></span><span style=display:flex><span>  -N FILE        如果文件自上次读取后已被修改，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      FILE1 -nt FILE2 如果file1比file2新（根据修改日期），则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      FILE1 -ot FILE2  如果file1比file2旧，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      FILE1 -ef FILE2  如果file1是file2的硬链接，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    字符串操作符：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      -z STRING      如果字符串为空，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      -n STRING
</span></span><span style=display:flex><span>         STRING      如果字符串不为空，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  STRING1 = STRING2
</span></span><span style=display:flex><span>                 如果两个字符串相等，则为真。
</span></span><span style=display:flex><span>  STRING1 != STRING2
</span></span><span style=display:flex><span>                 如果两个字符串不相等，则为真。
</span></span><span style=display:flex><span>  STRING1 &lt; STRING2
</span></span><span style=display:flex><span>                 如果STRING1在字典顺序上排在STRING2之前，则为真。
</span></span><span style=display:flex><span>  STRING1 &gt; STRING2
</span></span><span style=display:flex><span>                 如果STRING1在字典顺序上排在STRING2之后，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    其他操作符：
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  -o OPTION      如果shell选项OPTION被启用，则为真。
</span></span><span style=display:flex><span>  -v VAR         如果shell变量VAR已被设置，则为真。
</span></span><span style=display:flex><span>  -R VAR         如果shell变量VAR已被设置并且是一个名称引用，则为真。
</span></span><span style=display:flex><span>  ! EXPR         如果EXPR为假，则为真。
</span></span><span style=display:flex><span>  EXPR1 -a EXPR2 如果EXPR1和EXPR2都为真，则为真。
</span></span><span style=display:flex><span>  EXPR1 -o EXPR2 如果EXPR1或EXPR2为真，则为真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  arg1 OP arg2   算术测试。OP是以下之一：-eq, -ne, -lt, -le, -gt, 或 -ge。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    算术二元操作符如果ARG1等于、不等于、小于、小于等于、大于或大于等于ARG2，则返回真。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    退出状态： 如果EXPR评估为真，则返回成功；如果EXPR评估为假或给出了无效参数，则失败。
</span></span></code></pre></div><h3 id=变量测试>变量测试
<a class=header-anchor href=#%e5%8f%98%e9%87%8f%e6%b5%8b%e8%af%95></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#判断 NAME 变量是否定义
</span></span><span style=display:flex><span>[ -v NAME ]
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#unset x
</span></span><span style=display:flex><span>[root@centos8 ~]#test -v x
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10
</span></span><span style=display:flex><span>[root@centos8 ~]#test -v x
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#y=
</span></span><span style=display:flex><span>[root@centos8 ~]#test -v y
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#注意 [ ] 中需要空格，否则会报下面错误
</span></span><span style=display:flex><span>[root@centos8 ~]#[-v name]
</span></span><span style=display:flex><span>-bash: [-v: command not found
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -v name ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><h3 id=数值测试>数值测试
<a class=header-anchor href=#%e6%95%b0%e5%80%bc%e6%b5%8b%e8%af%95></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-eq 是否等于
</span></span><span style=display:flex><span>-ne 是否不等于
</span></span><span style=display:flex><span>-gt 是否大于
</span></span><span style=display:flex><span>-ge 是否大于等于
</span></span><span style=display:flex><span>-lt 是否小于
</span></span><span style=display:flex><span>-le 是否小于等于
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#i=10
</span></span><span style=display:flex><span>[root@centos8 ~]#j=8
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $i -lt $j ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $i -gt $j ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ i -gt j ]
</span></span><span style=display:flex><span>-bash: [: i: integer expression expected
</span></span></code></pre></div><p>算术表达式比较</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>== 相等
</span></span><span style=display:flex><span>!= 不相等
</span></span><span style=display:flex><span>&lt;=
</span></span><span style=display:flex><span>&gt;=
</span></span><span style=display:flex><span>&lt;
</span></span><span style=display:flex><span>&gt;
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#x=10;y=10;(( x == y ));echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x == y ));echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x != y ));echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=10;(( x != y ));echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x &gt; y ));echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#x=10;y=20;(( x &lt; y ));echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><h3 id=字符串测试>字符串测试
<a class=header-anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%b5%8b%e8%af%95></a></h3><p><strong>test和 [ ] 字符串测试用法</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-z STRING 字符串是否为空，没定义或空为真，不空为假，
</span></span><span style=display:flex><span>-n STRING 字符串是否不空，不空为真，空为假
</span></span><span style=display:flex><span>STRING 同上
</span></span><span style=display:flex><span>STRING1 = STRING2 是否等于，注意 = 前后有空格
</span></span><span style=display:flex><span>STRING1 != STRING2 是否不等于
</span></span><span style=display:flex><span>&gt; ascii码是否大于ascii码
</span></span><span style=display:flex><span>&lt; 是否小于
</span></span></code></pre></div><p><strong>[[]] 字符串测试用法</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[[ expression ]] 用法
</span></span><span style=display:flex><span>== 左侧字符串是否和右侧的PATTERN相同
</span></span><span style=display:flex><span>注意:此表达式用于[[ ]]中，PATTERN为通配符
</span></span><span style=display:flex><span>=~ 左侧字符串是否能够被右侧的正则表达式的PATTERN所匹配
</span></span><span style=display:flex><span>注意: 此表达式用于[[ ]]中为扩展的正则表达式
</span></span></code></pre></div><p><strong>建议：当使用正则表达式或通配符使用[[ ]]，其它情况一般使用 [ ]</strong>
范例：使用 [ ]</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#unset str
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str=&#34;&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str=&#34; &#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -n &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#unset str
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -n &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#str=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$str&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#str1=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#str2=mage
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $str1 = $str2 ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#str2=magedu
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $str1 = $str2 ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>范例：在比较字符串时，建议变量放在“ ”中</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#[ &#34;$NAME&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=&#34;I love linux&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ $NAME ]
</span></span><span style=display:flex><span>-bash: [: love: binary operator expected
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$NAME&#34; ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ I love linux ]
</span></span><span style=display:flex><span>-bash: [: love: binary operator expected
</span></span></code></pre></div><p>范例: [[ ]] 和通配符</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a*&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $FILE
</span></span><span style=display:flex><span>a*
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;ab&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a*&#34;
</span></span><span style=display:flex><span>#[[]]中如果不想使用通配符*,只想表达*本身,可以用&#34; &#34;引起来
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a&#34;*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;ab&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a&#34;*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#[[]]中如果不想使用通配符*,只想表达*本身,也可以使用转义符
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a\* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a\b&#34;
</span></span><span style=display:flex><span>[root@centos8 ~t]#[[ $FILE == a\* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;a*&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $FILE == a\* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#通配符?
</span></span><span style=display:flex><span>[root@centos8 script]#FILE=abc
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $FILE == ??? ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 script]#FILE=abcd
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $FILE == ??? ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#通配符
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=&#34;linux1&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$NAME&#34; == linux* ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$NAME&#34; == &#34;linux*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=&#34;linux*&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$NAME&#34; == &#34;linux*&#34; ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#结论：[[ == ]] == 右侧的 * 做为通配符，不要加“”，只想做为*符号使用时, 需要加 “” 或转义
</span></span></code></pre></div><p>范例: 判断合理的考试成绩</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 script]#SCORE=101
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ 100|[0-9]{1,2} ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ ^(100|[0-9]{1,2})$ ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 script]#SCORE=10
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ ^(100|[0-9]{1,2})$ ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 script]#SCORE=abc
</span></span><span style=display:flex><span>[root@centos8 script]#[[ $SCORE =~ ^(100|[0-9]{1,2})$ ]]
</span></span><span style=display:flex><span>[root@centos8 script]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例：使用 [[ ]] 判断文件后缀</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#通配符
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=test.log
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; == *.log ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=test.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; == *.log ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; != *.log ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#正则表达式
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; =~ \.log$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#FILE=test.log
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$FILE&#34; =~ \.log$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>范例: 判断合法的非负整数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#N=100
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$N&#34; =~ ^[0-9]+$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#N=Magedu10
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$N&#34; =~ ^[0-9]+$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例: 判断合法IP</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#IP=1.2.3.4
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$IP&#34; =~ ^([0-9]{1,3}\.){3}[0-9]{1,3}$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#IP=1.2.3.4567
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ &#34;$IP&#34; =~ ^([0-9]{1,3}.){3}[0-9]{1,3}$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[[ $IP =~ ^(([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}
</span></span><span style=display:flex><span>([1-9]?[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$ ]]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos7 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat check_ip.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-12-11</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： check_ip.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>IP<span style=color:#f92672>=</span>$1
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $IP <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>(([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>){</span>3<span style=color:#f92672>}([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo $IP is valid <span style=color:#f92672>||</span> echo $IP is invalid
</span></span></code></pre></div><h3 id=文件测试>文件测试
<a class=header-anchor href=#%e6%96%87%e4%bb%b6%e6%b5%8b%e8%af%95></a></h3><p>存在性测试</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-a FILE：同 -e
</span></span><span style=display:flex><span>-e FILE: 文件存在性测试，存在为真，否则为假
</span></span><span style=display:flex><span>-b FILE：是否存在且为块设备文件
</span></span><span style=display:flex><span>-c FILE：是否存在且为字符设备文件
</span></span><span style=display:flex><span>-d FILE：是否存在且为目录文件
</span></span><span style=display:flex><span>-f FILE：是否存在且为普通文件
</span></span><span style=display:flex><span>-h FILE 或 -L FILE：存在且为符号链接文件
</span></span><span style=display:flex><span>-p FILE：是否存在且为命名管道文件
</span></span><span style=display:flex><span>-S FILE：是否存在且为套接字文件
</span></span></code></pre></div><p>范例： -e和-a 表示判断文件的存在性，建议使用-e</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#文件是否不存在
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -a /etc/nologin ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -a /etc/nologin ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#文件是否存在
</span></span><span style=display:flex><span>[root@centos8 ~]# [ -a /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>#取反后结果却没有变化
</span></span><span style=display:flex><span>[root@centos8 ~]# [ ! -a /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -a /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#文件是否存在
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -e /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#此为推荐写法
</span></span><span style=display:flex><span>[root@centos8 ~]#[ ! -e /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -d /etc ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -d /etc/issue ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -L /bin ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -L /bin/ ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span></code></pre></div><h3 id=文件权限测试>文件权限测试：
<a class=header-anchor href=#%e6%96%87%e4%bb%b6%e6%9d%83%e9%99%90%e6%b5%8b%e8%af%95></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-r FILE：是否存在且可读
</span></span><span style=display:flex><span>-w FILE: 是否存在且可写
</span></span><span style=display:flex><span>-x FILE: 是否存在且可执行
</span></span><span style=display:flex><span>-u FILE：是否存在且拥有suid权限
</span></span><span style=display:flex><span>-g FILE：是否存在且拥有sgid权限
</span></span><span style=display:flex><span>-k FILE：是否存在且拥有sticky权限
</span></span></code></pre></div><p><strong>注意：最终结果由用户对文件的实际权限决定，而非文件属性决定</strong>
范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#[ -w /etc/shadow ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -x /etc/shadow ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -w test.txt ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#chattr +i test.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#lsattr test.txt
</span></span><span style=display:flex><span>----i-------------- nianling.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -w test.txt ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#chattr -i test.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -w test.txt ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><p>文件属性测试</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-s FILE #是否存在且非空
</span></span><span style=display:flex><span>-t fd #fd 文件描述符是否在某终端已经打开
</span></span><span style=display:flex><span>-N FILE #文件自从上一次被读取之后是否被修改过
</span></span><span style=display:flex><span>-O FILE #当前有效用户是否为文件属主
</span></span><span style=display:flex><span>-G FILE #当前有效用户是否为文件属组
</span></span><span style=display:flex><span>FILE1 -ef FILE2 #FILE1是否是FILE2的硬链接
</span></span><span style=display:flex><span>FILE1 -nt FILE2 #FILE1是否新于FILE2（mtime）
</span></span><span style=display:flex><span>FILE1 -ot FILE2 #FILE1是否旧于FILE2
</span></span></code></pre></div><h2 id=关于--和-->关于 () 和 { }
<a class=header-anchor href=#%e5%85%b3%e4%ba%8e--%e5%92%8c--></a></h2><p>（CMD1;CMD2;&mldr;）和 { CMD1;CMD2;&mldr;; } 都可以将多个命令组合在一起，批量执行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#man bash
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>( list ) 会开启子shell,并且list中变量赋值及内部命令执行后,将不再影响后续的环境
</span></span><span style=display:flex><span>帮助参看:man bash 搜索(list)
</span></span><span style=display:flex><span>{ list; } 不会启子shell, 在当前shell中运行,会影响当前shell环境
</span></span><span style=display:flex><span>帮助参看:man bash 搜索{ list; }
</span></span></code></pre></div><p>范例: () 和 {}</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#name=mage;(echo $name;name=wang;echo $name );echo $name
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>[root@centos8 ~]#name=mage;{ echo $name;name=wang;echo $name; } ;echo $name
</span></span><span style=display:flex><span>mage
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#umask
</span></span><span style=display:flex><span>0022
</span></span><span style=display:flex><span>[root@centos8 ~]#(umask 066;touch f1.txt)
</span></span><span style=display:flex><span>[root@centos8 ~]#ll f1.txt
</span></span><span style=display:flex><span>-rw------- 1 root root 0 Dec 23 16:58 f1.txt
</span></span><span style=display:flex><span>[root@centos8 ~]#umask
</span></span><span style=display:flex><span>0022
</span></span><span style=display:flex><span>[root@centos8 ~]#( cd /data;ls )
</span></span><span style=display:flex><span>test.log
</span></span><span style=display:flex><span>[root@centos8 ~]#pwd
</span></span><span style=display:flex><span>/root
</span></span><span style=display:flex><span>[root@centos8 ~]#{ cd /data;ls; }
</span></span><span style=display:flex><span>test.log
</span></span><span style=display:flex><span>[root@centos8 data]#pwd
</span></span><span style=display:flex><span>/data
</span></span><span style=display:flex><span>[root@centos8 data]#
</span></span><span style=display:flex><span>#（）会开启子shell
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $BASHPID
</span></span><span style=display:flex><span>1920
</span></span><span style=display:flex><span>[root@centos8 ~]#( echo $BASHPID;sleep 100)
</span></span><span style=display:flex><span>1979
</span></span><span style=display:flex><span>[root@centos8 ~]#pstree -p
</span></span><span style=display:flex><span>├─sshd(719)───sshd(1906)───sshd(1919)─┬─bash(1920)───bash(1979)───sleep(1980)
</span></span><span style=display:flex><span>#{ } 不会开启子shell
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $BASHPID
</span></span><span style=display:flex><span>1920
</span></span><span style=display:flex><span>[root@centos8 ~]#{ echo $BASHPID; }
</span></span><span style=display:flex><span>1920
</span></span></code></pre></div><h2 id=组合测试条件>组合测试条件
<a class=header-anchor href=#%e7%bb%84%e5%90%88%e6%b5%8b%e8%af%95%e6%9d%a1%e4%bb%b6></a></h2><h3 id=第一种方式>第一种方式
<a class=header-anchor href=#%e7%ac%ac%e4%b8%80%e7%a7%8d%e6%96%b9%e5%bc%8f></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[ EXPRESSION1 -a EXPRESSION2 ] #并且，EXPRESSION1和EXPRESSION2都是真，结果才为真
</span></span><span style=display:flex><span>[ EXPRESSION1 -o EXPRESSION2 ] #或者，EXPRESSION1和EXPRESSION2只要有一个真，结果就为
</span></span><span style=display:flex><span>真
</span></span><span style=display:flex><span>[ ! EXPRESSION ] #取反
</span></span></code></pre></div><p><strong>说明： -a 和 -o 需要使用测试命令进行，[[ ]] 不支持</strong>
范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#FILE=&#34;/data/scrips/test.sh&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#ll /data/scrips/test.sh
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 382 Dec 23 09:32 /data/scripts/test.sh
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f $FILE -a -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>[root@centos8 ~]#chmod +x /data/scripts/test.sh
</span></span><span style=display:flex><span>[root@centos8 ~]#ll /data/scripts/test.sh
</span></span><span style=display:flex><span>-rwxr-xr-x 1 root root 382 Dec 23 09:32 /data/script40/test.sh
</span></span><span style=display:flex><span>#并且
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f $FILE -a -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#chmod -x /data/scripts/test.sh
</span></span><span style=display:flex><span>[root@centos8 ~]#ll /data/scripts/test.sh
</span></span><span style=display:flex><span>-rw-r--r-- 1 root root 382 Dec 23 09:32 /data/scripts/test.sh
</span></span><span style=display:flex><span>#或者
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f $FILE -o -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>#取反
</span></span><span style=display:flex><span>[root@centos8 ~]#[ ! -x $FILE ]
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $?
</span></span><span style=display:flex><span>0
</span></span><span style=display:flex><span>[root@centos8 ~]#! [ -x $FILE ]
</span></span><span style=display:flex><span>0
</span></span></code></pre></div><h3 id=第二种方式>第二种方式
<a class=header-anchor href=#%e7%ac%ac%e4%ba%8c%e7%a7%8d%e6%96%b9%e5%bc%8f></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>COMMAND1 &amp;&amp; COMMAND2 #并且，短路与，代表条件性的AND THEN
</span></span><span style=display:flex><span>如果COMMAND1 成功,将执行COMMAND2,否则,将不执行COMMAND2
</span></span><span style=display:flex><span>COMMAND1 || COMMAND2 #或者，短路或，代表条件性的OR ELSE
</span></span><span style=display:flex><span>如果COMMAND1 成功,将不执行COMMAND2,否则,将执行COMMAND2
</span></span><span style=display:flex><span>! COMMAND #非,取反
</span></span></code></pre></div><p><img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/adef641f-5d31-41cc-b562-2830e3e6f626 alt="1 (2)">
<img src=/imgs/img-lazy-loading.gif data-src=https://github.com/user-attachments/assets/14b6ce71-26cd-4562-bb4b-549b1ba8db8e alt="2 (2)"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos7 ~]#[ $[RANDOM%6] -eq 0 ] &amp;&amp; rm -rf /* || echo &#34;click&#34;
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#test &#34;A&#34; = &#34;B&#34; &amp;&amp; echo &#34;Strings are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#test &#34;A&#34;-eq &#34;B&#34; &amp;&amp; echo &#34;Integers are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;A&#34; = &#34;B&#34; ] &amp;&amp; echo &#34;Strings are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ &#34;$A&#34; -eq &#34;$B&#34; ] &amp;&amp; echo &#34;Integers are equal&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -f /bin/cat -a -x /bin/cat ] &amp;&amp; cat /etc/fstab
</span></span><span style=display:flex><span>[root@centos8 ~]#[ -z &#34;$HOSTNAME&#34; -o &#34;$HOSTNAME&#34; = &#34;localhost.localdomain&#34; ]&amp;&amp;
</span></span><span style=display:flex><span>hostname www.magedu.com
</span></span><span style=display:flex><span>[root@centos8 ~]#id wang &amp;&gt; /dev/null || useradd wang
</span></span><span style=display:flex><span>[root@centos8 ~]#id zhang &amp;&gt; /dev/null || useradd zhang
</span></span><span style=display:flex><span>[root@centos8 ~]#getent passwd zhang
</span></span><span style=display:flex><span>zhang:x:1002:1002::/home/zhang:/bin/bash
</span></span><span style=display:flex><span>[root@centos8 ~]#grep -q no_such_user /etc/passwd || echo &#39;No such user&#39;
</span></span><span style=display:flex><span>No such user
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#[ -f “$FILE” ] &amp;&amp; [[ “$FILE”=~ .*\.sh$ ]] &amp;&amp; chmod +x $FILE
</span></span><span style=display:flex><span>[root@centos8 ~]#ping -c1 -W1 172.16.0.1 &amp;&gt; /dev/null &amp;&amp; echo &#39;172.16.0.1 is
</span></span><span style=display:flex><span>up&#39; || (echo &#39;172.16.0.1 is unreachable&#39;; exit 1)
</span></span><span style=display:flex><span>172.16.0.1 is up
</span></span><span style=display:flex><span>[root@centos8 ~]#IP=10.0.0.111;ping -c1 -W1 $IP &amp;&gt; /dev/null &amp;&amp; echo $IP is up
</span></span><span style=display:flex><span>|| echo $IP is down
</span></span><span style=display:flex><span>10.0.0.111 is down
</span></span><span style=display:flex><span>[root@centos8 ~]#IP=10.0.0.1;ping -c1 -W1 $IP &amp;&gt; /dev/null &amp;&amp; echo $IP is up ||
</span></span><span style=display:flex><span>echo $IP is down
</span></span><span style=display:flex><span>10.0.0.1 is up
</span></span></code></pre></div><p>范例：&& 和 || 组合使用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null || echo &#34;$NAME is not
</span></span><span style=display:flex><span>exist&#34;
</span></span><span style=display:flex><span>wange is not exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>wange is not exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wang; id $NAME &amp;&gt; /dev/null || echo &#34;$NAME is not exist&#34;
</span></span><span style=display:flex><span>&amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>wang is exist
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null || echo &#34;$NAME is not
</span></span><span style=display:flex><span>exist&#34; &amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>wange is not exist
</span></span><span style=display:flex><span>wange is exist
</span></span><span style=display:flex><span>#结论：如果&amp;&amp; 和 || 混合使用，&amp;&amp; 要在前，|| 放在后
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wange; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>useradd $NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#id wange
</span></span><span style=display:flex><span>uid=1002(wange) gid=1002(wange) groups=1002(wange)
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wangge; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34; ||
</span></span><span style=display:flex><span>( useradd $NAME; echo $NAME is created )
</span></span><span style=display:flex><span>wangge is created
</span></span><span style=display:flex><span>[root@centos8 ~]#id wangge
</span></span><span style=display:flex><span>uid=1003(wangge) gid=1003(wangge) groups=1003(wangge)
</span></span><span style=display:flex><span>[root@centos8 ~]#NAME=wanggege; id $NAME &amp;&gt; /dev/null &amp;&amp; echo &#34;$NAME is exist&#34;
</span></span><span style=display:flex><span>|| { useradd $NAME; echo $NAME is created; }
</span></span><span style=display:flex><span>wanggege is created
</span></span></code></pre></div><p>范例：网络状态判断</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/ping.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： ping.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>IP<span style=color:#f92672>=</span>172.16.0.1
</span></span><span style=display:flex><span>ping -c1 -W1 $IP &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;</span>$IP<span style=color:#e6db74> is up&#34;</span> <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;</span>$IP<span style=color:#e6db74> is
</span></span></span><span style=display:flex><span><span style=color:#e6db74>unreachable&#34;</span>; exit; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Script is finished&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/scripts/ping.sh</span>
</span></span><span style=display:flex><span>172.16.0.1 is up
</span></span><span style=display:flex><span>Script is finished
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#. /etc/os-release; [[ $ID == &#34;rocky&#34; ]] &amp;&amp; [[ $VERSION_ID ==
</span></span><span style=display:flex><span>8* ]] &amp;&amp; echo Rocky8 || echo CentOS8
</span></span><span style=display:flex><span>[root@rocky8 ~]#. /etc/os-release; [[ $ID == &#34;rocky&#34; ]] &amp;&amp; [[ $VERSION_ID == 8*
</span></span><span style=display:flex><span>]] &amp;&amp; echo Rocky8 || echo CentOS8
</span></span><span style=display:flex><span>Rocky8
</span></span></code></pre></div><p>范例：磁盘空间的判断</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/script/disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>WARNING<span style=color:#f92672>=</span><span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>SPACE_USED<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>df|grep <span style=color:#e6db74>&#39;^/dev/sd&#39;</span>|tr -s <span style=color:#e6db74>&#39; &#39;</span> %|cut -d% -f5|sort -nr|head -1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$SPACE_USED<span style=color:#e6db74>&#34;</span> -ge $WARNING <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;disk used is </span>$SPACE_USED<span style=color:#e6db74>,will be full&#34;</span>
</span></span><span style=display:flex><span>| mail -s diskwaring root
</span></span></code></pre></div><p>范例：磁盘空间和Inode号的检查脚本</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： disk_check.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>WARNING<span style=color:#f92672>=</span><span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>SPACE_USED<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>df | grep <span style=color:#e6db74>&#39;^/dev/sd&#39;</span>|grep -oE <span style=color:#e6db74>&#39;[0-9]+%&#39;</span>|tr -d %| sort -nr|head -1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>INODE_USED<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>df -i | grep <span style=color:#e6db74>&#39;^/dev/sd&#39;</span>|grep -oE <span style=color:#e6db74>&#39;[0-9]+%&#39;</span>|tr -d %| sort -nr|head
</span></span><span style=display:flex><span>-1<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> <span style=color:#e6db74>&#34;</span>$SPACE_USED<span style=color:#e6db74>&#34;</span> -gt $WARNING -o <span style=color:#e6db74>&#34;</span>$INODE_USED<span style=color:#e6db74>&#34;</span> -gt $WARNING <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;DISK
</span></span></span><span style=display:flex><span><span style=color:#e6db74>USED:</span>$SPACE_USED<span style=color:#e6db74>%, INODE_USED:</span>$INODE_USED<span style=color:#e6db74>,will be full&#34;</span> | mail -s <span style=color:#e6db74>&#34;DISK Warning&#34;</span>
</span></span><span style=display:flex><span>root@wangxiaochun.com
</span></span></code></pre></div><h3 id=练习-1><strong>练习</strong>
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0-1></a></h3><p>1、编写脚本 argsnum.sh，接受一个文件路径作为参数；如果参数个数小于1，则提示用户“至少应该给
一个参数”，并立即退出；如果参数个数不小于1，则显示第一个参数所指向的文件中的空白行数<br>2、编写脚本 hostping.sh，接受一个主机的IPv4地址做为参数，测试是否可连通。如果能ping通，则提
示用户“该IP地址可访问”；如果不可ping通，则提示用户“该IP地址不可访问”<br>3、编写脚本 checkdisk.sh，检查磁盘分区空间和inode使用率，如果超过80%，就发广播警告空间将满<br>4、编写脚本 per.sh，判断当前用户对指定参数文件，是否不可读并且不可写<br>5、编写脚本 excute.sh ，判断参数文件是否为sh后缀的普通文件，如果是，添加所有人可执行权限，
否则提示用户非脚本文件<br>6、编写脚本 nologin.sh和 login.sh，实现禁止和允许普通用户登录系统</p><h3 id=使用read命令来接受输入>使用read命令来接受输入
<a class=header-anchor href=#%e4%bd%bf%e7%94%a8read%e5%91%bd%e4%bb%a4%e6%9d%a5%e6%8e%a5%e5%8f%97%e8%be%93%e5%85%a5></a></h3><p>使用read来把输入值分配给一个或多个shell变量，read从标准输入中读取值，给每个单词分配一个变
量，所有剩余单词都被分配给最后一个变量，如果变量名没有指定，默认标准输入的值赋值给系统内置
变量REPLY<br>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>read [options] [name ...]
</span></span></code></pre></div><p>常见选项：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>-p 指定要显示的提示
</span></span><span style=display:flex><span>-s 静默输入，一般用于密码
</span></span><span style=display:flex><span>-n N 指定输入的字符长度N
</span></span><span style=display:flex><span>-d &#39;字符&#39; 输入结束符
</span></span><span style=display:flex><span>-t N TIMEOUT为N秒
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#read
</span></span><span style=display:flex><span>wangxiaochun
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $REPLY
</span></span><span style=display:flex><span>wangxiaochun
</span></span><span style=display:flex><span>[root@centos8 ~]#read NAME TITLE
</span></span><span style=display:flex><span>wang cto
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $TITLE
</span></span><span style=display:flex><span>cto
</span></span><span style=display:flex><span>[root@centos8 ~]#read -p &#34;Please input your name: &#34; NAME
</span></span><span style=display:flex><span>Please input your name: wang
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>wang
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#read x y z &lt;&lt;&lt; &#34;I love you&#34;
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $x
</span></span><span style=display:flex><span>I
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $y
</span></span><span style=display:flex><span>love
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $z
</span></span><span style=display:flex><span>you
</span></span><span style=display:flex><span>[root@centos8 ~]#
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#man bash
</span></span><span style=display:flex><span>Each command in a pipeline is executed as separate process (i.e., in a subshell).
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#Pipelines:A pipeline is a sequence of one or more commands separated by one of
</span></span><span style=display:flex><span>the control operators | or |&amp;
</span></span><span style=display:flex><span>Each command in a pipeline is executed as a separate process (i.e., in a
</span></span><span style=display:flex><span>subshell).
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | read NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#echo $NAME
</span></span><span style=display:flex><span>[root@centos8 ~]#echo magedu | { read NAME; echo $NAME; }
</span></span><span style=display:flex><span>magedu
</span></span></code></pre></div><p><strong>范例：面试题 read和输入重定向</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 scripts]#cat test.txt
</span></span><span style=display:flex><span>1 2
</span></span><span style=display:flex><span>[root@centos8 scripts]#read i j &lt; test.txt ; echo i=$i j=$j
</span></span><span style=display:flex><span>i=1 j=2
</span></span><span style=display:flex><span>[root@centos8 scripts]#echo 1 2 | read x y ; echo x=$x y=$y
</span></span><span style=display:flex><span>x= y=       echo x=$x y=$y 为父进程，故无输出。
</span></span><span style=display:flex><span>[root@centos8 ~]#echo 1 2 | ( read x y ; echo x=$x y=$y )
</span></span><span style=display:flex><span>x=1 y=2
</span></span><span style=display:flex><span>[root@centos8 ~]#echo 1 2 | { read x y ; echo x=$x y=$y; }
</span></span><span style=display:flex><span>x=1 y=2
</span></span></code></pre></div><p>范例：判断用户输入的是否为 YES</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>root@ubuntu2004:~# cat yesorno.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Please input yes or no: &#34;</span> input
</span></span><span style=display:flex><span>answer<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $input| tr <span style=color:#e6db74>&#39;A-Z&#39;</span> <span style=color:#e6db74>&#39;a-z&#39;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;yes&#39;</span> -o $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;y&#39;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo YES
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;no&#39;</span> -o $answer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;n&#39;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> echo NO
</span></span><span style=display:flex><span>root@ubuntu2004:~# cat yesorno2.sh
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Please input yes or no: &#34;</span> input
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $input <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>([</span>Yy<span style=color:#f92672>][</span>Ee<span style=color:#f92672>][</span>Ss<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Yy<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo YES
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $input <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>([</span>Nn<span style=color:#f92672>][</span>Oo<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Nn<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo NO
</span></span></code></pre></div><p>范例: 检查主机的网络状态</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat check_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-07</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： check_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Please input a IP: &#34;</span> IP
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$IP<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>(([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>){</span>3<span style=color:#f92672>}([</span>1-9<span style=color:#f92672>]</span>?<span style=color:#f92672>[</span>0-
</span></span><span style=display:flex><span>9<span style=color:#f92672>]</span>|1<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>2<span style=color:#f92672>}</span>|2<span style=color:#f92672>[</span>0-4<span style=color:#f92672>][</span>0-9<span style=color:#f92672>]</span>|25<span style=color:#f92672>[</span>0-5<span style=color:#f92672>])</span>$ <span style=color:#f92672>]]</span> <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;IP is invalid&#34;</span>;exit; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>ping -c1 -W1 $IP &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo $IP is up <span style=color:#f92672>||</span> echo $IP is down
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>read -p “Enter a filename: “ FILE
</span></span></code></pre></div><p>范例：鸡兔同笼算法，今有雉兔同笼，上有三十五头，下有九十四足，问雉兔各几何？</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/script40/chook_rabbit.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-23</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： chook_rabbit.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入头的数量: &#34;</span> HEAD
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入脚的数量: &#34;</span> FOOT
</span></span><span style=display:flex><span>RABBIT<span style=color:#f92672>=</span>$<span style=color:#f92672>[</span>FOOT/2-HEAD<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>CHOOK<span style=color:#f92672>=</span>$<span style=color:#f92672>[</span>HEAD-RABBIT<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;兔子: &#34;</span> $RABBIT
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;鸡: &#34;</span> $CHOOK
</span></span></code></pre></div><p>范例：实现运维工作菜单</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>. /etc/init.d/functions
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#34;\E[</span>$<span style=color:#e6db74>[RANDOM%7+31];1m&#34;</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>请选择：
</span></span></span><span style=display:flex><span><span style=color:#e6db74>1）备份数据库
</span></span></span><span style=display:flex><span><span style=color:#e6db74>2）清理日志
</span></span></span><span style=display:flex><span><span style=color:#e6db74>3）软件升级
</span></span></span><span style=display:flex><span><span style=color:#e6db74>4）软件回滚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>5）删库跑路
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#39;\E[0m&#39;</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请选择上面项对应的数字1-5: &#34;</span> MENU
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> ./backup.sh
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;清理日志&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>3</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;软件升级&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>4</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;软件回滚&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $MENU -eq <span style=color:#ae81ff>5</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> action <span style=color:#e6db74>&#34;删库跑路&#34;</span>
</span></span></code></pre></div><h2 id=bash-shell-的配置文件>bash shell 的配置文件
<a class=header-anchor href=#bash-shell-%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6></a></h2><p>bash shell的配置文件很多，可以分成下面类别</p><h3 id=按生效范围划分两类>按生效范围划分两类
<a class=header-anchor href=#%e6%8c%89%e7%94%9f%e6%95%88%e8%8c%83%e5%9b%b4%e5%88%92%e5%88%86%e4%b8%a4%e7%b1%bb></a></h3><p>全局配置：针对所有用户皆有效</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span></code></pre></div><p>个人配置：只针对特定用户有效</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>~/.bashrc
</span></span></code></pre></div><h2 id=shell登录两种方式分类>shell登录两种方式分类
<a class=header-anchor href=#shell%e7%99%bb%e5%bd%95%e4%b8%a4%e7%a7%8d%e6%96%b9%e5%bc%8f%e5%88%86%e7%b1%bb></a></h2><h3 id=交互式登录>交互式登录
<a class=header-anchor href=#%e4%ba%a4%e4%ba%92%e5%bc%8f%e7%99%bb%e5%bd%95></a></h3><ul><li>直接通过终端输入账号密码登录</li><li>使用 su - UserName 切换的用户
<strong>配置文件生效和执行顺序：</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#放在每个文件最前
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/ .bash_ profile
</span></span><span style=display:flex><span>~/ .bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>#放在每个文件最后
</span></span><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/bashrc #此文件执行两次
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span></code></pre></div><p><strong>注意：文件之间的调用关系，写在同一个文件的不同位置，将影响文件的执行顺序</strong></p><h3 id=非交互式登录>非交互式登录
<a class=header-anchor href=#%e9%9d%9e%e4%ba%a4%e4%ba%92%e5%bc%8f%e7%99%bb%e5%bd%95></a></h3><ul><li>su UserName</li><li>图形界面下打开的终端</li><li>执行脚本</li><li>任何其它的bash实例
执行顺序：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>/etc/profile.d/*.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span></code></pre></div><p>范例: 将命令放在最前面</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Last login: Wed Jun 10 11:24:03 2020 from 10.0.0.1
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>[root@centos8 ~]#su - root
</span></span><span style=display:flex><span>Last login: Wed Jun 10 12:26:31 CST 2020 from 10.0.0.1 on pts/0
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>[root@centos8 ~]#exit
</span></span><span style=display:flex><span>logout
</span></span><span style=display:flex><span>[root@centos8 ~]#su root
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span></code></pre></div><p>范例:将命令放在最后面</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>Last login: Wed Jun 10 12:29:20 2020 from 10.0.0.1
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>[root@centos8 ~]#su - root
</span></span><span style=display:flex><span>Last login: Wed Jun 10 12:30:03 CST 2020 from 10.0.0.1 on pts/3
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>/etc/profile
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span><span style=display:flex><span>~/.bash_profile
</span></span><span style=display:flex><span>[root@centos8 ~]#su root
</span></span><span style=display:flex><span>/etc/profile.d/test.sh
</span></span><span style=display:flex><span>/etc/bashrc
</span></span><span style=display:flex><span>~/.bashrc
</span></span></code></pre></div><h2 id=按功能划分分类>按功能划分分类
<a class=header-anchor href=#%e6%8c%89%e5%8a%9f%e8%83%bd%e5%88%92%e5%88%86%e5%88%86%e7%b1%bb></a></h2><p>profile类和bashrc类</p><h3 id=profile类>Profile类
<a class=header-anchor href=#profile%e7%b1%bb></a></h3><p>profile类为交互式登录的shell提供配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>全局：/etc/profile, /etc/profile.d/*.sh
</span></span><span style=display:flex><span>个人：~/.bash_profile
</span></span></code></pre></div><p>功用：<br>(1) 用于定义环境变量<br>(2) 运行命令或脚本</p><h3 id=bashrc类>Bashrc类
<a class=header-anchor href=#bashrc%e7%b1%bb></a></h3><p>bashrc类：为非交互式和交互式登录的shell提供配置</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>全局：/etc/bashrc
</span></span><span style=display:flex><span>个人：~/.bashrc
</span></span></code></pre></div><p>功用：<br>(1) 定义命令别名和函数<br>(2) 定义本地变量</p><h2 id=编辑配置文件生效>编辑配置文件生效
<a class=header-anchor href=#%e7%bc%96%e8%be%91%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%94%9f%e6%95%88></a></h2><p>修改profile和bashrc文件后需生效两种方法:</p><ol><li>重新启动shell进程</li><li>source|. 配置文件<br>注意:source 会在当前shell中执行脚本,所有一般只用于执行置文件,或在脚本中调用另一个脚本的场景<br>范例：</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>. ~/.bashr
</span></span></code></pre></div><h2 id=bash-退出任务>Bash 退出任务
<a class=header-anchor href=#bash-%e9%80%80%e5%87%ba%e4%bb%bb%e5%8a%a1></a></h2><p>保存在~/.bash_logout文件中（用户）,在退出登录shell时运行<br>功能：</p><ul><li>创建自动备份</li><li>清除临时文件</li></ul><h3 id=练习-2>练习
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0-2></a></h3><ul><li>1、让所有用户的PATH环境变量的值多出一个路径，例如：/usr/local/apache/bin</li><li>2、用户 root 登录时，将命令指示符变成红色，并自动启用如下别名： rm=‘rm -i’
cdnet=‘cd /etc/sysconfig/network-scripts/’<br>editnet=‘vim /etc/sysconfig/network-scripts/ifcfg-eth0’<br>editnet=‘vim /etc/sysconfig/network-scripts/ifcfg-eno16777736 或 ifcfg-ens33 ’ (如果系统是
CentOS7)</li><li>3、任意用户登录系统时，显示红色字体的警示提醒信息“Hi,dangerous！”</li><li>4、编写生成脚本基本格式的脚本，包括作者，联系方式，版本，时间，描述等</li></ul><h2 id=流程控制>流程控制
<a class=header-anchor href=#%e6%b5%81%e7%a8%8b%e6%8e%a7%e5%88%b6></a></h2><p>条件选择<br>条件判断分绍<br>单分支条件<br>多分支条件</p><h3 id=选择执行-if-语句>选择执行 if 语句
<a class=header-anchor href=#%e9%80%89%e6%8b%a9%e6%89%a7%e8%a1%8c-if-%e8%af%ad%e5%8f%a5></a></h3><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if COMMANDS; then COMMANDS; [ elif COMMANDS; then COMMANDS; ]... [ else
</span></span><span style=display:flex><span>COMMANDS; ] fi
</span></span></code></pre></div><p>单分支</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if 判断条件;then
</span></span><span style=display:flex><span>条件为真的分支代码
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>双分支</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if 判断条件; then
</span></span><span style=display:flex><span>条件为真的分支代码
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>条件为假的分支代码
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>多分支</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>if 判断条件1; then
</span></span><span style=display:flex><span>条件1为真的分支代码
</span></span><span style=display:flex><span>elif 判断条件2; then
</span></span><span style=display:flex><span>条件2为真的分支代码
</span></span><span style=display:flex><span>elif 判断条件3; then
</span></span><span style=display:flex><span>条件3为真的分支代码
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>以上条件都为假的分支代码
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>说明：</p><ul><li>多个条件时，逐个条件进行判断，第一次遇为“真”条件时，执行其分支，而后结束整个if语句</li><li>if 语句可嵌套<br>范例：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#根据命令的退出状态来执行命令
</span></span><span style=display:flex><span>if ping -c1 -W2 station1 &amp;&gt; /dev/null; then
</span></span><span style=display:flex><span>echo &#39;station1 is UP&#39;
</span></span><span style=display:flex><span>elif grep -q &#39;station1&#39; ~/maintenance.txt; then
</span></span><span style=display:flex><span>echo &#39;station1 is undergoing maintenance&#39;
</span></span><span style=display:flex><span>else
</span></span><span style=display:flex><span>echo &#39;station1 is unexpectedly DOWN!&#39;
</span></span><span style=display:flex><span>exit 1
</span></span><span style=display:flex><span>fi
</span></span></code></pre></div><p>范例：身体质量指数 (BMI）</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat if_bmi.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-25</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： if_bmi.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入身高(m为单位): &#34;</span> HIGH
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> ! <span style=color:#e6db74>&#34;</span>$HIGH<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>[</span>0-2<span style=color:#f92672>](</span><span style=color:#ae81ff>\.</span><span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>,2<span style=color:#f92672>})</span>?$ <span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;输入错误的身高!&#34;</span>
</span></span><span style=display:flex><span>exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入体重(kg为单位): &#34;</span> WEIGHT
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> ! <span style=color:#e6db74>&#34;</span>$WEIGHT<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ ^<span style=color:#f92672>[</span>0-9<span style=color:#f92672>]{</span>1,3<span style=color:#f92672>}</span>$ <span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span> echo <span style=color:#e6db74>&#34;输入错误的体重!&#34;</span>; exit 2; <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>BMI<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $WEIGHT/$HIGH^2|bc<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $BMI -le <span style=color:#ae81ff>18</span> <span style=color:#f92672>]</span> ;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;太瘦了,多吃点!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> <span style=color:#f92672>[</span> $BMI -lt <span style=color:#ae81ff>24</span> <span style=color:#f92672>]</span> ;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;身材很棒!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;太胖了,注意节食,加强运动!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h2 id=条件判断-case-语句>条件判断 case 语句
<a class=header-anchor href=#%e6%9d%a1%e4%bb%b6%e5%88%a4%e6%96%ad-case-%e8%af%ad%e5%8f%a5></a></h2><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>case WORD in [PATTERN [| PATTERN]...) COMMANDS ;;]... esac
</span></span><span style=display:flex><span>case 变量引用 in
</span></span><span style=display:flex><span>PAT1)
</span></span><span style=display:flex><span>    分支1
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>PAT2)
</span></span><span style=display:flex><span>    分支2
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>*)
</span></span><span style=display:flex><span>   默认分支
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>esac
</span></span></code></pre></div><p>case支持glob风格的通配符：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>* 任意长度任意字符
</span></span><span style=display:flex><span>? 任意单个字符
</span></span><span style=display:flex><span>[] 指定范围内的任意单个字符
</span></span><span style=display:flex><span>| 或者，如: a|b
</span></span></code></pre></div><p>范例:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat case_yesorno.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-25</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： case_yesorno.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Do you agree(yes/no)? &#34;</span> INPUT
</span></span><span style=display:flex><span>INPUT<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $INPUT | tr <span style=color:#e6db74>&#39;A-Z&#39;</span> <span style=color:#e6db74>&#39;a-z&#39;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $INPUT in
</span></span><span style=display:flex><span>y|yes<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;You input is YES&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>n|no<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;You input is NO&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;Input fales,please input yes or no!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat case_yesorno2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2019-12-25</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： case_yesorno.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2019 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Do you agree(yes/no)? &#34;</span> INPUT
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $INPUT in
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>yY<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Yy<span style=color:#f92672>][</span>Ee<span style=color:#f92672>][</span>Ss<span style=color:#f92672>])</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;You input is YES&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>Nn<span style=color:#f92672>]</span>|<span style=color:#f92672>[</span>Nn<span style=color:#f92672>][</span>Oo<span style=color:#f92672>])</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;You input is NO&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Input fales,please input yes or no!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><p>范例: 文件后缀处理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat suffix.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-07</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： suffix.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;please input a file: &#34;</span> FILE
</span></span><span style=display:flex><span>SUFFIX<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $FILE | grep -Eo <span style=color:#e6db74>&#34;[^.]+</span>$<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $SUFFIX in
</span></span><span style=display:flex><span>gz<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo gzip
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>bz2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo bzip2
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>xz<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo xz
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>Z<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo compress
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>zip<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo zip
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo other
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><p>范例：运维菜单实现版本2</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： work_menu.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#34;\E[</span>$<span style=color:#e6db74>[RANDOM%7+31];1m&#34;</span>
</span></span><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>请选择：
</span></span></span><span style=display:flex><span><span style=color:#e6db74>1）备份数据库
</span></span></span><span style=display:flex><span><span style=color:#e6db74>2）清理日志
</span></span></span><span style=display:flex><span><span style=color:#e6db74>3）软件升级
</span></span></span><span style=display:flex><span><span style=color:#e6db74>4）软件回滚
</span></span></span><span style=display:flex><span><span style=color:#e6db74>5）删库跑路
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span>echo -en <span style=color:#e6db74>&#39;\E[0m&#39;</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入上面数字1-5: &#34;</span> MENU
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> $MENU in
</span></span><span style=display:flex><span>1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;执行备份数据库&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>#./backup.sh</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;清理日志&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>3<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;软件升级&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;软件回滚&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>5<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;删库跑路&#34;</span>
</span></span><span style=display:flex><span>   ;;
</span></span><span style=display:flex><span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;INPUT FALSE!&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><h3 id=练习-3>练习
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0-3></a></h3><p>1、编写脚本 createuser.sh，实现如下功能：使用一个用户名做为参数，如果指定参数的用户存在，就
显示其存在，否则添加之。并设置初始密码为123456，显示添加的用户的id号等信息，在此新用户第一
次登录时，会提示用户立即改密码，如果没有参数，就提示：请输入用户名</p><p>2、编写脚本 yesorno.sh，提示用户输入yes或no,并判断用户输入的是yes还是no,或是其它信息</p><p>3、编写脚本 filetype.sh，判断用户输入文件路径，显示其文件类型（普通，目录，链接，其它文件类
型）</p><p>4、编写脚本 checkint.sh，判断用户输入的参数是否为正整数</p><p>5、编写脚本 reset.sh，实现系统安装后的初始化环境，包括：1、别名 2、环境变量，如PS1等 3、
安装常用软件包，如：tree 5、实现固定的IP的设置，6、vim的设置等</p><h2 id=循环>循环
<a class=header-anchor href=#%e5%be%aa%e7%8e%af></a></h2><p>将某代码段重复运行多次，通常有进入循环的条件和退出循环的条件<br>重复运行次数</p><ul><li>循环次数事先已知</li><li>循环次数事先未知
常见的循环的命令：for, while, until<br><img src=/imgs/img-lazy-loading.gif data-src=images/url/linux/linux09/04.jpg alt></li></ul><h3 id=循环-for>循环 for
<a class=header-anchor href=#%e5%be%aa%e7%8e%af-for></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>#CentOS7的for帮助比CentOS8全面
</span></span><span style=display:flex><span>[root@centos7 ~]#help for
</span></span><span style=display:flex><span>for: for NAME [in WORDS ... ] ; do COMMANDS; done
</span></span><span style=display:flex><span>Execute commands for each member in a list.
</span></span><span style=display:flex><span>The `for&#39; loop executes a sequence of commands for each member in a
</span></span><span style=display:flex><span>list of items. If `in WORDS ...;&#39; is not present, then `in &#34;$@&#34;&#39; is
</span></span><span style=display:flex><span>assumed. For each element in WORDS, NAME is set to that element, and
</span></span><span style=display:flex><span>the COMMANDS are executed.
</span></span><span style=display:flex><span>Exit Status:
</span></span><span style=display:flex><span>Returns the status of the last command executed.
</span></span><span style=display:flex><span>for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done
</span></span><span style=display:flex><span>Arithmetic for loop.
</span></span><span style=display:flex><span>Equivalent to
</span></span><span style=display:flex><span>(( EXP1 ))
</span></span><span style=display:flex><span>while (( EXP2 )); do
</span></span><span style=display:flex><span>COMMANDS
</span></span><span style=display:flex><span>(( EXP3 ))
</span></span><span style=display:flex><span>done
</span></span><span style=display:flex><span>EXP1, EXP2, and EXP3 are arithmetic expressions. If any expression is
</span></span><span style=display:flex><span>omitted, it behaves as if it evaluates to 1.
</span></span><span style=display:flex><span>Exit Status:
</span></span><span style=display:flex><span>Returns the status of the last command executed.
</span></span></code></pre></div><p>格式1：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>for NAME [in WORDS ... ] ; do COMMANDS; done
</span></span><span style=display:flex><span>#方式1
</span></span><span style=display:flex><span>for 变量名 in 列表;do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span><span style=display:flex><span>#方式2
</span></span><span style=display:flex><span>for 变量名 in 列表
</span></span><span style=display:flex><span>do
</span></span><span style=display:flex><span>    循环体
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p><strong>执行机制：</strong></p><ul><li>依次将列表中的元素赋值给“变量名”; 每次赋值后即执行一次循环体; 直到列表中的元素耗尽，循环
结束</li><li>如果省略 [in WORDS &mldr; ] ，此时使用位置参数变量 in &ldquo;$@&rdquo;
<strong>for 循环列表生成方式：</strong></li><li>直接给出列表</li><li>整数列表：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>{start..end}
</span></span><span style=display:flex><span>$(seq [start [step]] end)
</span></span></code></pre></div><ul><li>返回列表的命令:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>$(COMMAND)
</span></span></code></pre></div><ul><li>使用glob，如：*.sh</li><li>变量引用，如：$@，$*，$#
范例：面试题，计算1+2+3+&mldr;+100 的结果</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>root@centos8 ~]#sum=0;for i in {1..100};do let sum+=i;done ;echo sum=$sum
</span></span><span style=display:flex><span>sum=5050
</span></span><span style=display:flex><span>[root@centos8 ~]#seq -s+ 100|bc5050
</span></span><span style=display:flex><span>5050
</span></span><span style=display:flex><span>[root@centos8 ~]#echo {1..100}|tr &#39; &#39; +|bc
</span></span><span style=display:flex><span>5050
</span></span><span style=display:flex><span>[root@centos8 ~]#seq 100|paste -sd +|bc
</span></span><span style=display:flex><span>5050
</span></span></code></pre></div><p>范例: 100以内的奇数之和</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#sum=0;for i in {1..100..2};do let sum+=i;done;echo sum=$sum
</span></span><span style=display:flex><span>sum=2500
</span></span><span style=display:flex><span>[root@centos8 ~]#seq -s+ 1 2 100| bc
</span></span><span style=display:flex><span>2500
</span></span><span style=display:flex><span>[root@centos8 ~]#echo {1..100..2}|tr &#39; &#39; + | bc
</span></span><span style=display:flex><span>2500
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/for_sum.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-27</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： for_sum.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>sum<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in $* ; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>let sum<span style=color:#f92672>+=</span>i
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>echo sum<span style=color:#f92672>=</span>$sum
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash /data/scripts/for_sum.sh 1 2 3 4 5 6</span>
</span></span><span style=display:flex><span>sum<span style=color:#f92672>=</span><span style=color:#ae81ff>21</span>
</span></span></code></pre></div><p>范例: 批量创建用户</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat createuser.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-12-14</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： createuser.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> $# -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;Usage: createuser.sh USERNAME ...&#34;</span> ;exit <span style=color:#ae81ff>1</span> ; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> user ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    id $user &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo $user is exist <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> useradd $user ; echo $user
</span></span><span style=display:flex><span>is created; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: 批量创建用户和并设置随机密码</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat user_for.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-07</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： user_for.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..10<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>useradd user$i
</span></span><span style=display:flex><span>PASS<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>cat /dev/urandom | tr -dc <span style=color:#e6db74>&#39;[:alnum:]&#39;</span> |head -c12<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>echo $PASS | passwd --stdin user$i &amp;&gt; /dev/null
</span></span><span style=display:flex><span>echo user$i:$PASS &gt;&gt; /data/user.log
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;user</span>$i<span style=color:#e6db74> is created&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: 九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 script<span style=color:#f92672>]</span><span style=color:#75715e>#cat 9x9_for.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-08-07</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： 9x9_for.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> j in <span style=color:#e6db74>`</span>seq $i<span style=color:#e6db74>`</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      echo -e <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span><span style=color:#e6db74>${</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span>$<span style=color:#e6db74>[j*i]\t\c&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: printf 实现九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>for i in {1..9};do
</span></span><span style=display:flex><span>   for j in {1..9};do
</span></span><span style=display:flex><span>       printf &#34;%sx%s=%s\t&#34; $j $i $[i*j]
</span></span><span style=display:flex><span>       [ $i -eq $j ] &amp;&amp; break
</span></span><span style=display:flex><span>   done
</span></span><span style=display:flex><span>   printf &#39;\n&#39;
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p>范例: 实现九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#vim 9x9.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2021-04-02</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： 9x9.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2021 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> j in <span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i in <span style=color:#e6db74>`</span>seq $j<span style=color:#e6db74>`</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        echo -e <span style=color:#e6db74>&#34;\E[1;</span>$<span style=color:#e6db74>[RANDOM%7+31]m</span><span style=color:#e6db74>${</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span>$<span style=color:#e6db74>[i*j]\E[0m\t\c&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>1;i&lt;<span style=color:#f92672>=</span>9;i++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>j<span style=color:#f92672>=</span>1;j&lt;<span style=color:#f92672>=</span>i;j++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      printf <span style=color:#e6db74>&#34;\E[1;</span>$<span style=color:#e6db74>[RANDOM%7+31]m</span><span style=color:#e6db74>${</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>=</span>$<span style=color:#e6db74>[i*j]\E[0m\t&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   printf <span style=color:#e6db74>&#34;\n&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例: 倒状的九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu1804 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat 9x9_v2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-12-14</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： 9x9.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span> j in <span style=color:#66d9ef>$(</span>seq <span style=color:#e6db74>`</span>echo $<span style=color:#f92672>[</span>10-$i<span style=color:#f92672>]</span><span style=color:#e6db74>`</span><span style=color:#66d9ef>)</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      echo -ne <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>x`echo </span>$<span style=color:#e6db74>[10-i]`=</span><span style=color:#66d9ef>$((</span><span style=color:#f92672>(</span><span style=color:#ae81ff>10</span><span style=color:#f92672>-</span>i<span style=color:#f92672>)*</span>j<span style=color:#66d9ef>))</span><span style=color:#e6db74>\t&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu1804 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash 9x9_v2.sh</span>
</span></span><span style=display:flex><span>1x9<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span> 2x9<span style=color:#f92672>=</span><span style=color:#ae81ff>18</span> 3x9<span style=color:#f92672>=</span><span style=color:#ae81ff>27</span> 4x9<span style=color:#f92672>=</span><span style=color:#ae81ff>36</span> 5x9<span style=color:#f92672>=</span><span style=color:#ae81ff>45</span> 6x9<span style=color:#f92672>=</span><span style=color:#ae81ff>54</span> 7x9<span style=color:#f92672>=</span><span style=color:#ae81ff>63</span> 8x9<span style=color:#f92672>=</span><span style=color:#ae81ff>72</span> 9x9<span style=color:#f92672>=</span><span style=color:#ae81ff>81</span>
</span></span><span style=display:flex><span>1x8<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span> 2x8<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span> 3x8<span style=color:#f92672>=</span><span style=color:#ae81ff>24</span> 4x8<span style=color:#f92672>=</span><span style=color:#ae81ff>32</span> 5x8<span style=color:#f92672>=</span><span style=color:#ae81ff>40</span> 6x8<span style=color:#f92672>=</span><span style=color:#ae81ff>48</span> 7x8<span style=color:#f92672>=</span><span style=color:#ae81ff>56</span> 8x8<span style=color:#f92672>=</span><span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>1x7<span style=color:#f92672>=</span><span style=color:#ae81ff>7</span> 2x7<span style=color:#f92672>=</span><span style=color:#ae81ff>14</span> 3x7<span style=color:#f92672>=</span><span style=color:#ae81ff>21</span> 4x7<span style=color:#f92672>=</span><span style=color:#ae81ff>28</span> 5x7<span style=color:#f92672>=</span><span style=color:#ae81ff>35</span> 6x7<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span> 7x7<span style=color:#f92672>=</span><span style=color:#ae81ff>49</span>
</span></span><span style=display:flex><span>1x6<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> 2x6<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span> 3x6<span style=color:#f92672>=</span><span style=color:#ae81ff>18</span> 4x6<span style=color:#f92672>=</span><span style=color:#ae81ff>24</span> 5x6<span style=color:#f92672>=</span><span style=color:#ae81ff>30</span> 6x6<span style=color:#f92672>=</span><span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>1x5<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> 2x5<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span> 3x5<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span> 4x5<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span> 5x5<span style=color:#f92672>=</span><span style=color:#ae81ff>25</span>
</span></span><span style=display:flex><span>1x4<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span> 2x4<span style=color:#f92672>=</span><span style=color:#ae81ff>8</span> 3x4<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span> 4x4<span style=color:#f92672>=</span><span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>1x3<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span> 2x3<span style=color:#f92672>=</span><span style=color:#ae81ff>6</span> 3x3<span style=color:#f92672>=</span><span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span>1x2<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> 2x2<span style=color:#f92672>=</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>1x1<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>生产案例：将指定目录下的文件所有文件的后缀改名为 bak 后缀</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/for_rename.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-01-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： /data/script40/for_rename.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>DIR<span style=color:#f92672>=</span>/data/test
</span></span><span style=display:flex><span>cd $DIR <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo 无法进入 $DIR;exit 1; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> FILE in * ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   PRE<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $FILE|grep -Eo <span style=color:#e6db74>&#34;.*\.&#34;</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>   mv $FILE <span style=color:#e6db74>${</span>PRE<span style=color:#e6db74>}</span>bak
</span></span><span style=display:flex><span><span style=color:#75715e># PRE=`echo $FILE|rev|cut -d. -f 2-|rev`</span>
</span></span><span style=display:flex><span><span style=color:#75715e># PRE=`echo $FILE | sed -nr &#39;s/(.*)\.([^.]+)$/\1/p&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># SUFFIX=`echo $FILE | sed -nr &#39;s/(.*)\.([^.]+)$/\2/p&#39;`</span>
</span></span><span style=display:flex><span><span style=color:#75715e># mv $FILE $PRE.bak</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例：M37期面试题，要求将目录YYYY-MM-DD/中所有文件，移动到YYYY-MM/DD/下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#1.创建YYYY-MM-DD格式的目录，当前日期一年前365天到目前共365个目录，里面有10个文件.log后缀的</span>
</span></span><span style=display:flex><span>文件
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat for_dir.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>PDIR<span style=color:#f92672>=</span>/data/test
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..365<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   DIR<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>date -d <span style=color:#e6db74>&#34;-</span>$i<span style=color:#e6db74> day&#34;</span> +%F<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>   mkdir -pv $PDIR/$DIR
</span></span><span style=display:flex><span>   cd $PDIR/$DIR
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span> j in <span style=color:#f92672>{</span>1..10<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      touch $RANDOM.log
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#2.将上面的目录移动到YYYY-MM/DD/下</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>DIR<span style=color:#f92672>=</span>/data/test
</span></span><span style=display:flex><span>cd $DIR <span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo 无法进入 $DIR;exit 1; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> subdir in * ;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    YYYY_MM<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $subdir |cut -d<span style=color:#e6db74>&#34;-&#34;</span> -f1,2<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    DD<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>echo $subdir |cut -d<span style=color:#e6db74>&#34;-&#34;</span> -f3<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[</span> -d $YYYY_MM/$DD <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> mkdir -p $YYYY_MM/$DD &amp;&gt; /dev/null
</span></span><span style=display:flex><span>    mv $subdir/* $YYYY_MM/$DD
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>rm -rf $DIR/*-*-*
</span></span></code></pre></div><p>面试题：扫描一个网段：10.0.0.0/24，判断此网段中主机在线状态，将在线的主机的IP打印出来</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>root@centos8 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat /data/scripts/for_scan_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-27</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： for_scan_host.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>NET<span style=color:#f92672>=</span>10.0.0
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ID in <span style=color:#f92672>{</span>1..254<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      ping -c1 -W1 $NET.$ID &amp;&gt; /dev/null <span style=color:#f92672>&amp;&amp;</span> echo $NET.$ID is up| tee -a
</span></span><span style=display:flex><span>host_list.log <span style=color:#f92672>||</span> echo $NET.$ID is down
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>&amp;
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>wait
</span></span></code></pre></div><p><strong>格式2</strong>
双小括号方法，即((…))格式，也可以用于算术运算，双小括号方法也可以使bash Shell实现C语言风格
的变量操作
I=10;((I++))
<img src=/imgs/img-lazy-loading.gif data-src=/images/url/linux/linux09/05.jpg alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done
</span></span><span style=display:flex><span>for ((控制变量初始化;条件判断表达式;控制变量的修正表达式))
</span></span><span style=display:flex><span>do
</span></span><span style=display:flex><span>   循环体
</span></span><span style=display:flex><span>done
</span></span></code></pre></div><p>说明：</p><ul><li>控制变量初始化：仅在运行到循环代码段时执行一次</li><li>控制变量的修正表达式：每轮循环结束会先进行控制变量修正运算，而后再做条件判断
范例:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu1804 ~<span style=color:#f92672>]</span><span style=color:#75715e>#cat sum.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-01-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： for_sum2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>sum<span style=color:#f92672>=</span>0,i<span style=color:#f92672>=</span>1;i&lt;<span style=color:#f92672>=</span>100;i++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      let sum<span style=color:#f92672>+=</span>i
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>echo sum<span style=color:#f92672>=</span>$sum
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>sum<span style=color:#f92672>=</span>0,i<span style=color:#f92672>=</span>1;i&lt;<span style=color:#f92672>=</span>100;sum<span style=color:#f92672>+=</span>i,i++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      true
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>echo sum<span style=color:#f92672>=</span>$sum
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@ubuntu1804 ~<span style=color:#f92672>]</span><span style=color:#75715e>#bash sum.sh</span>
</span></span><span style=display:flex><span>sum<span style=color:#f92672>=</span><span style=color:#ae81ff>5050</span>
</span></span><span style=display:flex><span>sum<span style=color:#f92672>=</span><span style=color:#ae81ff>5050</span>
</span></span></code></pre></div><p>范例:九九乘法表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-01-03</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： for_99_2.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.magedu.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#语法1实现</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span> j in <span style=color:#e6db74>`</span>seq $i<span style=color:#e6db74>`</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      echo -e <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span>$i<span style=color:#e6db74>=</span><span style=color:#66d9ef>$((</span>j*i<span style=color:#66d9ef>))</span><span style=color:#e6db74>\t\c&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#语法2实现</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>1;i&lt;10;i++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>j<span style=color:#f92672>=</span>1;j&lt;<span style=color:#f92672>=</span>i;j++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      echo -e <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>j<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span>$i<span style=color:#e6db74>=</span><span style=color:#66d9ef>$((</span>j*i<span style=color:#66d9ef>))</span><span style=color:#e6db74>\t\c&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><p>范例：等腰三角形</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#cat for_triangle.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Author: wangxiaochun</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#QQ: 29308620</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Date: 2020-04-27</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FileName： for_triangle.sh</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#URL: http://www.wangxiaochun.com</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Description： The test script</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#Copyright (C): 2020 All rights reserved</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#********************************************************************</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;请输入三角形的行数: &#34;</span> line
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>1;i&lt;<span style=color:#f92672>=</span>line;i++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>k<span style=color:#f92672>=</span>0;k&lt;<span style=color:#f92672>=</span>line-i;k++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      echo -e <span style=color:#e6db74>&#39; \c&#39;</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>j<span style=color:#f92672>=</span>1;j&lt;<span style=color:#f92672>=</span>2*i-1;j++<span style=color:#f92672>))</span>;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>      echo -e <span style=color:#e6db74>&#39;*\c&#39;</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>   echo
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#bash for_triangle.sh</span>
</span></span><span style=display:flex><span>请输入三角形的行数: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>          *
</span></span><span style=display:flex><span>         ***
</span></span><span style=display:flex><span>        *****
</span></span><span style=display:flex><span>       *******
</span></span><span style=display:flex><span>      *********
</span></span><span style=display:flex><span>     ***********
</span></span><span style=display:flex><span>    *************
</span></span><span style=display:flex><span>   ***************
</span></span><span style=display:flex><span>  *****************
</span></span><span style=display:flex><span> *******************
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>root@centos8 scripts<span style=color:#f92672>]</span><span style=color:#75715e>#</span>
</span></span></code></pre></div><p>范例：生成进度</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#for ((i = 0; i &lt;= 100; ++i)); do printf &#34;\e[4D%3d%%&#34; $i;sleep
</span></span><span style=display:flex><span>0.1s; done
</span></span><span style=display:flex><span>100%[root@centos8 ~]#
</span></span></code></pre></div><p>范例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>[root@centos8 ~]#for((;;));do echo for;sleep 1;done
</span></span><span style=display:flex><span>for
</span></span><span style=display:flex><span>for
</span></span><span style=display:flex><span>for
</span></span><span style=display:flex><span>for
</span></span><span style=display:flex><span>for
</span></span><span style=display:flex><span>for
</span></span><span style=display:flex><span>for
</span></span></code></pre></div><h3 id=练习用-for-实现>练习：用 for 实现
<a class=header-anchor href=#%e7%bb%83%e4%b9%a0%e7%94%a8-for-%e5%ae%9e%e7%8e%b0></a></h3><p>1、判断/var/目录下所有文件的类型<br>2、添加10个用户user1-user10，密码为8位随机字符<br>3、/etc/rc.d/rc3.d目录下分别有多个以K开头和以S开头的文件；分别读取每个文件，以K开头的输出为
文件加stop，以S开头的输出为文件名加start，如K34filename stop S66filename start<br>4、编写脚本，提示输入正整数n的值，计算1+2+…+n的总和<br>5、计算100以内所有能被3整除的整数之和<br>6、编写脚本，提示请输入网络地址，如192.168.0.0，判断输入的网段中主机在线状态<br>7、打印九九乘法表<br>8、在/testdir目录下创建10个html文件,文件名格式为数字N（从1到10）加随机8个字母，如：
1AbCdeFgH.html<br>9、打印等腰三角形<br>10、猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个。第二天早上又将剩下的桃子
吃掉一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时，只
剩下一个桃子了。求第一天共摘了多少？</p></div><footer class=post-footer><div class=post-tags><a href=/tags/linux>linux</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_ali-pay.png alt="蓝惠の小窝 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/_wechat-pay.png alt="蓝惠の小窝 - 微信">
<span>微信</span></div></div></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/rss.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/linux11/ rel=next title=磁盘存储和文件系统><i class="fa fa-chevron-left"></i> 磁盘存储和文件系统</a></div><div class="post-nav-prev post-nav-item"><a href=/post/linux09/ rel=prev title="正则表达式和相关工具及文件查找压缩 ">正则表达式和相关工具及文件查找压缩
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>蓝惠の小窝</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>湘ICP备20000440号</a>
<img src=/imgs/gongan.png alt=湘公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402019770" target=_blank>湘公网安备 31011402019770 号</a></div><div class=vendors-list><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title><img src=/imgs/img-lazy-loading.gif data-src alt>
</a><a target=_blank href title></a><span></span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#0cd2f8","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Announcements","categoryid":"DIC_kwDOL_1gUs4Cfkpa","emit":"url","inputposition":"top","mapping":"top","reactions":true,"repo":"lanhui672/lanhui672.Giscus","repoid":"R_kgDOL_1gUg","theme":"cobalt\n\nlang=\"zh-CN\""},"js":"https://giscus.app/client.js"},"hostname":"http://localhost:1313/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3"}</script><script type=text/javascript src=/js/main.js defer></script></body></html>